document.addEventListener('DOMContentLoaded', initializeApp);

const quizData = {
    'islamic_civilization': {
        name: "مدخل إلى تاريخ الحضارة الإسلامية",
        icon: '<i class="fas fa-mosque"></i>', 
        semester: 2,
        modules: {
            'module1_civ': {
                name: "الموقع والمضايق",
                icon: '<i class="fas fa-globe-americas"></i>',
                questions: [
                    { type: 'mcq', question: "لماذا ازدادت أهمية موقع العالم الإسلامي بعد اكتشاف البترول؟", options: ["لأنه يستهلك كل البترول", "لأنه يساهم بحصة كبيرة من الإنتاج والاحتياطي العالمي", "لأنه يقع قرب أوروبا"], answer: "لأنه يساهم بحصة كبيرة من الإنتاج والاحتياطي العالمي", explanation: "زادت أهمية العالم الإسلامي بعد اكتشاف البترول على أراضيه، حيث يساهم بنسبة كبيرة من الإنتاج والاحتياطي العالمي للبترول." },
                    { type: 'fill', question: "مضيق ______ يقع بين إيران وسلطنة عمان ويربط الخليج العربي بالمحيط الهندي.", answer: "هرمز", explanation: "مضيق هرمز يقع بين إيران وسلطنة عمان، ويربط الخليج العربي ببحر عمان ثم المحيط الهندي. يُعد من أخطر المضايق لأهميته في نقل النفط." },
                    { type: 'mcq', question: "ما هو الممر المائي الذي يربط البحر الأحمر بالبحر المتوسط عبر مصر؟", options: ["مضيق باب المندب", "قناة السويس", "مضيق البوسفور"], answer: "قناة السويس", explanation: "قناة السويس هي ممر مائي صناعي يربط البحر المتوسط بالبحر الأحمر عبر مصر، وتعتبر من أهم الطرق التجارية عالمياً لأنها تختصر الوقت بين أوروبا وآسيا." },
                    { type: 'fill', question: "يربط مضيق باب المندب بين البحر الأحمر و______.", answer: "خليج عدن", explanation: "يقع مضيق باب المندب بين اليمن وجيبوتي ويربط بين البحر الأحمر وخليج عدن، ومنه إلى المحيط الهندي، وهو شريان مهم للتجارة بين أوروبا وآسيا." }
                ]
            },
            'module2_civ': {
                name: "الركائز والمميزات",
                icon: '<i class="fas fa-handshake"></i>',
                questions: [
                    { type: 'mcq', question: "ما هي السمة الأساسية التي تميز الحضارة الإسلامية بكونها 'حضارة ربانية'؟", options: ["أنها نشأت في الصحراء", "أنها جاءت وتطورت بعد نزول الوحي", "أنها اهتمت بالتجارة فقط"], answer: "أنها جاءت وتطورت بعد نزول الوحي", explanation: "تعتبر الحضارة الإسلامية حضارة ربانية لأنها جاءت وتطورت بعد نزول الوحي على الرسول صلى الله عليه وسلم، وتستمد مبادئها من مصدر إلهي." },
                    { type: 'fill', question: "حث الإسلام على تطبيق مبدأ ______ في جميع الأمور كركيزة أساسية للحكم.", answer: "الشورى", explanation: "الشورى هي إحدى ركائز الحضارة الإسلامية، حيث حث الإسلام على تطبيق هذا المبدأ في جميع الأمور السياسية والاجتماعية." },
                    { type: 'mcq', question: "لماذا توصف الحضارة الإسلامية بأنها 'حضارة إنسانية'؟", options: ["لأنها تقتصر على العرب", "لأنها تحترم جميع الشعوب دون تمييز", "لأنها تركز على الفرد فقط"], answer: "لأنها تحترم جميع الشعوب دون تمييز", explanation: "الحضارة الإسلامية حضارة إنسانية لأنها جاءت لتحترم جميع الشعوب ولا تقتصر على جنس أو إقليم جغرافي معين، وقضت على التفريق العنصري." },
                    { type: 'fill', question: "أكمل الحديث النبوي: 'اللهم إني أعوذ بك من العجز و ______'.", answer: "الكسل", explanation: "العمل هو ركيزة أساسية في بناء الحضارة، وقد حث الإسلام على النشاط وعمارة الأرض، وكان الرسول ﷺ يتعوذ من العجز والكسل." }
                ]
            },
            'module3_civ': {
                name: "مصادر التاريخ الإسلامي",
                icon: '<i class="fas fa-scroll"></i>',
                questions: [
                    { type: 'mcq', question: "ما هي أقدم أنواع المصادر التاريخية الإسلامية التي تربط بين الحديث والتاريخ؟", options: ["كتب الفتوح", "كتب الأنساب", "كتب السير والمغازي"], answer: "كتب السير والمغازي", explanation: "كتب السير والمغازي هي من أقدم المصادر التاريخية الإسلامية، حيث تربط بين الحديث النبوي والتاريخ، وتركز على سيرة النبي محمد وغزواته." },
                    { type: 'fill', question: "الكتب التي تهتم بتوثيق حياة الأشخاص بشكل مفصل تسمى كتب ______.", answer: "التراجم", explanation: "كتب التراجم تهتم بتوثيق حياة الأشخاص بشكل مفصل، مع الإشارة إلى الظروف الزمنية والثقافية للمترجمين، بهدف رسم صورة دقيقة للشخصية." },
                    { type: 'mcq', question: "ماذا تسمى الكتب التي توثق مرحلة التوسع الإسلامي بعد وفاة النبي ﷺ؟", options: ["كتب المناقب", "كتب الفتوح", "كتب الطبقات"], answer: "كتب الفتوح", explanation: "كتب الفتوح هي المصادر التي تكمل كتب المغازي، وتهتم بتوثيق مرحلة التوسع الإسلامي في العصرين الراشدي والأموي، وتتضمن معلومات عن القادة والقبائل والعهود." },
                    { type: 'mcq', question: "ماذا تسمى القضايا التي تعرض على القضاة والفقهاء وتعتبر مصدراً تاريخياً للحياة الاجتماعية؟", options: ["الأنساب", "المناقب", "النوازل"], answer: "النوازل", explanation: "كتب النوازل تتناول القضايا التي تعرض على القضاء والفقهاء، وتعتبر مصدراً واقعياً ومباشراً لفهم الحياة الاجتماعية والاقتصادية في المجتمعات الإسلامية." }
                ]
            },
            'module4_civ': {
                name: "حواضر المشرق والأندلس",
                icon: '<i class="fas fa-city"></i>',
                questions: [
                    { type: 'mcq', question: "من هو الخليفة العباسي الذي أسس مدينة بغداد وجعلها عاصمة للخلافة؟", options: ["هارون الرشيد", "المأمون", "أبو جعفر المنصور"], answer: "أبو جعفر المنصور", explanation: "أسس الخليفة أبو جعفر المنصور مدينة بغداد في العهد العباسي، وجعلها عاصمة للخلافة. وقد بلغت أوج ازدهارها في زمن هارون الرشيد." },
                    { type: 'fill', question: "أسس جوهر الصقلي مدينة ______ في عهد المعز لدين الله الفاطمي.", answer: "القاهرة", explanation: "أسس القائد جوهر الصقلي مدينة القاهرة في عهد الخليفة المعز لدين الله الفاطمي، لتصبح عاصمة الدولة الفاطمية في مصر، وازدهرت في عهود لاحقة." },
                    { type: 'mcq', question: "من هو القائد الذي جعل قرطبة عاصمة للأمويين في الأندلس؟", options: ["طارق بن زياد", "عبد الرحمن الداخل", "يوسف بن تاشفين"], answer: "عبد الرحمن الداخل", explanation: "جعل عبد الرحمن الداخل (صقر قريش) مدينة قرطبة عاصمة للدولة الأموية في الأندلس، فشهدت ازدهاراً كبيراً في مختلف المجالات." },
                    { type: 'fill', question: "أصبحت مدينة ______ مركزا لنقل العلوم والثقافة الإسلامية إلى أوروبا بعد فتحها على يد طارق بن زياد.", answer: "طليطلة", explanation: "فتح المسلمون طليطلة بقيادة طارق بن زياد، وأصبحت المدينة مركزاً مهماً لنقل وترجمة العلوم والثقافة الإسلامية إلى أوروبا." }
                ]
            },
            'module5_civ': {
                name: "الأسواق عند العرب",
                icon: '<i class="fas fa-store"></i>',
                questions: [
                    { type: 'mcq', question: "إلى جانب التجارة، ما هو الدور الآخر المهم الذي لعبته الأسواق مثل سوق عكاظ؟", options: ["مركز عسكري فقط", "ملتقى أدبي للشعراء", "مكان للزراعة"], answer: "ملتقى أدبي للشعراء", explanation: "لم تقتصر الأسواق على بيع السلع فقط، بل كانت ملتقى أدبياً يتبارى فيه الشعراء ويتفاخرون، مع وجود حكام يفصلون في المنافسات." },
                    { type: 'mcq', question: "ما هو أشهر سوق في الجاهلية والإسلام، وكان يقام بين مكة والطائف؟", options: ["سوق مجنة", "سوق ذي المجاز", "سوق عكاظ"], answer: "سوق عكاظ", explanation: "سوق عكاظ هو أشهر سوق في الجاهلية والإسلام، كان يقام بين مكة والطائف من أول إلى 20 ذي القعدة، ويشتهر بالمنافسات الأدبية والتجارة الواسعة." },
                    { type: 'fill', question: "سوق ______ بالبصرة، بدأ كسوق للإبل ثم أصبح مكاناً للمجالس والحلقات الأدبية في العهد الأموي.", answer: "المربد", explanation: "يقع سوق المربد في البصرة، وكان في البداية سوقاً للإبل، ثم تحول في العهد الأموي إلى مكان عام للمجالس والحلقات الأدبية يرتاده الشعراء والأشراف." }
                ]
            }
        }
    },

    'archaeology_intro': {
    name: "مدخل إلى علم الآثار",
    icon: '<i class="fas fa-search-location"></i>',
    semester: 2, 
    modules: {

        'module1_arch': {
            name: "الملف والمسح الأثري",
            icon: '<i class="fas fa-file-alt"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هي الجهة الوصية التي يُقدّم إليها 'الملف الأثري' في الجزائر للحصول على تصريح بالحفر؟",
                    options: ["البلدية", "الجامعة", "وزارة الثقافة"],
                    answer: "وزارة الثقافة",
                    explanation: "تتمثل الجهة الوصية المخولة قانوناً بالتصريح والموافقة على الحفرية في وزارة الثقافة."
                },
                {
                    type: 'fill',
                    question: "ينقسم الملف الأثري إلى جانبين أساسيين، هما الجانب العلمي والجانب ______.",
                    answer: "الإداري",
                    explanation: "يتكون الملف الأثري من جانب علمي (نظري وميداني) وجانب إداري (يتعلق بالفريق والتمويل والإجراءات)."
                },
                {
                    type: 'mcq',
                    question: "أي من التالية لا يعتبر من 'المصادر' الأولية التي يعتمد عليها الباحث في القسم النظري للملف الأثري؟",
                    options: ["المصادر التاريخية", "المصادر الجغرافية (الرحالة)", "الدراسات النقدية الحديثة"],
                    answer: "الدراسات النقدية الحديثة",
                    explanation: "الدراسات النقدية والتحليلية الحديثة تعتبر 'مراجع'، بينما 'المصادر' هي المؤلفات الأصلية والقديمة."
                },
                {
                    type: 'mcq',
                    question: "ما هي الفائدة الرئيسية من استخدام 'الصور الجوية' في الدراسة التحضيرية للموقع الأثري؟",
                    options: ["تحديد ارتفاع الموقع عن سطح البحر", "تحديد الحيز الأثري وحدود الموقع", "معرفة التركيب الكيميائي للتربة"],
                    answer: "تحديد الحيز الأثري وحدود الموقع",
                    explanation: "تساعد الصور الجوية في تحديد حدود الموقع الأثري ورؤية معالم مطمورة كالجدران والأسوار، مما يوفر الوقت والجهد."
                },
                {
                    type: 'fill',
                    question: "العملية التي تهدف إلى جرد وحصر ما يوجد بالمواقع الأثرية ووصف بقاياها المادية الظاهرة فوق السطح تسمى المسح ______.",
                    answer: "الأثري",
                    explanation: "المسح الأثري هو عملية جرد وحصر للمواقع والمعالم الأثرية بهدف وصفها وتحديد حيزها وآفاقها."
                },
                {
                    type: 'mcq',
                    question: "أي نوع من المسح الأثري يهدف إلى إنقاذ البقايا الأثرية في المناطق التي ستقام فيها مشاريع كبرى كالسدود والطرق؟",
                    options: ["المسح الشامل", "المسح الاختياري", "المسح الإنقاذي"],
                    answer: "المسح الإنقاذي",
                    explanation: "المسح الإنقاذي يتم بسرعة وبطريقة دقيقة في المناطق المهددة بالزوال بسبب مشاريع عمرانية لإنقاذ ما يمكن إنقاذه من معلومات."
                },
                {
                    type: 'fill',
                    question: "الدراسة التي يقوم بها فريق المسح بعد جمع اللقى والصور في المختبر تسمى الدراسة ______.",
                    answer: "المخبرية",
                    explanation: "بعد انتهاء العمل الميداني، تبدأ الدراسة المخبرية التي تشمل تنظيف، تصنيف، تحليل، ورسم اللقى الأثرية."
                }
            ]
        },

        'module2_arch': {
            name: "الحفرية الأثرية (تعريف وأنواع)",
            icon: '<i class="fas fa-tools"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هو الهدف الرئيسي للحفرية الأثرية كمنهج علمي؟",
                    options: ["البحث عن الكنوز والتحف الثمينة", "استخراج واستخلاص الآثار لتفسيرها واستنباط التاريخ منها", "الحفر السريع للوصول إلى أقدم الطبقات"],
                    answer: "استخراج واستخلاص الآثار لتفسيرها واستنباط التاريخ منها",
                    explanation: "الحفرية هي أسلوب علمي ممنهج يهدف لاستخراج الآثار وتسجيلها وترميمها بهدف استنباط معلومات عن الحضارات الماضية."
                },
                {
                    type: 'fill',
                    question: "الحفرية التي تتم بشكل عاجل لإنقاذ أثر تم العثور عليه صدفة أثناء أشغال بناء أو شق طرق تسمى الحفرية ______.",
                    answer: "الإنقاذية",
                    explanation: "الحفرية الإنقاذية (Fouille de sauvetage) تتم عندما يتم اكتشاف آثار بشكل مفاجئ، ويكون الهدف هو إنقاذ ما تبقى منها بسرعة."
                },
                {
                    type: 'mcq',
                    question: "ما هو الفرق الرئيسي بين الحفرية الوقائية والحفرية الإنقاذية؟",
                    options: ["الوقائية تستخدم أدوات أحدث", "الوقائية تتم قبل بدء الأشغال، والإنقاذية تتم بعد العثور على الآثار", "الإنقاذية أعمق من الوقائية"],
                    answer: "الوقائية تتم قبل بدء الأشغال، والإنقاذية تتم بعد العثور على الآثار",
                    explanation: "الحفرية الوقائية تتم كإجراء احترازي في موقع يُعرف أنه أثري قبل بدء أي مشروع بناء، بينما الإنقاذية هي رد فعل على اكتشاف مفاجئ."
                },
                {
                    type: 'mcq',
                    question: "أي نوع من الحفريات يتطلب إعداد ملف أثري كامل وموافقة مسبقة من وزارة الثقافة وتخطيط طويل المدى؟",
                    options: ["الحفرية الإنقاذية", "الحفرية الوقائية", "الحفرية المنظمة أو المبرمجة"],
                    answer: "الحفرية المنظمة أو المبرمجة",
                    explanation: "الحفرية المنظمة (Fouille programmée) هي مشروع بحثي متكامل يتم عبر خطوات علمية دقيقة بدءاً من إعداد الملف الأثري."
                },
                {
                    type: 'fill',
                    question: "في أي بلد عربي تم اكتشاف تماثيل بشكل عرضي في البحر، مما أدى إلى حفريات تحت مائية في 1907 و 1913؟",
                    answer: "تونس",
                    explanation: "تم اكتشاف تماثيل وحطام سفينة بشكل عرضي في منطقة المهدية بتونس، مما أدى إلى من أوائل الحفريات تحت المائية في المنطقة."
                }
            ]
        },

        'module3_arch': {
            name: "طرق ومناهج الحفر",
            icon: '<i class="fas fa-drafting-compass"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "طريقة الحفر التي تعتمد على تقسيم التلة الأثرية إلى أربعة أجزاء متساوية وحفر جزأين متقابلين فقط تسمى طريقة:",
                    options: ["ويلر", "ماتريكس هاريس", "فان غيفن"],
                    answer: "فان غيفن",
                    explanation: "طريقة فان غيفن (Van Giffen) مناسبة للتلال الدائرية الصغيرة، حيث تترك قطاعين كشواهد لدراسة الطبقات."
                },
                {
                    type: 'mcq',
                    question: "من هو العالم الأثري الذي طور طريقة الحفر بنظام شبكة المربعات المتساوية مع ترك ممرات بينها لدراسة التوضع الطبقي؟",
                    options: ["إدوارد هاريس", "السير مورتيمر ويلر", "فان غيفن"],
                    answer: "السير مورتيمر ويلر",
                    explanation: "السير مورتيمر ويلر (Wheeler) هو من أسس لمنهج الحفر بالمربعات (Grid System) الذي يسمح بتسجيل دقيق للطبقات في جدران الممرات."
                },
                {
                    type: 'fill',
                    question: "من عيوب طريقة ويلر أن الممرات المتروكة بدون حفر قد تخفي بقايا أثرية هامة وتمنع الرؤية ______ للموقع.",
                    answer: "الشاملة",
                    explanation: "الانتقاد الرئيسي لطريقة ويلر هو أن الممرات (الشواهد) تعيق فهم المخطط المعماري الكامل للمباني المكتشفة."
                },
                {
                    type: 'mcq',
                    question: "طريقة الحفر التي تعتمد على الحفر المفتوح (Open-area excavation) ونزع الطبقات واحدة تلو الأخرى على كامل مساحة الحفر تسمى طريقة:",
                    options: ["ويلر", "ماتريكس هاريس", "فان غيفن"],
                    answer: "ماتريكس هاريس",
                    explanation: "طريقة إدوارد هاريس (Matrix Harris) تقوم على الحفر المفتوح وتسجيل العلاقات بين الطبقات دون ترك ممرات، مما يعطي رؤية شاملة للموقع."
                },
                {
                    type: 'mcq',
                    question: "طريقة الحفر على 'رقعة الشطرنج' تعتبر منهجاً وسطاً بين أي طريقتين؟",
                    options: ["فان غيفن وهاريس", "ويلر وهاريس", "فان غيفن وويلر"],
                    answer: "ويلر وهاريس",
                    explanation: "تجمع طريقة رقعة الشطرنج بين فكرة المربعات (مثل ويلر) ولكنها تحفر مربعات متبادلة، مما يسمح برؤية أوسع (مثل هاريس) مع الإبقاء على شواهد طبقية."
                },
                {
                    type: 'fill',
                    question: "قبل البدء بأي تخطيط للحفرية، يجب أولاً تعيين نقطة ثابتة في الموقع تسمى النقطة ______.",
                    answer: "المرجعية",
                    explanation: "النقطة المرجعية هي نقطة ثابتة (Datum point) يتم انطلاقاً منها تقسيم الموقع وتحديد إحداثيات ومستويات كل المكتشفات."
                }
            ]
        },

        'module4_arch': {
            name: "خطوات تنفيذ الحفرية",
            icon: '<i class="fas fa-list-ol"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هي أول خطوة من خطوات الحفرية العملية بعد الدراسة النظرية؟",
                    options: ["تحديد موضع الرديم", "تخطيط الحفرية", "تحديد حيز الحفرية"],
                    answer: "تحديد حيز الحفرية",
                    explanation: "بعد الدراسة التحضيرية، أول خطوة ميدانية هي تحديد الحيز أو المساحة الاستراتيجية التي سيتم حفرها في الموسم الأول."
                },
                {
                    type: 'mcq',
                    question: "ما هو الإجراء الذي يتم للتأكد من خلو المكان المخصص لرمي تراب الحفرية (الرديم) من أي آثار؟",
                    options: ["رشه بالماء", "إجراء أسبار استكشافية فيه", "تسويته بالجرافة"],
                    answer: "إجراء أسبار استكشافية فيه",
                    explanation: "قبل تحديد موضع الرديم، يجب التأكد من خلوه من الآثار عبر إجراء أسبار (حفر اختبارية) لضمان عدم طمر موقع أثري آخر."
                },
                {
                    type: 'fill',
                    question: "الجهاز المستخدم لرسم المحاور المتعامدة (شمال-جنوب وشرق-غرب) بدقة في تخطيط الحفرية هو جهاز ______.",
                    answer: "التيودوليت",
                    explanation: "يستخدم جهاز التيودوليت (أو النيفومتر) لضبط الزوايا القائمة بدقة ورسم شبكة المربعات على الموقع."
                },
                {
                    type: 'mcq',
                    question: "عند الشروع في الحفر، يتم العمل بنزع طبقة بعد طبقة حتى الوصول إلى ما يسمى بـ ______، وهي الأرض التي لا تحتوي على أي أثر لنشاط بشري.",
                    options: ["الطبقة الصخرية", "الأرض البكر", "المياه الجوفية"],
                    answer: "الأرض البكر",
                    explanation: "يتوقف الحفر في مربع ما عند الوصول إلى الأرض البكر أو الطبقة الجيولوجية العقيمة (Sterile soil)."
                },
                {
                    type: 'fill',
                    question: "العملية التي يتم فيها تمرير تراب الحفرية عبر شبكة معدنية للتأكد من عدم وجود لقى أثرية صغيرة ودقيقة تسمى ______.",
                    answer: "الغربلة",
                    explanation: "تعتبر الغربلة (Sieving) إجراءً مهماً، خاصة في مواقع ما قبل التاريخ أو عند البحث عن أشياء دقيقة كالخرز أو العملات الصغيرة."
                }
            ]
        }
    }
},
    'documentary_research': {
        name: "البحث الوثائقي",
        icon: '<i class="fas fa-search"></i>',
        semester: 2,
        modules: {
            'module1_res': {
                name: "المصادر وأنواعها",
                icon: '<i class="fas fa-layer-group"></i>',
                questions: [
                    { type: 'mcq', question: "ماذا تُسمى المصادر الأصلية التي لم تُحلل أو تُفسر من قبل باحثين آخرين؟", options: ["مصادر ثانوية", "مصادر ثلاثية", "مصادر أولية"], answer: "مصادر أولية", explanation: "المصادر الأولية (Primary Sources) هي المصادر الأصلية التي تُعد المادة الخام للبحث العلمي، مثل الوثائق الرسمية، المخطوطات، الصور، والإحصاءات." },
                    { type: 'fill', question: "الكتب والمقالات العلمية التي تحلل الدراسات الأولية تعتبر مصادر ______.", answer: "ثانوية", explanation: "المصادر الثانوية (Secondary Sources) هي التي تشرح أو تحلل أو تفسر المصادر الأولية. يستخدمها الباحث لفهم السياق أو بناء الإطار النظري." },
                    { type: 'mcq', question: "ما هو الهدف الرئيسي من استخدام المصادر الثلاثية مثل الموسوعات والمعاجم؟", options: ["تحليل نقدي عميق", "تقديم بيانات خام", "تنظيم وتلخيص المعلومات"], answer: "تنظيم وتلخيص المعلومات", explanation: "المصادر الثلاثية (Tertiary Sources) تُستخدم لتنظيم وتلخيص المعلومات من المصادر الأولية والثانوية، وهي مفيدة للبحث التمهيدي، مثل الموسوعات والقواميس والببليوغرافيات." },
                    { type: 'mcq', question: "أي مما يلي يُعتبر من أشكال المصادر الحديثة (بعد الورقية)؟", options: ["البرديات", "الأطالس والكتب", "قواعد البيانات والمواقع الإلكترونية"], answer: "قواعد البيانات والمواقع الإلكترونية", explanation: "المصادر الحديثة (بعد الورقية) تشمل الأشكال الإلكترونية مثل الأفلام، التسجيلات، قواعد البيانات، والمواقع الإلكترونية." }
                ]
            },
            'module2_res': {
                name: "مراحل وأدوات البحث",
                icon: '<i class="fas fa-tools"></i>',
                questions: [
                    { type: 'mcq', question: "ما هي أول مرحلة من مراحل إعداد البحث الوثائقي؟", options: ["جمع المصادر", "اختيار الموضوع وتحديد الإشكالية", "توثيق المراجع"], answer: "اختيار الموضوع وتحديد الإشكالية", explanation: "أولى مراحل إعداد البحث الوثائقي هي اختيار موضوع محدد وواقعي ومناسب، ثم تحديد الإشكالية أو السؤال البحثي الذي سيتم الإجابة عنه." },
                    { type: 'fill', question: "أداة مثل ______ تساعد الباحث على تحديد محاور بحثه عبر طرح أسئلة (من، ماذا، متى، كيف، لماذا).", answer: "3QCPO", explanation: "تُستخدم طريقة 3QCPO كأداة فعالة لتحليل واختيار الموضوع وتحديد محاوره الأساسية عبر طرح الأسئلة الخمسة الرئيسية." },
                    { type: 'mcq', question: "أي مما يلي يُعتبر من أدوات مساعدة لتنظيم المراجع ومنع التشتت؟", options: ["Google Scholar", "Zotero أو Mendeley", "Microsoft Word"], answer: "Zotero أو Mendeley", explanation: "تعتبر أدوات مثل Zotero, Mendeley, و EndNote أدوات متخصصة تساعد في حفظ وتنظيم المراجع وإدراجها تلقائيًا في البحث حسب نظام التوثيق المعتمد." },
                     { type: 'mcq', question: "عند تقييم مصدر إلكتروني، أي سؤال يعتبر الأكثر أهمية للتحقق من المصداقية؟", options: ["هل تصميم الموقع جميل؟", "من هو المؤلف وهل هو مختص في المجال؟", "هل يحتوي الموقع على إعلانات؟"], answer: "من هو المؤلف وهل هو مختص في المجال؟", explanation: "لتقييم مصداقية مصدر إلكتروني، من أهم الأسئلة التي يجب طرحها: من هو المؤلف؟ هل هو مختص؟ من هي الجهة الناشرة؟ وهل المحتوى محكّم؟" }
                ]
            },
            'module3_res': {
                name: "التوثيق والاقتباس",
                icon: '<i class="fas fa-file-alt"></i>',
                questions: [
                    { type: 'mcq', question: "ما هو الفرق بين الاقتباس المباشر وغير المباشر؟", options: ["المباشر قصير وغير المباشر طويل", "المباشر نقل حرفي للنص، وغير المباشر إعادة صياغة للفكرة", "المباشر يوضع في الهامش وغير المباشر في النص"], answer: "المباشر نقل حرفي للنص، وغير المباشر إعادة صياغة للفكرة", explanation: "الاقتباس المباشر (الحرفي) هو نقل النص كما هو بين علامتي تنصيص، أما الاقتباس غير المباشر (التلخيصي) فيعتمد على إعادة صياغة الفكرة بأسلوب الباحث الخاص." },
                    { type: 'fill', question: "في نظام التوثيق APA، الاقتباس الذي يتجاوز ______ كلمة يُكتب في فقرة مستقلة.", answer: "40", explanation: "حسب نظام APA، الاقتباس القصير هو ما يقل عن 40 كلمة ويوضع داخل الفقرة، أما الاقتباس الطويل (أكثر من 40 كلمة) فيُكتب في فقرة مستقلة ومنفصلة." },
                    { type: 'mcq', question: "ماذا يعني 'الاقتباس الثانوي'؟", options: ["اقتباس من مصدر غير مهم", "اقتباس من مصدرين في نفس الوقت", "النقل من مصدر وسيط استشهد بالمصدر الأصلي"], answer: "النقل من مصدر وسيط استشهد بالمصدر الأصلي", explanation: "الاقتباس الثانوي هو النقل من مصدر ناقل (وسيط) استشهد بالمصدر الأصلي، ويُستخدم عند صعوبة الوصول للمصدر الأولي." },
                    { type: 'mcq', question: "ما هو أهم ضابط من ضوابط الاقتباس لضمان الأمانة العلمية؟", options: ["أن يكون الاقتباس قصيراً", "النقل دون تحريف وتحديد المصدر بدقة", "أن يكون الاقتباس من كتاب مشهور"], answer: "النقل دون تحريف وتحديد المصدر بدقة", explanation: "من أهم ضوابط الاقتباس: الأمانة العلمية (النقل دون تحريف)، الاعتدال، وضعه في سياق مناسب، وتحديد مصدره بدقة حسب نظام التوثيق المعتمد." }
                ]
            },
            'module4_res': {
                name: "مهارات البحث الإلكتروني",
                icon: '<i class="fas fa-globe"></i>',
                questions: [
                    { type: 'mcq', question: "ما هي وظيفة أمر البحث المتقدم 'site:' في محركات البحث؟", options: ["البحث عن نوع ملف معين", "البحث داخل موقع معين فقط", "البحث عن كلمة في العنوان"], answer: "البحث داخل موقع معين فقط", explanation: "يُستخدم أمر البحث المتقدم 'site:' لتضييق نطاق البحث وحصره داخل موقع إلكتروني معين. مثال: site:jstor.org التاريخ الإسلامي." },
                    { type: 'fill', question: "للبحث عن عبارة محددة بنفس ترتيب الكلمات، نضع العبارة بين ______.", answer: "علامتي تنصيص", explanation: "عند وضع عبارة بين علامتي تنصيص \"...\"، يقوم محرك البحث بالبحث عن هذه الكلمات بنفس الترتيب تماماً، مما يعطي نتائج أكثر دقة." },
                    { type: 'mcq', question: "ما هي وظيفة المشغل المنطقي 'OR' في البحث؟", options: ["الجمع بين كلمتين معاً", "استبعاد كلمة من البحث", "البحث عن أحد المصطلحين أو كليهما"], answer: "البحث عن أحد المصطلحين أو كليهما", explanation: "المشغل المنطقي 'OR' (أو) يُستخدم للبحث عن أحد المصطلحين أو كليهما (إما هذا أو ذاك)، مما يوسع نطاق البحث. مثال: \"الإعلام الرقمي\" OR \"مواقع التواصل الاجتماعي\"." },
                    { type: 'fill', question: "للبحث عن ملفات من نوع PDF فقط، نستخدم أمر البحث ______.", answer: "filetype:pdf", explanation: "أمر البحث المتقدم 'filetype:' يسمح بتحديد نوع الملفات التي تبحث عنها، مثل filetype:pdf للبحث عن ملفات PDF فقط." }
                ]
            }
        }
    },
    'libraries_management': {
        name: "أساسيات علوم المكتبات والتوثيق",
        icon: '<i class="fas fa-book-open"></i>',
        semester: 2,
        modules: {
            'module1_lib': {
                name: "تنظيم وتسيير المؤسسات",
                icon: '<i class="fas fa-sitemap"></i>',
                questions: [
                    { type: 'mcq', question: "ما هو الهدف الرئيسي من 'تنظيم' المؤسسة الوثائقية؟", options: ["زيادة عدد الموظفين", "تقسيم الأنشطة لوحدات وتحديد المسؤوليات", "شراء المزيد من الكتب"], answer: "تقسيم الأنشطة لوحدات وتحديد المسؤوليات", explanation: "التنظيم هو تقسيم أنشطة المكتبة إلى وحدات متخصصة، مع تحديد المسؤوليات لكل وحدة، وذلك بهدف تسهيل التنسيق والإشراف وتحقيق الأهداف." },
                    { type: 'fill', question: "ظهرت المدرسة ______ كرد فعل على المدرسة الكلاسيكية وركزت على العلاقات الإنسانية.", answer: "السلوكية", explanation: "ظهرت المدرسة السلوكية كرد فعل على المدرسة الكلاسيكية التي كانت تركز على الجانب المادي فقط، بينما اهتمت المدرسة السلوكية بالعلاقات الإنسانية ودراسة سلوك الأفراد داخل بيئة العمل." },
                    { type: 'mcq', question: "من هو مؤسس مدرسة 'الإدارة العلمية' التي ركزت على تقسيم العمل والتخصص؟", options: ["هنري فايول", "ماكس ويبر", "فريديريك تايلور"], answer: "فريديريك تايلور", explanation: "أسس فريديريك تايلور مدرسة الإدارة العلمية، والتي ركزت على استخدام الأسلوب العلمي في الإدارة من خلال تقسيم العمل، التخصص، والبحث عن الطريقة المثلى للعمل." },
                    { type: 'fill', question: "المدرسة ______ ترى أنه لا توجد نظرية واحدة تصلح لكل زمان ومكان، بل يجب اختيار المنهج حسب ظروف المؤسسة.", answer: "الظرفية", explanation: "ترى المدرسة الظرفية أنه لا توجد نظرية إدارية واحدة مثالية، بل يجب اختيار المنهج الإداري المناسب حسب طبيعة المؤسسة، بيئتها، التحديات التكنولوجية، والمرحلة التي تمر بها." }
                ]
            },
            'module2_lib': {
                name: "السلسلة الوثائقية",
                icon: '<i class="fas fa-stream"></i>',
                questions: [
                    { type: 'mcq', question: "ما هي أول مرحلة في عملية التوثيق ضمن السلسلة الوثائقية؟", options: ["التخزين", "التزويد", "الاسترجاع"], answer: "التزويد", explanation: "أولى مراحل عملية التوثيق هي التزويد، والتي تعني اختيار واقتناء مصادر المعلومات المناسبة لاحتياجات المستفيدين." },
                    { type: 'fill', question: "وصف محتوى الوثيقة بمصطلحات دقيقة للتعبير عن موضوعها يسمى التحليل و ______.", answer: "التكشيف", explanation: "التحليل والتكشيف هما عمليتان تهدفان إلى تحديد موضوع الوثيقة والتعبير عنه بمصطلحات أو كلمات مفتاحية دقيقة لتسهيل استرجاعها لاحقاً." },
                    { type: 'mcq', question: "أي مما يلي يعتبر من أشكال التخزين الآلي للمعلومات؟", options: ["السجلات الورقية", "الميكروفيلم والأقراص", "الدفاتر"], answer: "الميكروفيلم والأقراص", explanation: "التخزين الآلي يعتمد على التكنولوجيا لحفظ المعلومات، ومن أشكاله الميكروفيلم، الأقراص المدمجة، وقواعد البيانات الإلكترونية، على عكس التخزين اليدوي الذي يعتمد على السجلات الورقية." }
                ]
            },
            'module3_lib': {
                name: "وظائف الإدارة",
                icon: '<i class="fas fa-user-tie"></i>',
                questions: [
                    { type: 'mcq', question: "أي قسم في المكتبة مسؤول عن اختيار الكتب، الفهرسة، التصنيف، والترميم؟", options: ["قسم الإدارة العامة", "قسم الخدمة المكتبية", "قسم الإجراءات الفنية"], answer: "قسم الإجراءات الفنية", explanation: "قسم الإجراءات الفنية هو المسؤول عن العمليات الداخلية التي تجهز المواد لتكون متاحة للقراء، وتشمل الاختيار، الفهرسة، التصنيف، الترميم، والتصوير." },
                    { type: 'fill', question: "الوظيفة الأساسية لـ ______ هي تجميع وفهرسة المواد وتنظيم الفعاليات وتثقيف المستفيدين.", answer: "أمين المكتبة", explanation: "أمين المكتبة هو المسؤول الرئيسي عن إدارة المكتبة، وتشمل مهامه جمع وفهرسة المواد، تنظيم الفعاليات الثقافية، تقديم الدعم للمستفيدين وتثقيفهم." },
                    { type: 'mcq', question: "ماذا يُقصد بوظيفة 'تنظيم الوسائط' في دور الوثائق (المحفوظات)؟", options: ["شراء وثائق جديدة", "تصنيف وتأمين المواد المحفوظة", "إعارة الوثائق للخارج"], answer: "تصنيف وتأمين المواد المحفوظة", explanation: "وظيفة تنظيم الوسائط في دور الوثائق (الأرشيف) تعني تصنيف المواد المحفوظة حسب خطة محددة وتأمينها في بيئة مناسبة للحفاظ عليها من التلف." }
                ]
            },
            'module4_lib': {
                name: "الإدارة الإلكترونية ووصف الوثائق",
                icon: '<i class="fas fa-laptop-code"></i>',
                questions: [
                    { type: 'mcq', question: "ما هو الهدف الرئيسي من التحول إلى الإدارة الإلكترونية في المؤسسات الوثائقية؟", options: ["زيادة استخدام الورق", "استخدام تكنولوجيا المعلومات لإنجاز العمليات آلياً", "تقليل عدد الموظفين"], answer: "استخدام تكنولوجيا المعلومات لإنجاز العمليات آلياً", explanation: "الإدارة الإلكترونية تعني استخدام تكنولوجيا المعلومات والاتصالات في إنجاز العمليات والخدمات الإدارية بشكل آلي ومنظم، بهدف تحسين الأداء وسرعة إيصال المعلومات." },
                    { type: 'mcq', question: "ماذا يمثل 'المستوى الثالث' في مستويات وصف الوثائق؟", options: ["الحد الأدنى من البيانات الأساسية", "بيانات أكثر تفصيلاً", "كافة البيانات المقررة حسب القواعد الرسمية"], answer: "كافة البيانات المقررة حسب القواعد الرسمية", explanation: "المستوى الثالث لوصف الوثائق هو المستوى الأكثر تفصيلاً، حيث يشمل كافة البيانات المقررة حسب القواعد الرسمية والمعايير المتبعة في عملية الوصف." },
                    { type: 'fill', question: "من فوائد الإدارة الإلكترونية ______ الحاجة إلى التخزين الورقي وحفظ البيانات من الكوارث.", answer: "تقليل", explanation: "من الفوائد المهمة للإدارة الإلكترونية أنها تقلل الحاجة إلى المساحات المخصصة للتخزين الورقي، كما تسهل عملية حفظ البيانات وحمايتها من الكوارث من خلال النسخ الاحتياطي الرقمي." },
                     { type: 'fill', question: "عملية تحليل محتوى الوثيقة لتحديد معلوماتها الرئيسية مثل المؤلف والموضوع تسمى ______ الوثائق.", answer: "وصف", explanation: "وصف الوثائق هو تحليل دقيق لمحتوى الوثيقة بهدف تحديد معلوماتها الرئيسية مثل الموضوع، المؤلف، تاريخ النشر، اللغة، والكلمات المفتاحية." }
                ]
            }
        }
    },
    'scientific_research_methodology': {
        name: "منهجية و تقنيات البحث العلمي في العلوم الانسانية",
        icon: '<i class="fas fa-flask"></i>',
        semester: 2,
        modules: {
            'module1_method': {
                name: "مناهج البحث (وصفي وتاريخي)",
                icon: '<i class="fas fa-chart-bar"></i>',
                questions: [
                    { type: 'mcq', question: "ما هو الهدف الرئيسي للمنهج الوصفي في البحث العلمي؟", options: ["إجراء تجارب عملية", "وصف الظواهر وتصويرها كمياً وكيفياً", "إعادة بناء الماضي"], answer: "وصف الظواهر وتصويرها كمياً وكيفياً", explanation: "المنهج الوصفي هو طريقة لوصف الظواهر المدروسة وتصويرها كمياً عن طريق جمع معلومات مقننة عن المشكلة وتصنيفها وتحليلها وإخضاعها للدراسة الدقيقة." },
                    { type: 'fill', question: "الدراسات التي تقوم على توضيح العلاقات بين متغيرات الدراسة وتحديد درجة الارتباط بينها تسمى الدراسات ______.", answer: "الارتباطية", explanation: "الدراسات الارتباطية هي نوع من الدراسات الوصفية، وتقوم على توضيح العلاقات بين متغيرات الدراسة بهدف تحديد درجة الارتباط بينها وعرضها بطريقة رقمية." },
                    { type: 'mcq', question: "ما هو الهدف الأساسي لمنهج البحث التاريخي؟", options: ["التنبؤ بالمستقبل فقط", "فهم الحاضر والتنبؤ بالمستقبل عبر دراسة الماضي", "وصف الظواهر الحالية"], answer: "فهم الحاضر والتنبؤ بالمستقبل عبر دراسة الماضي", explanation: "منهج البحث التاريخي هو إعادة الماضي عبر جمع الأدلة وتقويمها بهدف فهم الحاضر على ضوء الماضي والتنبؤ بالمستقبل." },
                    { type: 'mcq', question: "القرآن الكريم وتاريخ ابن خلدون يعتبران من أي نوع من مصادر البحث التاريخي؟", options: ["مصادر ثانوية", "مصادر أولية", "مصادر شفوية"], answer: "مصادر أولية", explanation: "المصادر الأولية في البحث التاريخي تتمثل في السجلات والوثائق والآثار الأصلية، ويُعتبر القرآن الكريم وتاريخ ابن خلدون والرحلات من الأمثلة على المصادر الأولية." },
                    { type: 'fill', question: "النقد ______ في المنهج التاريخي يرتبط بشكل الوثيقة وعنوانها والتأكد من ارتباطها بعصرها.", answer: "الخارجي", explanation: "النقد الخارجي هو إحدى خطوات تحليل مصادر البيانات في المنهج التاريخي، وهو يرتبط بشكل الوثيقة وعنوانها والتأكد من صحة نسبتها إلى عصرها ومؤلفها." },
                    { type: 'mcq', question: "أي نوع من الدراسات الوصفية يقوم بدراسة التغيرات التي تحدث في المتغيرات عبر الزمن؟", options: ["الدراسات المسحية", "الدراسات التطويرية", "دراسة الحالة"], answer: "الدراسات التطويرية", explanation: "الدراسات التطويرية تقوم على دراسة التغيرات التي تحدث في بعض المتغيرات من خلال قياس المتغير موضوع الدراسة على فترات زمنية مختلفة." }
                ]
            },
            'module2_method': {
                name: "مناهج البحث (تجريبي ومقارن)",
                icon: '<i class="fas fa-vials"></i>',
                questions: [
                    { type: 'mcq', question: "في المنهج التجريبي، ما هو المتغير الذي يريد الباحث قياس مدى تأثره؟", options: ["المتغير المستقل", "المتغير التابع", "المتغير الدخيل"], answer: "المتغير التابع", explanation: "المتغير التابع هو المتغير الناتج الذي يتأثر بالعامل المستقل. يقوم الباحث بضبط كل العوامل الأخرى لقياس تأثير المتغير المستقل على المتغير التابع." },
                    { type: 'fill', question: "يصف إيميل دوركايم المنهج المقارن بأنه نوع من ______ غير المباشر.", answer: "التجريب", explanation: "يصف إيميل دوركايم المنهج المقارن بأنه نوع من التجريب غير المباشر، لأنه يسمح بمقارنة الظواهر المتجانسة في أوضاع مختلفة للوصول إلى استنتاجات." },
                    { type: 'mcq', question: "ما هي أولى خطوات المنهج التجريبي؟", options: ["إجراء التجربة", "ملاحظة الظاهرة ووضع الفروض", "كتابة التقرير"], answer: "ملاحظة الظاهرة ووضع الفروض", explanation: "يبدأ المنهج التجريبي بملاحظة الظاهرة موضوع البحث، ثم تحديد المشكلة ووضع الفروض (الحلول المؤقتة) التي سيتم اختبارها عبر التجربة." },
                    { type: 'mcq', question: "ما هو الهدف الرئيسي للمنهج المقارن؟", options: ["دراسة حالة واحدة بعمق", "إجراء تجارب في المختبر", "دراسة أوجه الشبه والاختلاف بين الظواهر"], answer: "دراسة أوجه الشبه والاختلاف بين الظواهر", explanation: "المنهج المقارن هو الوسيلة العلمية التي تختص بدراسة أوجه الشبه والاختلاف بين الظواهر والمؤسسات في مجتمعات مختلفة أو في فترات زمنية مختلفة." },
                    { type: 'fill', question: "أحد أهم شروط التجريب الجيد هو ______ ودقة الفرضيات في ذهن الباحث.", answer: "وضوح", explanation: "للوصول إلى قانون علمي، يشترط في التجريب الجيد وضوح ودقة الفرضيات في ذهن الباحث، بالإضافة إلى التطبيق الدقيق للاختبارات والملاحظة الموضوعية." },
                    { type: 'mcq', question: "ما هو الشرط الأساسي لإجراء مقارنة صحيحة حسب إيميل دوركايم؟", options: ["مقارنة أي ظاهرتين", "مقارنة الظواهر المتجانسة فقط", "مقارنة الظواهر المتناقضة فقط"], answer: "مقارنة الظواهر المتجانسة فقط", explanation: "حسب إيميل دوركايم، يمكن فقط مقارنة الظواهر المتجانسة، عكس الظواهر الفيزيائية التي تسهل مقارنتها لقابليتها للتكرار في حالات متماثلة." }
                ]
            },
            'module3_method': {
                name: "مراحل البحث وعلم الآثار",
                icon: '<i class="fas fa-landmark"></i>',
                questions: [
                    { type: 'mcq', question: "قبل أن يختار الباحث موضوعه، أي سؤال يجب أن يطرحه على نفسه لضمان أصالة البحث؟", options: ["هل الموضوع سهل؟", "هل سبق لباحث آخر أن سجل للقيام بهذا البحث؟", "هل المصادر قليلة؟"], answer: "هل سبق لباحث آخر أن سجل للقيام بهذا البحث؟", explanation: "من أهم الأسئلة التي يجب أن يطرحها الباحث عند اختيار الموضوع هي: هل هو جديد؟ وهل سبق لباحث آخر أن سجله؟ وذلك لضمان أن البحث سيضيف جديداً للمعرفة." },
                    { type: 'mcq', question: "ما هو تعريف علم الآثار؟", options: ["علم دراسة النجوم", "العلم الذي يدرس الماضي من خلال المخلفات المادية", "علم دراسة اللغات القديمة"], answer: "العلم الذي يدرس الماضي من خلال المخلفات المادية", explanation: "علم الآثار هو العلم الذي يقوم بدراسة الماضي من خلال المخلفات المادية والثقافية (الحضارية) التي تركتها الشعوب القديمة." },
                    { type: 'fill', question: "الآثار التي تشمل الأدوات الحجرية أو الفخارية أو الحلي تسمى آثار ______.", answer: "منقولة", explanation: "الآثار المنقولة هي التي يمكن نقلها من مكانها، وتشمل الأدوات الحجرية، الفخارية، المعدنية، اللقى العضوية، الحلي، الأسلحة، والنقود." },
                    { type: 'mcq', question: "ما هي أولى مراحل العمل الأثري الميداني؟", options: ["التنقيب", "كتابة التقرير", "الإشكالية الأثرية (تحديد الهدف)"], answer: "الإشكالية الأثرية (تحديد الهدف)", explanation: "يبدأ العمل الأثري بتحديد الإشكالية الأثرية أو الهدف من البحث، ثم دراسة الوثائق، ثم الأسبار والمسح، وبعدها يأتي التنقيب." },
                    { type: 'mcq', question: "ماذا تسمى الآثار التي لا يمكن نقلها مثل البيوت والمعابد والمدافن؟", options: ["آثار فنية", "آثار غير منقولة", "آثار عضوية"], answer: "آثار غير منقولة", explanation: "الآثار غير المنقولة تشمل كل ما خلفه الإنسان من معالم وصروح وأبنية لا يمكن نقلها، مثل البيوت، المعابد، المدافن، والمسارح." },
                    { type: 'fill', question: "اكتشف عالم الآثار هوارد كارتر قبر الملك ______ سنة 1922.", answer: "توت عنخ آمون", explanation: "من الأمثلة على الاكتشافات الأثرية المهمة، اكتشاف عالم الآثار الإنجليزي 'هوارد كارتر' عام 1922 لقبر الملك المصري توت عنخ آمون المليء بالكنوز." }
                ]
            }
        }
    },
    'algerian_history_s1_complete': {
    name: "تاريخ الجزائر العام",
    icon: '<i class="fas fa-landmark"></i>',
    semester: 2, 
    modules: {

        'module1_alghist_s1': {
            name: "العهد العثماني - البايلربايات",
            icon: '<i class="fas fa-anchor"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "من هما الأخوان اللذان استنجد بهما سكان الجزائر لإنقاذهم من الاحتلال الإسباني؟",
                    options: ["علي وخليل باشا", "عروج وخير الدين برباروس", "سليم الأول وسليمان القانوني"],
                    answer: "عروج وخير الدين برباروس",
                    explanation: "استنجد سكان الجزائر بالأخوين عروج وخير الدين برباروس لخبرتهما البحرية وقوتهما في مواجهة الأساطيل الإسبانية."
                },
                {
                    type: 'mcq',
                    question: "في أي عام أعلن خير الدين برباروس تبعية الجزائر للسلطان العثماني سليم الأول؟",
                    options: ["1516م", "1518م", "1520م"],
                    answer: "1518م",
                    explanation: "بعد استشهاد أخيه عروج، قرر خير الدين إلحاق دولته الناشئة بالخلافة العثمانية عام 1518م لضمان الدعم والحماية."
                },
                {
                    type: 'fill',
                    question: "بعد تعيينه حاكماً على الجزائر من قبل السلطان العثماني، أصبح خير الدين يلقب بـ______.",
                    answer: "البايلرباي",
                    explanation: "لقب 'البايلرباي' يعني 'أمير الأمراء'، وهو أعلى رتبة كانت تمنح لحكام الولايات الكبرى في الدولة العثمانية."
                },
                {
                    type: 'mcq',
                    question: "من هو البايلرباي الذي يُنسب إليه الفضل في تحقيق الوحدة الإقليمية والسياسية للجزائر والقضاء على الدولة الزيانية؟",
                    options: ["خير الدين برباروس", "حسن باشا بن خير الدين", "صالح رايس"],
                    answer: "صالح رايس",
                    explanation: "يعتبر صالح رايس (حكم 1552-1556م) البطل في تحقيق وحدة الجزائر بحدودها الحالية تقريباً بعد قضائه على الإمارات المحلية."
                },
                {
                    type: 'mcq',
                    question: "في عهد البايلربايات، تم تقسيم الجزائر إدارياً إلى أربعة بايلكات. أي من التالية ليست من هذه البايلكات؟",
                    options: ["بايلك الشرق (قسنطينة)", "بايلك الغرب (مازونة)", "بايلك الصحراء (ورقلة)"],
                    answer: "بايلك الصحراء (ورقلة)",
                    explanation: "البايلكات الأربعة هي: بايلك الجزائر (دار السلطان)، بايلك الشرق (قسنطينة)، بايلك الغرب (مازونة ثم معسكر فوهران)، وبايلك التيطري (المدية)."
                },
                {
                    type: 'fill',
                    question: "حصلت فرنسا على امتيازات واسعة في أملاك الخلافة العثمانية عام ______ في عهد السلطان سليمان القانوني وفرانسوا الأول.",
                    answer: "1535",
                    explanation: "هذه الامتيازات التي منحت لفرنسا عام 1535م كانت بداية لتسرب النفوذ الفرنسي الذي أدى لاحقاً إلى الاحتلال."
                }
            ]
        },

        'module2_alghist_s1': {
            name: "عهد الباشوات والأغوات",
            icon: '<i class="fas fa-balance-scale-left"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هي الفترة الزمنية التي امتد فيها 'عهد الباشوات' في الجزائر؟",
                    options: ["1518-1587م", "1587-1659م", "1659-1671م"],
                    answer: "1587-1659م",
                    explanation: "بدأ عهد الباشوات عام 1587م كقرار من الباب العالي لتقليص نفوذ البايلربايات وجعل مدة الحكم ثلاث سنوات فقط."
                },
                {
                    type: 'fill',
                    question: "السبب الرئيسي لاستبدال نظام البايلربايات بنظام الباشوات كان الخوف من محاولة البايلربايات ______ بالجزائر عن الدولة العثمانية.",
                    answer: "الانفصال والاستقلال",
                    explanation: "خشيت الدولة العثمانية من النفوذ الكبير للبايلربايات وفترة حكمهم غير المحدودة، مما قد يؤدي إلى استقلالهم بالولاية."
                },
                {
                    type: 'mcq',
                    question: "ما هي السياسة التي اتبعها معظم الباشوات بسبب قصر مدة حكمهم؟",
                    options: ["الاهتمام بالعمران والعلوم", "جمع أكبر قدر من الأموال وشراء الولاءات", "توسيع الفتوحات البحرية"],
                    answer: "جمع أكبر قدر من الأموال وشراء الولاءات",
                    explanation: "أدى تحديد مدة الحكم بثلاث سنوات إلى انشغال الباشوات بجمع الثروة لأنفسهم بدلاً من الاهتمام بشؤون الرعية."
                },
                {
                    type: 'mcq',
                    question: "بعد فشل الحملة الإسبانية عام 1601م، قام الباشا خضر بتحطيم المركز التجاري الفرنسي في مدينة ______.",
                    options: ["عنابة", "جيجل", "القالة"],
                    answer: "القالة",
                    explanation: "رداً على التواطؤ الفرنسي مع إسبانيا، قام الباشا خضر بتدمير المركز الفرنسي في القالة وأسر رواده."
                },
                {
                    type: 'mcq',
                    question: "كم كانت مدة حكم 'الأغا' بعد القضاء على نظام الباشوات عام 1659م؟",
                    options: ["ثلاث سنوات", "سنة واحدة", "شهرين فقط"],
                    answer: "شهرين فقط",
                    explanation: "لضمان عدم استئثار أي شخص بالسلطة، تم تحديد مدة حكم الأغا بشهرين فقط، مما أدى إلى فوضى وعدم استقرار كبيرين."
                },
                {
                    type: 'fill',
                    question: "فشلت الحملة العسكرية التي شنها الملك الفرنسي لويس الرابع عشر على مدينة ______ عام 1664م.",
                    answer: "جيجل",
                    explanation: "شن لويس الرابع عشر حملة عسكرية كبيرة على جيجل واحتلها لثلاثة أشهر، لكنها فشلت في النهاية وانسحبت القوات الفرنسية بخسائر فادحة."
                }
            ]
        },

        'module3_alghist_s1': {
            name: "عهد الدايات",
            icon: '<i class="fas fa-crown"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هي الفترة الزمنية التي امتد فيها 'عهد الدايات' في الجزائر؟",
                    options: ["1659-1671م", "1671-1830م", "1587-1659م"],
                    answer: "1671-1830م",
                    explanation: "بدأ عهد الدايات عام 1671م بعد الفوضى التي شهدها عهد الأغوات، واستمر حتى الاحتلال الفرنسي عام 1830م."
                },
                {
                    type: 'mcq',
                    question: "ما هي الميزة الرئيسية لنظام حكم الدايات مقارنة بنظام الأغوات؟",
                    options: ["كان الداي يُنتخب من قبل الشعب", "كان الداي يحكم مدى الحياة", "كان الداي يتبع أوامر السلطان مباشرة"],
                    answer: "كان الداي يحكم مدى الحياة",
                    explanation: "تم إقرار نظام حكم الداي مدى الحياة لإعادة الاستقرار للدولة، لكن دون أن يكون له الحق في توريث الحكم."
                },
                {
                    type: 'fill',
                    question: "الداي ______ (حكم 1766-1791) هو الذي تم في عهده تحرير وهران والمرسى الكبير من الاحتلال الإسباني.",
                    answer: "محمد بن عثمان",
                    explanation: "شهد عهد الداي محمد بن عثمان هدوءاً نسبياً وازدهاراً، ومن أهم إنجازاته تحرير وهران والمرسى الكبير بشكل نهائي."
                },
                {
                    type: 'mcq',
                    question: "من هو الباي الذي قتل في قسنطينة عام 1792م نتيجة للاضطرابات الداخلية؟",
                    options: ["محمد الكبير", "حسن باي", "صالح باي"],
                    answer: "صالح باي",
                    explanation: "كثرت الثورات والتمردات في عهد الدايات، ومن أبرز أحداثها مقتل صالح باي، باي قسنطينة، عام 1792م."
                },
                {
                    type: 'fill',
                    question: "الطريقة الصوفية التي قادت ثورات كبرى ضد الحكم التركي في الغرب الجزائري بزعامة ابن الشريف عبد القادر هي الطريقة ______.",
                    answer: "الدرقاوية",
                    explanation: "أصبحت الطريقة الدرقاوية القوة الرئيسية المعادية للأتراك في الغرب الجزائري، وقامت بتجنيد الفلاحين والقبائل ضد سلطة البايلك."
                },
                {
                    type: 'mcq',
                    question: "ما هو الاسم الذي أُطلق على اليهوديين (بوخريص وبوشناق) اللذين سيطرا على التجارة الخارجية للجزائر وأثرا على علاقتها بفرنسا؟",
                    options: ["الكراغلة", "الأشراف", "الدخلاء"],
                    answer: "الدخلاء",
                    explanation: "نشأت طبقة من الدخلاء، غالبيتها من اليهود، لعبت دوراً كبيراً في تأزيم العلاقات مع فرنسا من خلال قضية الديون."
                }
            ]
        },

        'module4_alghist_s1': {
            name: "الاحتلال الفرنسي",
            icon: '<i class="fab fa-font-awesome-flag"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "من هو الملك الفرنسي الذي اتخذ قرار غزو الجزائر؟",
                    options: ["نابليون بونابرت", "لويس الرابع عشر", "شارل العاشر"],
                    answer: "شارل العاشر",
                    explanation: "كان الملك شارل العاشر يرغب في تحقيق نصر خارجي لامتصاص الغضب الداخلي وقال 'إنه لشيء جميل أن نتقدم إلى البرلمان ومفاتيح الجزائر بيدنا'."
                },
                {
                    type: 'fill',
                    question: "الضابط الفرنسي الذي وضع خطة غزو الجزائر براً في عهد نابليون عام 1808م هو الضابط ______.",
                    answer: "بوتان",
                    explanation: "وضع الضابط 'بوتان' خطة عسكرية مفصلة لاحتلال الجزائر عن طريق البر، وهي الخطة التي تم اعتمادها في حملة 1830م."
                },
                {
                    type: 'mcq',
                    question: "ما هو الدافع الديني الذي استخدمته فرنسا لتبرير حملتها على الجزائر؟",
                    options: ["نشر اللغة الفرنسية", "الانتقام لشرف فرنسا وتحويل الجزائريين للمسيحية", "مساعدة الدولة العثمانية"],
                    answer: "الانتقام لشرف فرنسا وتحويل الجزائريين للمسيحية",
                    explanation: "أعلن شارل العاشر أن الحملة تهدف للثأر لشرف فرنسا، وذكر وزير حربيته أن الهدف هو 'تمدين الجزائريين بجعلهم مسيحيين'."
                },
                {
                    type: 'mcq',
                    question: "في أي تاريخ نزلت القوات الفرنسية بشبه جزيرة سيدي فرج؟",
                    options: ["25 ماي 1830", "14 جوان 1830", "5 جويلية 1830"],
                    answer: "14 جوان 1830",
                    explanation: "انطلقت الحملة من ميناء طولون في 25 ماي، ووصلت ونزلت في سيدي فرج يوم 14 جوان 1830م."
                },
                {
                    type: 'fill',
                    question: "بعد توقيع معاهدة الاستسلام، غادر الداي حسين الجزائر وتوفي في مدينة ______ عام 1838م.",
                    answer: "الإسكندرية",
                    explanation: "غادر الداي حسين الجزائر في 10 جويلية 1830 متجهاً إلى نابولي ثم استقر في الإسكندرية حيث توفي."
                },
                {
                    type: 'mcq',
                    question: "ما هو القانون الذي صدر عام 1863م بهدف تفكيك الملكية الجماعية للأراضي وتحويلها إلى ملكية فردية؟",
                    options: ["قانون الأهالي", "قانون التجنيد الإجباري", "المرسوم المشيخي (سيناتوس كونسولت)"],
                    answer: "المرسوم المشيخي (سيناتوس كونسولت)",
                    explanation: "كان قانون 'سيناتوس كونسولت' يهدف إلى تفكيك بنية القبيلة وتسهيل استحواذ المعمرين على الأراضي."
                }
            ]
        },

        'module5_alghist_s1': {
            name: "المقاومات الشعبية",
            icon: '<i class="fas fa-fist-raised"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "كم سنة دامت مقاومة الأمير عبد القادر ضد الاحتلال الفرنسي؟",
                    options: ["7 سنوات", "10 سنوات", "15 سنة"],
                    answer: "15 سنة",
                    explanation: "دامت مقاومة الأمير عبد القادر 15 سنة، من 1832م إلى غاية استسلامه عام 1847م."
                },
                {
                    type: 'mcq',
                    question: "في أي معركة انتصر الأمير عبد القادر على الجنرال تريزيل عام 1833م؟",
                    options: ["معركة التافنة", "معركة المقطع", "معركة خنق النطاح"],
                    answer: "معركة المقطع",
                    explanation: "وقعت معركة المقطع في 28 جوان 1835 (النص ذكر 1833 بالخطأ)، وألحق فيها الأمير هزيمة كبيرة بالجنرال تريزيل."
                },
                {
                    type: 'fill',
                    question: "بعد سقوط قسنطينة عام 1837، قاد الحاج ______ المقاومة في الشرق الجزائري.",
                    answer: "أحمد باي",
                    explanation: "قاد أحمد باي مقاومة باسلة في الشرق الجزائري، ونجح في صد الحملة الفرنسية الأولى على قسنطينة عام 1836م."
                },
                {
                    type: 'mcq',
                    question: "من هو قائد مقاومة الزعاطشة (جنوب غرب بسكرة) الذي علقت فرنسا رأسه ورأس ابنه على أبواب بسكرة؟",
                    options: ["بوبغلة", "الشيخ بوزيان", "بوعمامة"],
                    answer: "الشيخ بوزيان",
                    explanation: "قاد الشيخ بوزيان مقاومة واحة الزعاطشة، وبعد قمع الثورة بوحشية عام 1849م، علقت فرنسا رأسه ورأس ابنه."
                },
                {
                    type: 'mcq',
                    question: "من هي المرأة التي قادت المقاومة في بلاد القبائل بعد استشهاد بوبغلة ولُقبت بـ'جان دارك الجزائر'؟",
                    options: ["لالا خديجة", "فاطمة نسومر", "رقية بنت الحاج"],
                    answer: "فاطمة نسومر",
                    explanation: "تعتبر لالا فاطمة نسومر من أبرز وجوه المقاومة الشعبية، حيث قادت معارك شرسة ضد الحاكم العام 'راندون'."
                },
                {
                    type: 'fill',
                    question: "قاد الشيخ المقراني وأخوه بومزراق، بمساعدة الشيخ ______ زعيم الطريقة الرحمانية، أخطر ثورة على الوجود الفرنسي عام 1871م.",
                    answer: "الحداد",
                    explanation: "تعتبر ثورة المقراني عام 1871م من أكبر وأخطر الثورات الشعبية، حيث امتدت لتشمل نصف البلاد تقريباً."
                },
                {
                    type: 'mcq',
                    question: "ما هي أطول ثورة شعبية في الجزائر، والتي قادها الشيخ بوعمامة في الجنوب الغربي من 1881 إلى 1904؟",
                    options: ["ثورة المقراني", "ثورة أولاد سيدي الشيخ", "ثورة بوعمامة"],
                    answer: "ثورة بوعمامة",
                    explanation: "تعتبر ثورة الشيخ بوعمامة أطول الثورات الشعبية زمنياً، حيث استمرت لأكثر من 20 عاماً."
                }
            ]
        }
    }
},
'research_methods_s2_detailed': {
    name: "منهجية وتقنيات البحث العلمي في العلوم الانسانية" ,
    icon: '<i class="fas fa-search"></i>',
    semester: 2, 
    modules: {

        'module1_res_tech_detailed': {
            name: "المنهج التجريبي",
            icon: '<i class="fas fa-vial"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هو الشرط الأساسي الذي يجب أن يتوفر في الفرضيات لضمان نجاح التجريب الجيد؟",
                    options: ["أن تكون غامضة", "الوضوح والدقة في ذهن الباحث", "أن تكون قابلة للتكذيب فقط"],
                    answer: "الوضوح والدقة في ذهن الباحث",
                    explanation: "للوصول إلى قانون علمي، يشترط في التجريب الجيد وضوح ودقة الفرضيات في ذهن الباحث، بالإضافة إلى التطبيق الدقيق للاختبارات."
                },
                {
                    type: 'fill',
                    question: "العامل الذي يريد الباحث قياس مدى تأثيره في التجربة يسمى المتغير ______.",
                    answer: "المستقل",
                    explanation: "المتغير المستقل (أو التجريبي) هو العامل الذي يتحكم فيه الباحث ليرى تأثيره على المتغير الآخر (التابع)."
                },
                {
                    type: 'mcq',
                    question: "ما هو المتغير الناتج الذي يتأثر بتأثير العامل المستقل في التجربة؟",
                    options: ["المتغير الضابط", "المتغير المستقل", "المتغير التابع"],
                    answer: "المتغير التابع",
                    explanation: "المتغير التابع هو النتيجة التي يتم قياسها في التجربة، وهو العامل الذي يتغير نتيجة لتأثير المتغير المستقل."
                },
                {
                    type: 'mcq',
                    question: "ما هي أول خطوة من خطوات المنهج التجريبي؟",
                    options: ["إجراء التجربة", "تسجيل النتائج", "تحديد مشكلة البحث بدقة"],
                    answer: "تحديد مشكلة البحث بدقة",
                    explanation: "يبدأ المنهج التجريبي دائماً بالتعرف على مشكلة البحث وتحديد معالمها، ثم صياغة الفرضيات، ثم تصميم التجربة."
                },
                {
                    type: 'fill',
                    question: "عندما يتعذر إجراء التجربة بشكل مباشر، يلجأ الباحث إلى التجربة ______ بالاعتماد على الإحصائيات والبيانات.",
                    answer: "البديلة",
                    explanation: "في حالة استحالة إجراء التجربة مباشرة، يمكن للباحث اللجوء إلى التجربة البديلة التي تعتمد على تحليل البيانات والإحصائيات المتاحة."
                }
            ]
        },

        'module2_res_tech_detailed': {
            name: "المنهج الوصفي",
            icon: '<i class="fas fa-chart-bar"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هو الهدف الرئيسي للمنهج الوصفي؟",
                    options: ["إثبات علاقة سببية", "دراسة الظواهر كما هي في الواقع وتحليلها", "إعادة بناء أحداث الماضي"],
                    answer: "دراسة الظواهر كما هي في الواقع وتحليلها",
                    explanation: "يهدف المنهج الوصفي إلى دراسة الظواهر كما هي في الواقع، من خلال جمع وتحليل البيانات كمياً أو كيفياً، بهدف فهم العلاقات والخصائص."
                },
                {
                    type: 'mcq',
                    question: "أي نوع من الدراسات الوصفية يهدف إلى جمع بيانات حول ظاهرة معينة مثل دراسات الرأي العام؟",
                    options: ["الدراسات الارتباطية", "الدراسات المسحية", "الدراسات التطويرية"],
                    answer: "الدراسات المسحية",
                    explanation: "تهدف الدراسات المسحية إلى جمع بيانات شاملة حول ظاهرة معينة في مجتمع معين، مثل دراسات الرأي العام أو المسح المدرسي."
                },
                {
                    type: 'fill',
                    question: "الدراسات التي تهدف إلى قياس درجة الترابط بين متغيرين تسمى الدراسات ______.",
                    answer: "الارتباطية",
                    explanation: "تقوم الدراسات الارتباطية على توضيح العلاقات بين متغيرات الدراسة، بهدف تحديد درجة الارتباط بينها وعرضها بطريقة رقمية."
                },
                {
                    type: 'mcq',
                    question: "الدراسات التي تتتبع التغيرات في الظواهر مع مرور الزمن هي:",
                    options: ["دراسة العلاقات", "الدراسات المسحية", "الدراسات التطويرية"],
                    answer: "الدراسات التطويرية",
                    explanation: "تهتم الدراسات التطويرية بدراسة التغيرات التي تحدث في المتغيرات من خلال قياسها على فترات زمنية مختلفة."
                },
                {
                    type: 'fill',
                    question: "من أهداف الدراسات الوصفية، تحديد ما يفعله الأفراد في مشكلة ما والاستفادة من آرائهم وخبراتهم في وضع تصورات وخطط ______.",
                    answer: "مستقبلية",
                    explanation: "تساعد الدراسات الوصفية على فهم الواقع الحالي، وبناءً عليه يمكن وضع خطط وتصورات مستقبلية مناسبة."
                }
            ]
        },

        'module3_res_tech_detailed': {
            name: "المنهج التاريخي",
            icon: '<i class="fas fa-history"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هو التعريف الأدق لمنهج البحث التاريخي؟",
                    options: ["وصف أحداث الماضي فقط", "إعادة الماضي بجمع الأدلة وتقويمها لفهم الحاضر والتنبؤ بالمستقبل", "جمع الوثائق القديمة وحفظها"],
                    answer: "إعادة الماضي بجمع الأدلة وتقويمها لفهم الحاضر والتنبؤ بالمستقبل",
                    explanation: "المنهج التاريخي لا يقتصر على سرد الماضي، بل يهدف إلى تحليله ونقده بشكل علمي لفهم الحاضر واستشراف المستقبل."
                },
                {
                    type: 'mcq',
                    question: "الوثائق الأصلية والسجلات والآثار تعتبر مصادر ______ في البحث التاريخي.",
                    options: ["أولية", "ثانوية", "شفوية"],
                    answer: "أولية",
                    explanation: "المصادر الأولية هي التي تم إنشاؤها في نفس الفترة الزمنية للحدث المدروس، وهي المصدر المباشر للمعلومة (شاهد عيان)."
                },
                {
                    type: 'fill',
                    question: "الصحف والمجلات والمذكرات والدراسات السابقة تعتبر مصادر ______ في البحث التاريخي.",
                    answer: "ثانوية",
                    explanation: "المصادر الثانوية هي التي تعتمد على المصادر الأولية وتقوم بتحليلها أو تفسيرها، وهي ليست شهادة مباشرة على الحدث."
                },
                {
                    type: 'mcq',
                    question: "في البحث التاريخي، النقد الذي يهتم بشكل الوصيفة وأصالتها وزمنها يسمى النقد ______.",
                    answer: "الخارجي",
                    explanation: "النقد الخارجي يهدف للتأكد من أصالة الوثيقة وصحتها المادية (هل هي مزورة؟ هل تعود للعصر المزعوم؟) قبل البدء في تحليل محتواها."
                },
                {
                    type: 'mcq',
                    question: "النقد الذي يهتم بمحتوى الوثيقة ودقة معلوماتها ومعرفة ظروف الكاتب ودوافعه يسمى النقد ______.",
                    options: ["الإيجابي", "السلبي", "الداخلي"],
                    answer: "الداخلي",
                    explanation: "بعد التأكد من أصالة الوثيقة، يأتي النقد الداخلي لتحليل دقة ومصداقية المحتوى نفسه، ويتضمن تحليلاً إيجابياً (فهم المعنى) وسلبياً (معرفة الدوافع)."
                },
                {
                    type: 'fill',
                    question: "آخر خطوة من خطوات تطبيق المنهج التاريخي هي عرض النتائج وكتابة ______ البحث.",
                    answer: "تقرير",
                    explanation: "تنتهي عملية البحث التاريخي بعرض النتائج التي تم التوصل إليها في تقرير علمي متماسك، بعيداً عن المبالغات والخيال."
                }
            ]
        },

        'module4_res_tech_detailed': {
            name: "المنهج المقارن وعلم الآثار",
            icon: '<i class="fas fa-balance-scale"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هو الهدف الرئيسي للمنهج المقارن؟",
                    options: ["دراسة ظاهرة واحدة بعمق", "تحليل أوجه الشبه والاختلاف بين الظواهر", "إجراء تجارب عملية"],
                    answer: "تحليل أوجه الشبه والاختلاف بين الظواهر",
                    explanation: "المنهج المقارن هو وسيلة علمية تستخدم لتحليل أوجه الشبه والاختلاف بين ظاهرتين أو أكثر، سواء في مجتمعات مختلفة أو فترات زمنية متباينة."
                },
                {
                    type: 'fill',
                    question: "أول خطوة في تطبيق المنهج المقارن هي تحديد الإشكالية و ______ الدراسة.",
                    answer: "تساؤلات",
                    explanation: "تبدأ أي دراسة مقارنة بتحديد موضوع المقارنة وصياغة تساؤلات وفرضيات بحثية واضحة."
                },
                {
                    type: 'mcq',
                    question: "أي من التالية يعتبر من أهمية المنهج المقارن؟",
                    options: ["إثبات صحة نظرية واحدة فقط", "يساعد في تجنب تكرار الأخطاء السابقة والاستفادة من التجارب الناجحة", "يستخدم في العلوم الطبيعية فقط"],
                    answer: "يساعد في تجنب تكرار الأخطاء السابقة والاستفادة من التجارب الناجحة",
                    explanation: "يمدنا المنهج المقارن بتجارب وخبرات تساعدنا على تقويم ثقافتنا الخاصة وتجنب الوقوع في أخطاء ارتكبها الآخرون."
                },
                {
                    type: 'mcq',
                    question: "ما هو العلم الذي يهتم بدراسة الماضي من خلال ما خلفته الشعوب من مخلفات مادية وثقافية؟",
                    options: ["الجيولوجيا", "علم الآثار", "الأنثروبولوجيا"],
                    answer: "علم الآثار",
                    explanation: "يركز علم الآثار على دراسة المخلفات المادية (أدوات، مباني، فخار...) التي تركتها الشعوب القديمة لفهم تطور الحضارات."
                },
                {
                    type: 'mcq',
                    question: "الأبنية والمعابد والمدافن تعتبر أمثلة على الآثار ______.",
                    options: ["غير المنقولة", "المنقولة", "الطقسية"],
                    answer: "غير المنقولة",
                    explanation: "الآثار غير المنقولة هي كل ما خلفه الإنسان من معالم وأبنية لا يمكن نقلها من مكانها الأصلي."
                },
                {
                    type: 'fill',
                    question: "كل أثر مادي يدل على وجود نشاط بشري سابق يسمى الدليل ______.",
                    answer: "الأثري",
                    explanation: "الدليل الأثري هو أي أثر مادي (بقايا كسر فخارية، جدران، أدوات...) يشير إلى وجود موقع أثري."
                }
            ]
        },

        'module5_res_tech_detailed': {
            name: "المشكلة العلمية واختيار الموضوع",
            icon: '<i class="fas fa-question-circle"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هو التعريف الأدق لمشكلة البحث؟",
                    options: ["سؤال لا يمكن الإجابة عليه", "تساؤل علمي يحتاج إلى إجابة أو موقف غامض يتطلب تفسيراً", "موضوع تمت دراسته من قبل"],
                    answer: "تساؤل علمي يحتاج إلى إجابة أو موقف غامض يتطلب تفسيراً",
                    explanation: "مشكلة البحث هي تساؤل علمي أو موقف غامض يدفع الباحث للتقصي بهدف إيجاد إجابة أو تفسير له."
                },
                {
                    type: 'mcq',
                    question: "أي من التالية يعتبر من أهم شروط اختيار مشكلة البحث؟",
                    options: ["أن تكون المشكلة معقدة جداً", "أن تكون المشكلة حديثة ولم تدرس من قبل", "أن تكون مصادرها نادرة"],
                    answer: "أن تكون المشكلة حديثة ولم تدرس من قبل",
                    explanation: "من أهم شروط اختيار المشكلة أن تكون جديدة (أصيلة) لتضمن أن البحث سيضيف جديداً للمعرفة العلمية."
                },
                {
                    type: 'fill',
                    question: "يجب أن تكون المشكلة قابلة للدراسة من حيث توفر الخبرة والقدرة ______ والإدارية لدى الباحث.",
                    answer: "المادية",
                    explanation: "يجب على الباحث أن يختار مشكلة تتناسب مع إمكانياته المادية وقدراته وخبرته لضمان قدرته على إنجاز البحث."
                },
                {
                    type: 'mcq',
                    question: "كيف يمكن صياغة مشكلة البحث؟",
                    options: ["على شكل جملة طويلة ومعقدة", "إما استفسارياً (سؤال رئيسي) أو خبرياً (أهداف)", "فقط على شكل أهداف"],
                    answer: "إما استفسارياً (سؤال رئيسي) أو خبرياً (أهداف)",
                    explanation: "يمكن صياغة المشكلة إما على شكل سؤال رئيسي تتفرع منه أسئلة فرعية، أو على شكل أهداف أو فروض دراسية محددة."
                },
                {
                    type: 'mcq',
                    question: "ما هو أول سؤال يجب أن يطرحه الباحث على نفسه عند اختيار موضوع؟",
                    options: ["هل الموضوع سهل؟", "هل الموضوع يثير اهتمام الباحث ورغبته؟", "هل سيوافق المشرف عليه؟"],
                    answer: "هل الموضوع يثير اهتمام الباحث ورغبته؟",
                    explanation: "يعتبر اهتمام الباحث وشغفه بالموضوع من أهم عوامل نجاح البحث، لأنه يضمن استمراريته وجديته في العمل."
                },
                {
                    type: 'fill',
                    question: "بعد التأكد من جدوى الموضوع وتوفر أدلته، يمكن للباحث التوجه إلى ______ لمناقشة الموضوع.",
                    answer: "الأستاذ المشرف",
                    explanation: "تعتبر مناقشة الموضوع مع الأستاذ المشرف الخطوة النهائية في عملية اختيار الموضوع، للحصول على التوجيه والموافقة."
                }
            ]
        }
    }
},
    'media_communication_intro': {
        name: "مدخل إلى وسائل الإعلام والاتصال",
        icon: '<i class="fas fa-broadcast-tower"></i>',
        semester: 2,
        modules: {
            'module1_media': {
                name: "تطور وسائل الاتصال",
                icon: '<i class="fas fa-history"></i>',
                questions: [
                    { type: 'mcq', question: "ما هي أقدم مراحل تطور الاتصال البشري؟", options: ["عصر الكتابة", "عصر الطباعة", "عصر الإشارات والعلامات"], answer: "عصر الإشارات والعلامات", explanation: "المرحلة الأولى هي عصر الإشارات والعلامات، حيث اعتمد الإنسان على عدد محدود من الأصوات ولغة الجسد للتواصل، وكانت الرسائل بسيطة وغير كافية للتطور الحضاري السريع." },
                    { type: 'fill', question: "ظهرت الكتابة ______ لأول مرة في بلاد ما بين النهرين، وكانت تعتمد على رسم صور صغيرة على ألواح طينية.", answer: "المسمارية", explanation: "نشأت الكتابة الرمزية التصويرية في بلاد ما بين النهرين قبل حوالي 4000 عام قبل الميلاد. طور السومريون الكتابة المسمارية، حيث كانوا يرسمون صورًا صغيرة على لوحة طرية من الطين للتعبير عن الأفكار." },
                    { type: 'mcq', question: "متى ظهرت الكتابة الألفبائية التي تعتمد على رموز الحروف للتعبير عن الأصوات؟", options: ["عام 65000 قبل الميلاد", "قبل 700 عام قبل الميلاد", "القرن التاسع عشر"], answer: "قبل 700 عام قبل الميلاد", explanation: "ظهرت الكتابة الألفبائية حوالي عام 700 قبل الميلاد، وتعتمد فكرتها على استخدام رموز الحروف للتعبير عن الأصوات الساكنة والمتحركة بدلاً من المقاطع الصوتية." },
                    { type: 'mcq', question: "ما هو العصر الذي شهد ثورة وسائل الاتصال الجماهيري واكتمل نموها في نصفه الأول من القرن العشرين؟", options: ["عصر الطباعة", "عصر الكتابة", "عصر الاتصال الجماهيري"], answer: "عصر الاتصال الجماهيري", explanation: "المرحلة الخامسة هي عصر الاتصال الجماهيري، حيث شهد القرن التاسع عشر ثورة في وسائل الاتصال اكتمل نموها في النصف الأول من القرن العشرين لمواكبة التطورات الضخمة في المجتمع." }
                ]
            },
            'module2_media': {
                name: "الصحافة الإلكترونية",
                icon: '<i class="fas fa-newspaper"></i>',
                questions: [
                    { type: 'mcq', question: "ما هو التعريف الأدق للصحافة الإلكترونية؟", options: ["منشور ورقي يتم توزيعه إلكترونياً", "منشور إلكتروني دوري يُقرأ عبر الحاسوب والإنترنت", "برنامج إذاعي على الإنترنت"], answer: "منشور إلكتروني دوري يُقرأ عبر الحاسوب والإنترنت", explanation: "الصحافة الإلكترونية هي منشور إلكتروني دوري يحتوي على الأحداث الجارية، ويتم قراءته من خلال جهاز الحاسوب، وغالباً ما يكون متاحاً عبر الإنترنت." },
                    { type: 'fill', question: "تعتبر صحيفة ______ السويدية أول صحيفة إلكترونية في العالم نُشرت بالكامل على الإنترنت عام 1990.", answer: "هيلزنبورج داجبلاد", explanation: "يُمكن القول إن صحيفة (هيلزنبورج داجبلاد) السويدية هي أول صحيفة إلكترونية في العالم تُنشر إلكترونيًا بالكامل على شبكة الإنترنت عام 1990." },
                    { type: 'mcq', question: "أي صحيفة أمريكية تُعد أول من نفذ مشروعاً إلكترونياً صحفياً ضخماً على الإنترنت؟", options: ["شيكاجو أونلاين", "بالو ألتو أونلاين", "واشنطن بوست"], answer: "واشنطن بوست", explanation: "تُعد صحيفة 'واشنطن بوست' الأمريكية أول صحيفة تنفذ مشروعاً إلكترونياً صحفياً ضخماً على الإنترنت، كلف تنفيذه عشرات الملايين من الدولارات، وكان بداية لجيل جديد من الصحف الإلكترونية." },
                    { type: 'mcq', question: "أي نوع من الصحافة الإلكترونية يعتبر مكملاً للنسخة الورقية؟", options: ["الصحافة الإلكترونية البحتة", "الصحافة النصف إلكترونية", "الصحافة المطابقة"], answer: "الصحافة النصف إلكترونية", explanation: "الصحافة النصف إلكترونية هي التي تكون مكملة للصحافة الورقية، حيث قد تنشر محتوى إضافياً أو مختلفاً عن النسخة المطبوعة." }
                ]
            },
            'module3_media': {
                name: "شبكات التواصل والإعلام الجديد",
                icon: '<i class="fas fa-share-alt"></i>',
                questions: [
                    { type: 'mcq', question: "ما المصطلح الإنجليزي الذي يطلق على مواقع التواصل الاجتماعي ويعني 'الترابط الشبكي الاجتماعي'؟", options: ["social media", "social network", "open source"], answer: "social network", explanation: "المصطلح الأدق لوصف مواقع التواصل الاجتماعي هو 'social network' أي الترابط الشبكي الاجتماعي، بينما 'social media' (وسائل الإعلام الاجتماعية) هو مصطلح أوسع." },
                    { type: 'fill', question: "ظهر موقع ______ عام 2002 ويعتبر الميلاد الفعلي للشبكات الاجتماعية كما نعرفها اليوم.", answer: "فريندستير", explanation: "ظهر موقع 'فريندستير (Friendster)' عام 2002، والذي حقق نجاحاً كبيراً دفع جوجل لمحاولة شرائه، ويعتبر الميلاد الفعلي للشبكات الاجتماعية الحديثة." },
                    { type: 'mcq', question: "ما هي الميزة الأساسية التي تميز 'الإعلام الجديد' عن الإعلام التقليدي؟", options: ["النشر الورقي", "التفاعلية", "البث الإذاعي"], answer: "التفاعلية", explanation: "الإعلام الجديد يعتمد على الكمبيوتر والاتصالات ويضيف خاصية 'التفاعل'، وهي قدرة الوسيلة على الاستجابة لحديث المستخدم كما يحدث في محادثة بين شخصين، وهي ميزة لا يوفرها الإعلام التقليدي." },
                    { type: 'fill', question: "مصطلح ______ يعني أن الرسالة الاتصالية في الإعلام الجديد يمكن أن تتوجه إلى فرد واحد أو جماعة معينة وليس جماهير ضخمة.", answer: "تفتيت الاتصال", explanation: "تفتيت الاتصال هي إحدى مميزات الإعلام الجديد، وتعني أن الرسالة يمكن أن تكون موجهة لفرد أو جماعة محددة، مما يعطي درجة تحكم أكبر في نظام الاتصال." }
                ]
            },
            'module4_media': {
                name: "صحافة المواطن",
                icon: '<i class="fas fa-users"></i>',
                questions: [
                    { type: 'mcq', question: "ما هو الاسم الآخر الذي يُعرف به 'صحافة المواطن'؟", options: ["الصحافة الحكومية", "الصحافة التشاركية", "الصحافة الاحترافية"], answer: "الصحافة التشاركية", explanation: "تُعرف صحافة المواطن بأسماء متنوعة منها: الصحافة التشاركية (participatory journalism)، الصحافة العامة، الديمقراطية، وصحافة الشارع." },
                    { type: 'fill', question: "المفهوم الأساسي لصحافة المواطن هو أن بإمكان أي شخص أن يكون ______ ينقل رأيه ومشاهداته للعالم.", answer: "صحفياً", explanation: "يشير مصطلح صحافة المواطن إلى أن بإمكان أي شخص أن يكون صحفياً ينقل رأيه ومشاهداته للعالم أجمع، دون الحاجة لشهادة في الإعلام أو الانتماء لمؤسسة إعلامية." },
                    { type: 'mcq', question: "على ماذا يعتمد مفهوم صحافة المواطن بشكل أساسي؟", options: ["الصحف الورقية فقط", "شبكة الإنترنت كفضاء للنشر", "محطات التلفزيون"], answer: "شبكة الإنترنت كفضاء للنشر", explanation: "يعتمد مفهوم صحافة المواطن بشكل أساسي على شبكة الإنترنت كفضاء للنشر والتعبير عن الرأي، وتأكيد حضور المواطن في قضايا الشأن العام." },
                    { type: 'mcq', question: "أي مما يلي يُعتبر من المصطلحات التي تصف صحافة المواطن؟", options: ["الإعلام مغلق المصدر", "الإعلام البديل", "الإعلام الرسمي"], answer: "الإعلام البديل", explanation: "تعتبر مخرجات صحافة المواطن امتداداً لمرجعيات الإعلام البديل والصحافة البديلة، وهي تختلف عن الإعلام الرسمي أو التقليدي." }
                ]
            }
        }
    },

    'info_society_intro': {
        name: "مدخل إلى مجتمع المعلومات",
        icon: '<i class="fas fa-network-wired"></i>',
        semester: 1,
        modules: {
            'module1_infosoc': {
                name: "مقدمة وماهية مجتمع المعلومات",
                icon: '<i class="fas fa-lightbulb"></i>',
                questions: [
                    {
                        type: 'mcq',
                        question: "ما هي أبرز سمتين تميزان المجتمع الجديد الذي نعيشه اليوم؟",
                        options: ["الوفرة المالية والقوة العسكرية", "التعاظم التقني والوفرة المعلوماتية", "الاستقرار السياسي والنمو السكاني"],
                        answer: "التعاظم التقني والوفرة المعلوماتية",
                        explanation: "يتميز العصر الحالي بالتقدم التكنولوجي الهائل والكم الضخم من المعلومات المتاحة، وهما السمتان الأساسيتان لمجتمع المعلومات."
                    },
                    {
                        type: 'fill',
                        question: "يعتبر مجتمع المعلومات أن تكنولوجيا المعلومات والاتصال هي موارد ______ أساسية للتقدم.",
                        answer: "أولية",
                        explanation: "في مجتمع المعلومات، تُعتبر المعلومات والمعرفة موارد أولية، تماماً مثلما كانت الأرض والمواد الخام موارد أولية في المجتمعات السابقة."
                    },
                    {
                        type: 'mcq',
                        question: "من هو العالم الذي استخدم مصطلح 'مجتمع الإعلام' لأول مرة عام 1948؟",
                        options: ["فريتز ماشلوب", "أرمان ماتلار", "نوربير فيينير"],
                        answer: "نوربير فيينير",
                        explanation: "كان نوربير فيينير من أوائل من استخدموا مصطلح 'مجتمع الإعلام' في عام 1948، مؤكداً على أهمية تداول المعلومات للديمقراطية."
                    },
                    {
                        type: 'fill',
                        question: "ظهر مصطلح مجتمع المعلومات في منظمة التعاون والتنمية الاقتصادية عام 1975 وارتبط بالأزمة ______ للدول الصناعية.",
                        answer: "الاقتصادية",
                        explanation: "ارتبط ظهور المفهوم بالأزمة الاقتصادية التي دفعت الدول الصناعية للبحث عن نماذج تنموية جديدة تعتمد على المعلومات كقوة اقتصادية."
                    },
                    {
                        type: 'mcq',
                        question: "في أي عام شكلت الأنشطة المعلوماتية حوالي 46% من إجمالي العمال في الولايات المتحدة حسب دراسة مارك بورات؟",
                        options: ["1948", "1975", "1967"],
                        answer: "1967",
                        explanation: "أظهرت دراسة مارك بورات التحول الكبير نحو اقتصاد المعلومات، حيث شكلت الأنشطة المعلوماتية نسبة ضخمة (46%) من العمالة في أمريكا بحلول عام 1967."
                    }
                ]
            },
            'module2_infosoc': {
                name: "تاريخ وأنماط المجتمعات",
                icon: '<i class="fas fa-history"></i>',
                questions: [
                    {
                        type: 'mcq',
                        question: "في أي بلد برز مفهوم مجتمع المعلومات بشكل مبكر بفضل جهود المفكر يونيجي ماسودا؟",
                        options: ["الولايات المتحدة", "فرنسا", "اليابان"],
                        answer: "اليابان",
                        explanation: "تعتبر اليابان من أوائل الدول التي تبنت مفهوم مجتمع المعلومات، مدفوعة بأفكار يونيجي ماسودا حول أهمية الاستثمار في المعرفة بعد الركود الاقتصادي."
                    },
                    {
                        type: 'fill',
                        question: "الاسم الذي أطلقه يونيجي ماسودا على نموذجه للمجتمع المعلوماتي هو JOHO SHAKAI، أما اسم مدينته الفاضلة فهو ______.",
                        answer: "COMPUTUBIA",
                        explanation: "JOHO SHAKAI تعني 'مجتمع المعلومات' باليابانية، و COMPUTUBIA هي المدينة الفاضلة القائمة على الحواسيب التي تصورها ماسودا."
                    },
                    {
                        type: 'mcq',
                        question: "متى عُقدت القمة العالمية لمجتمع المعلومات في تونس؟",
                        options: ["1998", "2003", "2005"],
                        answer: "2005",
                        explanation: "عُقدت القمة العالمية لمجتمع المعلومات على مرحلتين: الأولى في جنيف (2003)، والثانية في تونس (2005)، مما رسخ المصطلح عالمياً."
                    },
                    {
                        type: 'mcq',
                        question: "ما هو أقدم نمط مجتمعي في تاريخ البشرية، والذي اعتمد على القنص والصيد وجمع النباتات؟",
                        options: ["المجتمعات الزراعية", "مجتمع الصيد والجمع", "المجتمعات الصناعية"],
                        answer: "مجتمع الصيد والجمع",
                        explanation: "مجتمعات الصيد وجمع المحاصيل هي أقدم أشكال المجتمعات البشرية، وقد استمرت لمعظم تاريخ وجود الإنسان على الأرض."
                    },
                    {
                        type: 'fill',
                        question: "المجتمعات التي تميزت بظهور المدن واستخدام الكتابة وازدهار العلوم والفنون يطلق عليها مصطلح ______.",
                        answer: "الحضارات",
                        explanation: "يُطلق مصطلح 'الحضارات' على الثقافات القديمة المتقدمة التي شهدت تطوراً كبيراً في التنظيم الاجتماعي، المدن، الكتابة، العلوم، والفنون."
                    }
                ]
            },
            'module3_infosoc': {
                name: "منظرو التحول (ماكلوهان، توفلر، بيل)",
                icon: '<i class="fas fa-users"></i>',
                questions: [
                    {
                        type: 'mcq',
                        question: "من هو صاحب المقولة الشهيرة 'الوسيلة هي الرسالة'؟",
                        options: ["ألفن توفلر", "دانيل بيل", "مارشال ماكلوهان"],
                        answer: "مارشال ماكلوهان",
                        explanation: "تعتبر مقولة 'الوسيلة هي الرسالة' الفكرة المحورية في نظرية مارشال ماكلوهان، وتعني أن طبيعة الوسيلة نفسها تؤثر في المجتمع أكثر من محتواها."
                    },
                    {
                        type: 'fill',
                        question: "تعتبر التقنية امتداداً لـ______ البشرية، فالميكروفون هو امتداد للأذن والكاميرا امتداد للعين.",
                        answer: "الحواس",
                        explanation: "يرى ماكلوهان أن كل تقنية جديدة هي امتداد لإحدى حواس الإنسان أو قدراته، مما يغير طريقة إدراكه للعالم."
                    },
                    {
                        type: 'mcq',
                        question: "صاحب نظرية 'الموجة الثالثة' الذي قسم تاريخ البشرية إلى ثلاث موجات حضارية هو:",
                        options: ["دانيل بيل", "ألفن توفلر", "جاك لوزورن"],
                        answer: "ألفن توفلر",
                        explanation: "قسم الباحث المستقبلي ألفن توفلر التاريخ إلى ثلاث موجات: الموجة الزراعية، الموجة الصناعية، وموجة المعلومات (الموجة الثالثة)."
                    },
                    {
                        type: 'fill',
                        question: "يرى ______ أن المجتمع ما بعد الصناعي يتميز بالتحول من اقتصاد يعتمد على إنتاج السلع إلى اقتصاد يعتمد على تقديم الخدمات.",
                        answer: "دانيل بيل",
                        explanation: "يعتبر عالم الاجتماع الأمريكي دانيل بيل أبرز منظري 'المجتمع ما بعد الصناعي' الذي يعتمد على قطاع الخدمات والمعرفة النظرية."
                    },
                    {
                        type: 'mcq',
                        question: "ما هي الثورة التكنولوجية الثالثة التي مرت بها البشرية بعد ثورة البخار وثورة الكهرباء والكيمياء؟",
                        options: ["ثورة الطباعة", "ثورة الزراعة", "ثورة المعلومات والاتصال"],
                        answer: "ثورة المعلومات والاتصال",
                        explanation: "حدد دانيل بيل ثلاث ثورات تكنولوجية كبرى شكلت العالم الحديث: الأولى (البخار)، الثانية (الكيمياء والكهرباء)، والثالثة (المعلومات والاتصال)."
                    }
                ]
            },
            'module4_infosoc': {
                name: "خصائص المجتمع الجديد والإنترنت",
                icon: '<i class="fas fa-globe"></i>',
                questions: [
                    {
                        type: 'mcq',
                        question: "أي من التالية ليست من خصائص مجتمع المعلومات؟",
                        options: ["الانفجار المعلوماتي", "زيادة أهمية الأرض ورأس المال", "تنامي النشر الإلكتروني"],
                        answer: "زيادة أهمية الأرض ورأس المال",
                        explanation: "من خصائص مجتمع المعلومات أن المعلومات حلت محل الأرض ورأس المال كمورد اقتصادي أساسي، وبالتالي تضاءلت أهميتهما النسبية."
                    },
                    {
                        type: 'fill',
                        question: "أصول شبكة الإنترنت تعود لمشروع عسكري أمريكي أُطلق عام 1969 وكان يسمى ______.",
                        answer: "arpanet",
                        explanation: "شبكة أربانت (ARPANET) كانت شبكة اتصالات تابعة لوزارة الدفاع الأمريكية، وهي التي تطورت لتصبح شبكة الإنترنت العالمية."
                    },
                    {
                        type: 'mcq',
                        question: "ما اسم الهيئة البحثية الأمريكية التي كانت مسؤولة عن إنشاء مشروع أربانت؟",
                        options: ["NASA", "CIA", "DARPA"],
                        answer: "DARPA",
                        explanation: "وكالة مشاريع أبحاث الدفاع المتطورة (DARPA) كانت العقل المدبر وراء العديد من الابتكارات العسكرية والتكنولوجية، وأهمها شبكة أربانت."
                    },
                    {
                        type: 'fill',
                        question: "البروتوكول الرئيسي المستخدم لنقل البيانات عبر الإنترنت والذي يعتمد على تقسيمها إلى حزم هو ______.",
                        answer: "TCP/IP",
                        explanation: "بروتوكول TCP/IP هو مجموعة القواعد الأساسية التي تحكم الاتصال عبر الإنترنت، حيث يضمن وصول حزم البيانات بشكل صحيح."
                    },
                    {
                        type: 'mcq',
                        question: "ما هي السمة الجوهرية التي تميز 'الميديا الجديدة' عن الإعلام التقليدي؟",
                        options: ["السرعة في النشر", "التفاعلية", "الوصول العالمي"],
                        answer: "التفاعلية",
                        explanation: "التفاعلية (Interactivity) هي الميزة الأساسية التي تميز الإعلام الجديد، حيث تتيح للجمهور المشاركة والتفاعل مع المحتوى بدلاً من التلقي السلبي."
                    }
                ]
            },
            'module5_infosoc': {
                name: "الاقتصاد، الثقافة، والمراقبة",
                icon: '<i class="fas fa-eye"></i>',
                questions: [
                    {
                        type: 'mcq',
                        question: "في 'الاقتصاد الجديد'، ما هو المورد الأساسي الذي تتم إدارته وتداوله؟",
                        options: ["الآلات والمصانع", "المعرفة والمعلومات", "المواد الأولية"],
                        answer: "المعرفة والمعلومات",
                        explanation: "في الاقتصاد الجديد، انتقلت المجتمعات من اقتصاد مبني على استخراج المواد الأولية إلى اقتصاد يدار عبر تداول المعرفة والمعلومات."
                    },
                    {
                        type: 'fill',
                        question: "يطلق مصطلح 'المستهلِج' (Prosumer) على الشخص الذي يصبح منتجاً و ______ في نفس الوقت.",
                        answer: "مستهلكاً",
                        explanation: "المستهلِج هو مصطلح يدمج بين المنتج (Producer) والمستهلك (Consumer)، ويصف الدور الجديد للفرد في الاقتصاد التشاركي الحديث."
                    },
                    {
                        type: 'mcq',
                        question: "من هو عالم الاجتماع الذي وصف المراقبة في العصر الحديث بأنها 'مراقبة سائلة'؟",
                        options: ["أنطونيو غيدنز", "زيغمونت باومان", "دان بارني"],
                        answer: "زيغمونت باومان",
                        explanation: "استخدم زيغمونت باومان مصطلح 'المراقبة السائلة' لوصف أشكال الرقابة الحديثة التي تتسرب بمرونة في كل تفاصيل حياتنا اليومية."
                    },
                    {
                        type: 'fill',
                        question: "مفهوم السجن الذي يسمح بمراقبة جميع السجناء من برج مركزي دون أن يروه يسمى سجن ______.",
                        answer: "البانوبتيكون",
                        explanation: "البانوبتيكون (Panopticon) هو تصميم سجن أصبح رمزاً للمراقبة الشاملة وغير المرئية في المجتمعات الحديثة."
                    },
                    {
                        type: 'mcq',
                        question: "ما هو العدد التقريبي للعلاقات الاجتماعية المستقرة التي يمكن لعقل الإنسان إدارتها، والمعروف بـ 'رقم دنبار'؟",
                        options: ["5000", "500", "150"],
                        answer: "150",
                        explanation: "يشير 'رقم دنبار' إلى أن قدرتنا المعرفية تحد من عدد العلاقات الاجتماعية المستقرة التي يمكننا الحفاظ عليها بحوالي 150 شخصاً."
                    }
                ]
            }
        }
    },
    'ancient_civilizations_expanded': {
    name: "مدخل إلى تاريخ الحضارات القديمة",
    icon: '<i class="fas fa-university"></i>',
    semester: 1,
    modules: {

        'module1_anciv_final': {
            name: "جغرافيا وحضارات العالم القديم",
            icon: '<i class="fas fa-map-marked-alt"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هو الحدث التاريخي الذي يؤرخ به لنهاية العصور القديمة وبداية العصور الوسطى؟",
                    options: ["وفاة الإسكندر الأكبر", "سقوط الإمبراطورية الرومانية الغربية", "اختراع الكتابة المسمارية"],
                    answer: "سقوط الإمبراطورية الرومانية الغربية",
                    explanation: "يؤرخ المؤرخون نهاية العصور القديمة بسقوط الإمبراطورية الرومانية الغربية عام 476 ميلادي على يد القبائل الجرمانية."
                },
                {
                    type: 'fill',
                    question: "تُعرف المنطقة الممتدة من غرب إيران إلى مصر وشبه الجزيرة العربية، والتي شهدت قيام أقدم الحضارات، باسم الشرق الأدنى ______.",
                    answer: "القديم",
                    explanation: "الشرق الأدنى القديم هو مصطلح جغرافي-تاريخي يشير إلى مهد الحضارات الأولى في العالم."
                },
                {
                    type: 'mcq',
                    question: "الحضارة الفينيقية، التي اشتهرت بالتجارة البحرية واختراع الأبجدية، قامت بشكل أساسي في منطقة:",
                    options: ["الأناضول (تركيا الحالية)", "ساحل سوريا ولبنان الحاليتين", "اليمن والحبشة"],
                    answer: "ساحل سوريا ولبنان الحاليتين",
                    explanation: "قامت الحضارة الفينيقية على الساحل الشرقي للبحر المتوسط، في مناطق تشمل سوريا ولبنان الحاليتين."
                },
                {
                    type: 'mcq',
                    question: "أي من الحضارات التالية قامت في منطقة الأناضول (آسيا الصغرى) واشتهرت باستخدامها المبكر للحديد؟",
                    options: ["الحضارة السومرية", "الحضارة الحيثية", "الحضارة القرطاجية"],
                    answer: "الحضارة الحيثية",
                    explanation: "قامت مملكة الحيثيين القوية في منطقة الأناضول (تركيا الحالية) خلال العصر البرونزي، وكانوا من أوائل من استخدموا الحديد في صناعة الأسلحة."
                },
                {
                    type: 'fill',
                    question: "الحضارة التي قامت في جزيرة كريت وكانت من أوائل الحضارات الأوروبية المتقدمة تُعرف بالحضارة ______.",
                    answer: "المينوية",
                    explanation: "الحضارة المينوية، التي تمركزت في جزيرة كريت، تعتبر من أقدم الحضارات في أوروبا واشتهرت بقصورها الضخمة مثل قصر كنوسوس."
                },
                {
                    type: 'mcq',
                    question: "على ضفاف أي نهرين قامت حضارات بلاد ما بين النهرين (ميزوبوتاميا)؟",
                    options: ["النيل والأردن", "دجلة والفرات", "السند والغانج"],
                    answer: "دجلة والفرات",
                    explanation: "كلمة 'ميزوبوتاميا' هي كلمة إغريقية تعني الأرض الواقعة بين نهري دجلة والفرات."
                }
            ]
        },

        'module2_anciv_final': {
            name: "التنظيم الإداري في مصر القديمة",
            icon: '<i class="fas fa-gavel"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هو اللقب الرسمي الذي كان يُطلق على الوزير في مصر القديمة؟",
                    options: ["حاتي عا", "تجاني", "تياتي"],
                    answer: "تياتي",
                    explanation: "كان الوزير يحمل لقب 'تياتي'، وكان يترأس الإدارة الحكومية والقضائية ويعتبر الرجل الثاني في الدولة بعد الفرعون."
                },
                {
                    type: 'fill',
                    question: "أول وزير معروف بالاسم في تاريخ مصر القديمة هو ______، الذي كان أيضاً مهندساً بنى هرم سقارة المدرج للملك زوسر.",
                    answer: "إمحوتب",
                    explanation: "إمحوتب، وزير الملك زوسر في الأسرة الثالثة، لم يكن فقط وزيراً بل كان طبيباً ومهندساً معمارياً عظيماً، وتم تأليهه لاحقاً."
                },
                {
                    type: 'mcq',
                    question: "ما هو الاسم الذي كان يطلق على حكام الأقاليم الإدارية في مصر القديمة؟",
                    options: ["الكهنة", "الكتبة", "النومارك"],
                    answer: "النومارك",
                    explanation: "كانت مصر مقسمة إلى أقاليم تسمى 'نوم'، وكل إقليم كان يُحكم من قبل حاكم يُعرف باسم 'نومارك'."
                },
                {
                    type: 'fill',
                    question: "كانت الإدارة المركزية في مصر القديمة تضم مؤسسة 'بيت الحياة' التي كانت بمثابة مكتبة و ______ لنسخ النصوص الدينية والعلمية.",
                    answer: "مدرسة",
                    explanation: "'بيت الحياة' كان مؤسسة علمية ملحقة بالمعابد، يتولى فيها الكتبة نسخ البرديات وتعليم الأجيال الجديدة."
                },
                {
                    type: 'mcq',
                    question: "كم كان عدد أقاليم مصر العليا (الصعيد) التي استقر عددها منذ عصر الدولة القديمة؟",
                    options: ["20 إقليم", "22 إقليم", "42 إقليم"],
                    answer: "22 إقليم",
                    explanation: "بلغ عدد أقاليم مصر العليا 22 إقليماً، وظل هذا العدد ثابتاً لمعظم فترات التاريخ المصري القديم."
                },
                {
                    type: 'mcq',
                    question: "في عصر الدولة الحديثة، أصبح لمصر وزيران. أين كانت عاصمة كل منهما (وزير الجنوب ووزير الشمال على التوالي)؟",
                    options: ["منف وطيبة", "طيبة ومنف", "أبيدوس والإسكندرية"],
                    answer: "طيبة ومنف",
                    explanation: "في الدولة الحديثة، كان وزير الجنوب (مصر العليا) يقيم في العاصمة الدينية طيبة، ووزير الشمال (مصر السفلى) يقيم في العاصمة الإدارية القديمة منف."
                }
            ]
        },

        'module3_anciv_final': {
            name: "الحضارة الفارسية",
            icon: '<i class="fab fa-fort-awesome-alt"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "من هو مؤسس الإمبراطورية الفارسية الأخمينية وأول من لقب بـ 'ملك الملوك'؟",
                    options: ["دارا الأول", "قمبيز الثاني", "قورش العظيم"],
                    answer: "قورش العظيم",
                    explanation: "قورش العظيم (حكم 559-530 ق.م) هو الذي وحد الميديين والفرس وأسس الإمبراطورية الأخمينية."
                },
                {
                    type: 'fill',
                    question: "تُعرف أسطوانة ______ بأنها من أقدم وثائق حقوق الإنسان في العالم، حيث سجل فيها قورش سياسته المتسامحة مع الشعوب المحتلة.",
                    answer: "قورش",
                    explanation: "أسطوانة قورش هي وثيقة طينية تاريخية تسجل سياسة التسامح الديني والعرقي التي اتبعها بعد فتحه لبابل عام 539 ق.م."
                },
                {
                    type: 'mcq',
                    question: "من هو الملك الفارسي الذي نظم الإمبراطورية إدارياً، وقسمها إلى مقاطعات (مرزبانيات)، وأنشأ الطريق الملكي؟",
                    options: ["زركسيس الأول", "دارا الأول (داريوس)", "أردشير الأول"],
                    answer: "دارا الأول (داريوس)",
                    explanation: "يعتبر دارا الأول (حكم 522-486 ق.م) المنظم الحقيقي للإمبراطورية، حيث أنشأ نظام البريد، وحدد الضرائب، وسك عملة موحدة (الداريك)."
                },
                {
                    type: 'mcq',
                    question: "ما هي العاصمة الإدارية الرئيسية للإمبراطورية الفارسية الأخمينية التي بناها دارا الأول؟",
                    options: ["بابل", "سوسة", "برسيبوليس (تخت جمشيد)"],
                    answer: "برسيبوليس (تخت جمشيد)",
                    explanation: "كانت برسيبوليس (مدينة الفرس) العاصمة الاحتفالية والرمزية للإمبراطورية، بينما كانت سوسة وبابل عواصم إدارية هامة."
                },
                {
                    type: 'fill',
                    question: "الكتاب المقدس للديانة الزرادشتية، التي كانت الديانة الرسمية للفرس، يسمى ______.",
                    answer: "الأوفستا",
                    explanation: "الأوفستا هو مجموعة النصوص الدينية للديانة الزرادشتية، والتي تقوم على الصراع بين إله الخير 'أهورا مازدا' وإله الشر 'أهرمان'."
                },
                {
                    type: 'mcq',
                    question: "في أي معركة حاسمة هزم الإسكندر الأكبر الملك الفارسي دارا الثالث، مما أدى لسقوط الإمبراطورية الأخمينية؟",
                    options: ["معركة ماراثون", "معركة ترموبيل", "معركة غوغاميلا"],
                    answer: "معركة غوغاميلا",
                    explanation: "وقعت معركة غوغاميلا عام 331 ق.م، وأدت إلى نصر حاسم للإسكندر الأكبر وسقوط الإمبراطورية الفارسية الأخمينية."
                }
            ]
        },

        'module4_anciv_final': {
            name: "فجر التاريخ والاختراعات",
            icon: '<i class="fas fa-cogs"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هو المصطلح الذي يطلق على الفترة الانتقالية بين ما قبل التاريخ والعصور التاريخية، والتي شهدت بداية الزراعة؟",
                    options: ["العصر الحجري القديم", "العصر الحجري الحديث", "العصر البرونزي"],
                    answer: "العصر الحجري الحديث",
                    explanation: "يطلق على العصر الحجري الحديث أيضاً 'فجر التاريخ'، وهي الفترة التي شهدت الثورة الزراعية التي أدت إلى استقرار الإنسان."
                },
                {
                    type: 'fill',
                    question: "يعتبر اختراع ______ أهم إنجاز يفصل بين العصور التاريخية وما قبلها، وقد ظهر لأول مرة في سومر حوالي 3200 ق.م.",
                    answer: "الكتابة",
                    explanation: "يعد اختراع الكتابة (الكتابة المسمارية في سومر) الحد الفاصل الذي بدأت به العصور التاريخية وتدوين الأحداث."
                },
                {
                    type: 'mcq',
                    question: "في أي منطقة من العالم ظهرت الزراعة لأول مرة بشكل مستقل؟",
                    options: ["وادي النيل", "الهلال الخصيب", "وادي السند"],
                    answer: "الهلال الخصيب",
                    explanation: "يعتبر الهلال الخصيب (الذي يمتد من بلاد الرافدين إلى مصر) الموطن الأول للزراعة وتدجين الحيوانات."
                },
                {
                    type: 'fill',
                    question: "أداة 'الشادوف' التي استخدمت في السقي في مصر وبلاد الرافدين، هي مثال على تطور الآلات ______.",
                    answer: "الزراعية",
                    explanation: "الشادوف هو رافعة مياه بسيطة كانت من أوائل الآلات التي اخترعها الإنسان لتسهيل عملية الري ورفع المياه من النهر إلى الحقول."
                },
                {
                    type: 'mcq',
                    question: "ما هو أول معدن قام الإنسان بصهره واستخدامه بشكل واسع لصنع الأدوات والأسلحة؟",
                    options: ["الذهب", "الحديد", "النحاس"],
                    answer: "النحاس",
                    explanation: "بدأ الإنسان باستخدام النحاس أولاً (العصر النحاسي)، ثم تعلم خلطه مع القصدير لإنتاج البرونز (العصر البرونزي)."
                },
                {
                    type: 'mcq',
                    question: "ما هو الاختراع الذي أحدث ثورة في النقل والتجارة وصناعة الفخار حوالي 3500 ق.م؟",
                    options: ["المحراث", "العجلة", "المركب الشراعي"],
                    answer: "العجلة",
                    explanation: "يعتبر اختراع العجلة (حوالي 3500 ق.م في بلاد الرافدين) من أهم الاختراعات التي أثرت في كل جوانب الحضارة."
                }
            ]
        },

        'module5_anciv_final': {
            name: "حضارات مصر وبلاد الرافدين",
            icon: '<i class="fas fa-stream"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "من هو الملك الذي نجح في توحيد مصر العليا والسفلى حوالي عام 3100 ق.م، مؤسساً الأسرة الأولى؟",
                    options: ["زوسر", "خوفو", "نرمر (مينا)"],
                    answer: "نرمر (مينا)",
                    explanation: "يعتبر الملك نرمر (المعروف أيضاً باسم مينا) هو موحد القطرين ومؤسس الأسرة الحاكمة الأولى في تاريخ مصر الموحدة."
                },
                {
                    type: 'fill',
                    question: "يُعرف عصر الدولة القديمة في مصر بـ 'عصر بناة ______'، نسبة إلى الصروح الضخمة التي بنيت في تلك الفترة.",
                    answer: "الأهرام",
                    explanation: "شهد عصر الدولة القديمة (حوالي 2686-2181 ق.م) بناء أهرامات الجيزة العظيمة وغيرها من الأهرامات."
                },
                {
                    type: 'mcq',
                    question: "من هو الملك الذي أمر ببناء الهرم الأكبر في الجيزة؟",
                    options: ["سنفرو", "خفرع", "خوفو"],
                    answer: "خوفو",
                    explanation: "الملك خوفو، من الأسرة الرابعة، هو من أمر ببناء الهرم الأكبر الذي يبلغ ارتفاعه الأصلي حوالي 146 متراً."
                },
                {
                    type: 'fill',
                    question: "الشعب الذي غزا مصر في نهاية الدولة الوسطى وحكمها لفترة عُرفوا باسم ______، ومعنى اسمهم 'حكام البلاد الأجنبية'.",
                    answer: "الهكسوس",
                    explanation: "الهكسوس هم قبائل آسيوية غزت منطقة الدلتا في مصر وأنهت عصر الدولة الوسطى، وأدخلوا معهم تقنيات جديدة مثل العربات الحربية."
                },
                {
                    type: 'mcq',
                    question: "من هو أشهر مشرع في تاريخ بلاد بابل، والذي اشتهر بقوانينه المنقوشة على مسلة من حجر البازلت؟",
                    options: ["سرجون الأكدي", "أورنمو", "حمورابي"],
                    answer: "حمورابي",
                    explanation: "حمورابي، سادس ملوك بابل (حكم حوالي 1792-1750 ق.م)، اشتهر بشريعته التي تضم 282 مادة قانونية."
                },
                {
                    type: 'mcq',
                    question: "ما هو اسم أقدم ملحمة أدبية في تاريخ البشرية، والتي تعود إلى بلاد سومر وتحكي قصة ملك أوروك؟",
                    options: ["الإلياذة", "ملحمة جلجامش", "الأوديسة"],
                    answer: "ملحمة جلجامش",
                    explanation: "تعتبر ملحمة جلجامش أقدم عمل أدبي عظيم، وتحكي قصة سعي الملك جلجامش للخلود بعد وفاة صديقه إنكيدو."
                },
                {
                    type: 'fill',
                    question: "المعابد المدرجة التي كانت تبنى في مدن بلاد الرافدين للوصول إلى الآلهة كانت تسمى ______.",
                    answer: "الزقورات",
                    explanation: "الزقورة هي بناء هرمي مدرج كان يعتبر بيتاً للإله ومركزاً دينياً واقتصادياً للمدينة السومرية."
                  }
                ]
            }
        }
    },
  'media_communication_s1': {
    name: "مدخل إلى الإعلام والاتصال",
    icon: '<i class="fas fa-satellite-dish"></i>',
    semester: 1, 
    modules: {

        'module1_medcom': {
            name: "مفهوم الاتصال ونماذجه",
            icon: '<i class="fas fa-comments"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "من أي لفظ لاتيني اشتقت كلمة اتصال (Communication)؟",
                    options: ["Communis", "Connectus", "Contextus"],
                    answer: "Communis",
                    explanation: "كلمة اتصال مشتقة من اللفظ اللاتيني 'Communis' الذي يعني مشترك، أو 'Communicar' الذي يعني المشاركة وتأسيس جماعة."
                },
                {
                    type: 'mcq',
                    question: "من هو عالم الاجتماع الذي استخدم مفهوم الاتصال عام 1909 ليعني به الميكانيزم الذي تنمو من خلاله العلاقات الإنسانية؟",
                    options: ["هارولد لاسويل", "ويلبر شرام", "تشارلز كولي"],
                    answer: "تشارلز كولي",
                    explanation: "يعتبر تشارلز كولي من أوائل علماء الاجتماع الذين استخدموا مفهوم الاتصال بهذا المعنى الواسع والشامل."
                },
                {
                    type: 'fill',
                    question: "في نموذج 'رومان جاكوبسون'، العنصر الذي يمثل الوسيلة المستخدمة لنقل الرسالة (مثل التلفزيون) يسمى أداة ______.",
                    answer: "الاتصال",
                    explanation: "نموذج جاكوبسون يحدد ستة عناصر: المرسل، الرسالة، المتلقي، الرمز، أداة الاتصال، والسياق."
                },
                {
                    type: 'mcq',
                    question: "ما هي الأسئلة الخمسة الشهيرة التي يلخص بها هارولد لاسويل عملية الاتصال؟",
                    options: ["متى؟ أين؟ كيف؟ لماذا؟ مع من؟", "من؟ يقول ماذا؟ بأي قناة؟ لمن؟ وبأي تأثير؟", "هل؟ كيف؟ متى؟ أين؟ لماذا؟"],
                    answer: "من؟ يقول ماذا؟ بأي قناة؟ لمن؟ وبأي تأثير؟",
                    explanation: "نموذج لاسويل (1948) يعتبر من النماذج الكلاسيكية في دراسة الاتصال ويحلل العملية من خلال هذه الأسئلة الخمسة."
                },
                {
                    type: 'fill',
                    question: "العنصر السادس في عملية الاتصال الذي يمثل رد فعل المستقبل على الرسالة يسمى ______ الصدى.",
                    answer: "رجع",
                    explanation: "رجع الصدى (Feedback) هو عنصر أساسي في الاتصال الفعال، وهو ما يميز الاتصال عن الإعلام الذي قد يكون في اتجاه واحد."
                }
            ]
        },

        'module2_medcom': {
            name: "خصائص ووظائف وأنواع الاتصال",
            icon: '<i class="fas fa-project-diagram"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "أي نوع من الاتصال يتم بين الفرد ونفسه، ويكون مرسله الحواس ومستقبله الدماغ؟",
                    options: ["الاتصال الشخصي", "الاتصال الذاتي", "الاتصال التنظيمي"],
                    answer: "الاتصال الذاتي",
                    explanation: "الاتصال الذاتي (Intrapersonal Communication) هو الاتصال الذي يحدث داخل عقل الفرد ويشمل التفكير والتأمل."
                },
                {
                    type: 'mcq',
                    question: "الاتصال الذي يوجه عبر وسائل الإعلام إلى جمهور عام وواسع يسمى الاتصال ______.",
                    options: ["التنظيمي", "الجماهيري", "بين الثقافات"],
                    answer: "الجماهيري",
                    explanation: "يتميز الاتصال الجماهيري بأنه منظم، علني، ويستخدم وسائل تقنية للوصول إلى جمهور كبير وغير متجانس."
                },
                {
                    type: 'fill',
                    question: "في الاتصال التنظيمي الرسمي، الاتصال الذي ينتقل من المستويات الإدارية العليا إلى الدنيا يسمى اتصال ______.",
                    answer: "نازل",
                    explanation: "الاتصال الرسمي داخل المؤسسة يكون إما نازلاً (أوامر وتعليمات)، أو صاعداً (تقارير وشكاوى)، أو أفقياً (تنسيق بين الأقسام)."
                },
                {
                    type: 'mcq',
                    question: "أي من التالية لا يعتبر من أهداف الاتصال التي حددها لاسويل وشرام؟",
                    options: ["مراقبة البيئة", "نقل التراث الاجتماعي", "تحقيق الربح المادي"],
                    answer: "تحقيق الربح المادي",
                    explanation: "أهداف الاتصال في المجتمع تشمل مراقبة البيئة، إحداث الترابط، نقل التراث، التنمية، والتنشئة الاجتماعية."
                },
                {
                    type: 'mcq',
                    question: "ما هو الهدف من وظيفة 'الترابط' في عملية الاتصال؟",
                    options: ["توفير المعلومات لاتخاذ القرار", "إيجاد رأي عام مشترك بين أفراد المجتمع", "الترفيه والتسلية"],
                    answer: "إيجاد رأي عام مشترك بين أفراد المجتمع",
                    explanation: "يهدف الترابط إلى تفسير المعلومات وخلق رصيد مشترك من المعرفة لدعم التماسك الاجتماعي وتكوين الرأي العام."
                }
            ]
        },

        'module3_medcom': {
            name: "مفهوم الإعلام ووظائفه",
            icon: '<i class="fas fa-newspaper"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هو التعريف الاصطلاحي للإعلام؟",
                    options: ["تبادل الأفكار بين شخصين", "نشر الأخبار والحقائق والمعلومات الدقيقة لكافة أفراد المجتمع", "عملية إقناع لتغيير السلوك"],
                    answer: "نشر الأخبار والحقائق والمعلومات الدقيقة لكافة أفراد المجتمع",
                    explanation: "الإعلام هو عملية نشر معلومات دقيقة ترتكز على الصدق والصراحة بهدف الارتقاء بمستوى الرأي العام."
                },
                {
                    type: 'fill',
                    question: "يرى الباحث الألماني ______ أن الإعلام هو اتصال جماهيري وهو التعبير الموضوعي لعقلية الجماهير وروحها وميولها.",
                    answer: "أتجروت",
                    explanation: "يعرف أتجروت الإعلام بأنه اتصال جماهيري يعكس عقلية الجماهير واتجاهاتها."
                },
                {
                    type: 'mcq',
                    question: "ما هو العنصر الذي يوجد في عملية الاتصال ولا يوجد في العملية الإعلامية؟",
                    options: ["المرسل", "الرسالة", "رجع الصدى"],
                    answer: "رجع الصدى",
                    explanation: "الفرق الأساسي هو أن الاتصال عملية تفاعلية ثنائية الاتجاه (بوجود رجع الصدى)، بينما الإعلام قد يكون أحادي الاتجاه (من مرسل لجمهور)."
                },
                {
                    type: 'mcq',
                    question: "حسب الباحث 'لازارسفيلد'، أي من التالية ليست من الوظائف الأساسية للإعلام؟",
                    options: ["فرض معايير اجتماعية", "نشر الترفيه والتعليم", "التشاور"],
                    answer: "نشر الترفيه والتعليم",
                    explanation: "الوظائف الثلاث التي قدمها لازارسفيلد هي: فرض معايير اجتماعية، التشاور، وتخفيف الإحساس بالاختلاف الوظيفي. (نشر الترفيه من وظائف ماكلوهان)."
                },
                {
                    type: 'fill',
                    question: "الوظيفة التي تتمثل في تفسير معاني الأحداث والمعلومات بهدف توفير رصيد مشترك من المعرفة لدعم التماسك الاجتماعي تسمى الوظيفة ______.",
                    answer: "الارتباطية",
                    explanation: "الوظيفة الارتباطية للإعلام تهدف إلى ربط أجزاء المجتمع المختلفة من خلال تفسير الأحداث وخلق فهم مشترك."
                }
            ]
        },

        'module4_medcom': {
            name: "الإشهار والدعاية",
            icon: '<i class="fas fa-bullhorn"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هو التعريف الأدق للإشهار؟",
                    options: ["نشر معلومات بهدف التأثير في الرأي العام", "وسيلة غير شخصية لتقديم الأفكار والمنتجات والخدمات وترويجها", "نشر أخبار كاذبة لإضعاف الروح المعنوية"],
                    answer: "وسيلة غير شخصية لتقديم الأفكار والمنتجات والخدمات وترويجها",
                    explanation: "الإشهار هو عملية اتصالية غير شخصية مدفوعة الأجر تهدف إلى الترويج لسلعة أو خدمة أو فكرة."
                },
                {
                    type: 'fill',
                    question: "من أهداف الإشهار التجارية، خلق ______ لسلعة أو خدمة وتشجيع الوفاء لها.",
                    answer: "التفضيل",
                    explanation: "يسعى الإشهار إلى بناء علاقة إيجابية بين المستهلك والعلامة التجارية من خلال خلق التفضيل وتشجيع الوفاء."
                },
                {
                    type: 'mcq',
                    question: "ما هو تعريف الدعاية؟",
                    options: ["عملية اتصالية من بائع لمستهلك", "محاولة منظمة للتأثير في الرأي العام وتغيير اتجاهات الأفراد", "تقديم السلع والخدمات"],
                    answer: "محاولة منظمة للتأثير في الرأي العام وتغيير اتجاهات الأفراد",
                    explanation: "الدعاية هي محاولة منظمة لنشر معلومات (قد تكون حقائق أو أكاذيب) بهدف التأثير في الرأي العام وتوجيهه."
                },
                {
                    type: 'mcq',
                    question: "الدعاية التي تكون مكشوفة وعلنية وتستخدم الصحف والإذاعة تسمى الدعاية ______.",
                    options: ["السوداء", "البيضاء", "الرمادية"],
                    answer: "البيضاء",
                    explanation: "الدعاية البيضاء تكون واضحة المصدر والهدف، وتعتمد على النشاط العلني."
                },
                {
                    type: 'fill',
                    question: "الدعاية التي لا تكشف عن مصادرها الحقيقية وتنمو بطريقة سرية، وتقوم على نشاط المخابرات، تسمى الدعاية ______.",
                    answer: "السوداء",
                    explanation: "تعتمد الدعاية السوداء على التضليل والخداع، حيث تخفي مصدرها الحقيقي وتنسب معلوماتها إلى مصادر وهمية."
                }
            ]
        },

        'module5_medcom': {
            name: "الإشاعة والرأي العام",
            icon: '<i class="fas fa-user-secret"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هو تعريف الإشاعة حسب 'أولبورت'؟",
                    options: ["محاولة التأثير في شخصية الأفراد", "قضية مقدمة للتصديق تتناقل من شخص لآخر دون معايير أكيدة للصدق", "تعبير جمع كبير من الأفراد عن آرائهم"],
                    answer: "قضية مقدمة للتصديق تتناقل من شخص لآخر دون معايير أكيدة للصدق",
                    explanation: "يعرفها أولبورت في كتابه 'سيكولوجيا الإشاعة' بأنها قضية تتناقل بين الناس دون وجود دليل على صدقها."
                },
                {
                    type: 'mcq',
                    question: "ما هما الشرطان الأساسيان لانتشار الإشاعة؟",
                    options: ["الأهمية والوضوح", "الأهمية والغموض", "الغموض والسرية"],
                    answer: "الأهمية والغموض",
                    explanation: "تنتشر الإشاعة عندما يكون موضوعها مهماً للناس، وفي نفس الوقت تكون المعلومات الحقيقية حوله غامضة أو غير متوفرة."
                },
                {
                    type: 'fill',
                    question: "الشائعة التي تنشر ببطء وبسرية تسمى الشائعة ______.",
                    answer: "الزاحفة",
                    explanation: "تعتمد الشائعة الزاحفة على الانتقال الهادئ والبطيء حتى تتغلغل في المجتمع دون إثارة الانتباه."
                },
                {
                    type: 'mcq',
                    question: "أي نوع من الشائعات تنشر في ظروف معينة ثم تختفي لتعاود الظهور في ظروف مماثلة؟",
                    options: ["الشائعة الزاحفة", "الشائعة الغاطسة", "الشائعة الإندفاعية"],
                    answer: "الشائعة الغاطسة",
                    explanation: "تتميز الشائعة الغاطسة بأنها 'تغطس' أو تختفي عندما تهدأ الظروف، ثم تعود للظهور مرة أخرى عند توفر مناخ مشابه."
                },
                {
                    type: 'mcq',
                    question: "ما هو أفضل سلاح لمقاومة الإشاعة؟",
                    options: ["فرض الرقابة على الأخبار", "تكذيب كل الإشاعات", "توفير المعلومات الصحيحة والصادقة والشفافية"],
                    answer: "توفير المعلومات الصحيحة والصادقة والشفافية",
                    explanation: "أفضل طريقة لمقاومة الإشاعة هي القضاء على شرطها الثاني (الغموض) من خلال توفير معلومات صحيحة وشفافة للناس."
                }
            ]
        },

        'module6_medcom': {
            name: "الأنظمة الإعلامية",
            icon: '<i class="fas fa-landmark"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هي أقدم نظرية إعلامية، والتي تنطلق من فلسفة الحكم المطلق للملك أو الحكومة؟",
                    options: ["النظرية الليبرالية", "نظرية المسؤولية الاجتماعية", "النظرية السلطوية"],
                    answer: "النظرية السلطوية",
                    explanation: "تعتبر النظرية السلطوية أسبق النظريات تاريخياً، وقد سادت في أوروبا في القرنين السادس عشر والسابع عشر."
                },
                {
                    type: 'fill',
                    question: "في ظل النظرية السلطوية، يتم التحكم في وسائل الإعلام من خلال نظام ______ والرقابة لمنع نقد السلطة الحاكمة.",
                    answer: "التراخيص",
                    explanation: "تعتمد النظرية السلطوية على مبدأ أن الحكومة تمنح تراخيص وسائل الإعلام لمن يواليها، وتفرض رقابة لمنع أي نقد."
                },
                {
                    type: 'mcq',
                    question: "من هو المنظر الإنجليزي الذي دعا في أواخر القرن 17 إلى حرية الطباعة دون ترخيص ورقابة، ويعتبر من رواد النظرية الليبرالية؟",
                    options: ["جون لوك", "جون ميلتون", "جون ستيوارت مل"],
                    answer: "جون ميلتون",
                    explanation: "اشتهر جون ميلتون بمقالته النقدية التي دافع فيها بحماس عن حرية الطباعة والنشر كمبدأ أساسي."
                },
                {
                    type: 'mcq',
                    question: "في أي دولة ظهرت نظرية الحرية (الليبرالية) وتطورت في أواخر القرن 17 وأوائل القرن 18؟",
                    options: ["فرنسا وألمانيا", "إسبانيا وإيطاليا", "بريطانيا والولايات المتحدة الأمريكية"],
                    answer: "بريطانيا والولايات المتحدة الأمريكية",
                    explanation: "تطورت النظرية الليبرالية في بريطانيا والولايات المتحدة الأمريكية كرد فعل على النظرية السلطوية."
                },
                {
                    type: 'fill',
                    question: "التعديل ______ للدستور الأمريكي يحمي حرية التعبير والنشر والدين والاجتماع.",
                    answer: "الأول",
                    explanation: "يعتبر التعديل الأول للدستور الأمريكي حجر الزاوية في حماية الحريات الأساسية، ومن ضمنها حرية الصحافة."
                },
                {
                    type: 'mcq',
                    question: "في ظل النظرية الليبرالية، من هي السلطة التي تختص بمعالجة أي خطأ أو تجاوز تقع فيه الصحيفة؟",
                    options: ["السلطة التنفيذية (الحكومة)", "السلطة التشريعية (البرلمان)", "السلطة القضائية (المحاكم)"],
                    answer: "السلطة القضائية (المحاكم)",
                    explanation: "من مبادئ النظرية الليبرالية أن أي نزاع أو تجاوز من قبل الصحافة يجب أن يتم حله عبر القضاء، وليس من خلال رقابة الحكومة."
                }
            ]
        }
    }
},
    'algerian_history_s2_complete': {
    name: "تاريخ الجزائر العام",
    icon: '<i class="fas fa-landmark"></i>',
    semester: 1,
    modules: {

        'module1_alghist_complete': {
            name: "التواجد القرطاجي",
            icon: '<i class="fas fa-ship"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "من هي الأميرة الفينيقية التي تنسب إليها أسطورة تأسيس قرطاج؟",
                    options: ["ديدون", "عليسة", "كليوباترا"],
                    answer: "عليسة",
                    explanation: "عليسة (المعروفة أيضاً باسم ديدون) هي ابنة ملك صور وأخت بيغماليون، وتنسب إليها أسطورة تأسيس قرطاج."
                },
                {
                    type: 'fill',
                    question: "حسب الأسطورة، قامت عليسة بقص جلد ثور إلى أشرطة دقيقة أحاطت بها هضبة تعرف اليوم باسم هضبة ______.",
                    answer: "بيرصا",
                    explanation: "تعرف الهضبة باسم 'بيرصا'، والتي تعني 'جلد الثور' بلغة السكان الأصليين، وهي نقطة انطلاق بناء مدينة قرطاج."
                },
                {
                    type: 'mcq',
                    question: "في أي معركة بحرية وقف المغاربة إلى جانب القرطاجيين ضد الإغريق سنة 535 ق.م؟",
                    options: ["معركة هميرا", "معركة ألاليا", "معركة زاما"],
                    answer: "معركة ألاليا",
                    explanation: "أخلص المغاربة في بداية تعاملهم مع القرطاجيين ووقفوا بجانبهم في معركة ألاليا بكورسيكا سنة 535 ق.م."
                },
                {
                    type: 'mcq',
                    question: "ما هي المعركة التي كانت سبباً في تغيير قرطاجة لسياستها الإفريقية في القرن الخامس ق.م؟",
                    options: ["معركة ألاليا", "معركة هميرا", "الحرب البونيقية الأولى"],
                    answer: "معركة هميرا",
                    explanation: "هزيمة قرطاجة أمام الإغريق في معركة هميرا سنة 480 ق.م جعلتها تعيد النظر في سياستها وتتجه أكثر نحو استغلال الأراضي الإفريقية."
                },
                {
                    type: 'fill',
                    question: "أرسلت قرطاجة رحلة ______ الاستكشافية إلى جنوب غرب إفريقيا بحثاً عن مناطق جديدة على المحيط الأطلسي.",
                    answer: "حنون",
                    explanation: "تعتبر رحلة حنون الاستكشافية في نهاية القرن الخامس ق.م جزءاً من سياسة الاتجاه الإفريقي الجديدة لقرطاجة."
                }
            ]
        },
        
        'module2_alghist_complete': {
            name: "الاحتلال الروماني",
            icon: '<i class="fas fa-shield-alt"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "في أي عام تم القضاء على قرطاجة وإطلاق اسم 'مملكة الرومان بإفريقيا' على أراضيها؟",
                    options: ["201 ق.م", "146 ق.م", "46 ق.م"],
                    answer: "146 ق.م",
                    explanation: "انتهت الحرب البونيقية الثالثة سنة 146 ق.م بالقضاء على قرطاجة وتأسيس أول ولاية رومانية في إفريقيا."
                },
                {
                    type: 'fill',
                    question: "بعد واقعة 'الطابوس' عام 46 ق.م، أطلق الرومان على شرق نوميديا اسم 'نوميديا ______'.",
                    answer: "الجديدة",
                    explanation: "بعد هزيمة اليوبيين في واقعة طابوس (Thapsus)، استولى الرومان على شرق نوميديا وأطلقوا عليها اسم 'نوميديا الجديدة'."
                },
                {
                    type: 'mcq',
                    question: "في أي عام تم إلحاق موريطانيا بروما نهائياً؟",
                    options: ["46 ق.م", "42 م", "146 ق.م"],
                    answer: "42 م",
                    explanation: "في سنة 42 ميلادي، قام الإمبراطور كلوديوس بإلحاق مملكة موريطانيا بروما بشكل نهائي وقسمها إلى موريطانيا القيصرية والطنجية."
                },
                {
                    type: 'fill',
                    question: "أنشأ الرومان في شمال إفريقيا حصوناً عسكرية واقتصادية متقدمة تعرف باسم ______.",
                    answer: "الليمس",
                    explanation: "كان 'الليمس' عبارة عن خط دفاعي من الحصون والمعسكرات كان دوره عسكرياً لمواجهة القبائل، واقتصادياً لمراقبة التجارة."
                },
                {
                    type: 'mcq',
                    question: "من هو القائد النوميدي الذي خاض معارك طاحنة ضد الرومان ونجح في توحيد نوميديا قبل أن يتم القبض عليه بالخيانة؟",
                    options: ["ماسينيسا", "يوبا الأول", "يوغرطة"],
                    answer: "يوغرطة",
                    explanation: "قاد يوغرطة مقاومة شرسة ضد التوسع الروماني، ولكنه تعرض للخيانة من قبل صهره بوكوس الأول ملك موريطانيا الذي سلمه للرومان سنة 106 ق.م."
                }
            ]
        },

        'module3_alghist_complete': {
            name: "الاحتلال الوندالي",
            icon: '<i class="fas fa-skull-crossbones"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "إلى أي من الشعوب الجرمانية ترجع أصول الوندال؟",
                    options: ["الفرنجة", "الغوط", "الساكسون"],
                    answer: "الغوط",
                    explanation: "ترجع أصول الوندال إلى شعوب الغوط الذين أقاموا على شاطئ بحر البلطيق ثم انتشروا في جرمانيا."
                },
                {
                    type: 'fill',
                    question: "القائد الروماني الذي كان والياً على إفريقيا وتمرد على السلطة المركزية واستنجد بالوندال هو ______.",
                    answer: "بونيفاس",
                    explanation: "بسبب الصراع على السلطة مع منافسه أيتيوس، تمرد القائد بونيفاس على السلطة المركزية واستنجد بالوندال لمساعدته."
                },
                {
                    type: 'mcq',
                    question: "من هو ملك الوندال الذي قاد الحملة على شمال إفريقيا عام 429 م؟",
                    options: ["ألاريك", "جوندريك", "جنسريق"],
                    answer: "جنسريق",
                    explanation: "الملك جنسريق كان قائداً عظيماً استغل فرصة الصراع الداخلي في روما ليعبر بجيشه إلى شمال إفريقيا ويؤسس مملكة وندالية."
                },
                {
                    type: 'mcq',
                    question: "من هو القديس الشهير الذي مات أثناء حصار الوندال لمدينة عنابة (هيبون) عام 430 م؟",
                    options: ["القديس بطرس", "القديس أوغسطين", "القديس بولس"],
                    answer: "القديس أوغسطين",
                    explanation: "القديس أوغسطين، أحد أهم آباء الكنيسة، كان أسقفاً لمدينة هيبون (عنابة) ومات أثناء حصارها من قبل الوندال."
                },
                {
                    type: 'fill',
                    question: "كان الوندال متمسكين بالمذهب الديني المسيحي المعروف باسم ______، والذي كان مخالفاً لمذهب الكاثوليك.",
                    answer: "الأريوسية",
                    explanation: "كان الوندال يتبعون المذهب الأريوسي، وهو ما أدى إلى اضطهادهم لرجال الدين الكاثوليك ومصادرة أموال الكنيسة."
                }
            ]
        },

        'module4_alghist_complete': {
            name:"الاحتلال البيزنطي",
            icon: '<i class="fas fa-archway"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "في أي فترة زمنية حكم البيزنطيون الجزائر؟",
                    options: ["430-534 م", "534-647 م", "647-776 م"],
                    answer: "534-647 م",
                    explanation: "بدأ الاحتلال البيزنطي لشمال إفريقيا بعد القضاء على دولة الوندال عام 534 م واستمر حتى وصول الفتح الإسلامي."
                },
                {
                    type: 'fill',
                    question: "الحاكم العسكري البيزنطي الذي كان يتمتع بسلطة واسعة في شمال إفريقيا كان يلقب بـ______.",
                    answer: "البطريق",
                    explanation: "كان الحاكم العام العسكري يلقب بالبطريق (Patrician)، وكان يجمع بين السلطات العسكرية والمدنية."
                },
                {
                    type: 'mcq',
                    question: "ما هو المذهب المسيحي الذي حاول الإمبراطور جستينيان فرضه على سكان شمال إفريقيا عام 535 م؟",
                    options: ["المذهب الأريوسي", "المذهب الدوناتي", "المذهب الكاثوليكي"],
                    answer: "المذهب الكاثوليكي",
                    explanation: "أعلن الإمبراطور جستينيان وجوب اعتناق المذهب الكاثوليكي، مما أثار نزاعات دينية مع السكان الذين كانوا يتبعون مذاهب أخرى كالأرثوذكسية."
                },
                {
                    type: 'fill',
                    question: "تُعرف المناقشات والنزاعات الدينية العقيمة التي اشتهر بها العهد البيزنطي باسم المناقشات ______.",
                    answer: "البيزنطية",
                    explanation: "أدت الخلافات والمناقشات الدينية الحادة إلى إضعاف الإمبراطورية البيزنطية وخلقت حالة من عدم الاستقرار."
                },
                {
                    type: 'mcq',
                    question: "من هو البطريق الذي أعلن انفصال إفريقيا عن بيزنطة وثورته من عاصمته سبيطلة؟",
                    options: ["جناريوس", "هرقل الأول", "جريجوريوس (جرجير)"],
                    answer: "جريجوريوس (جرجير)",
                    explanation: "عمل البطريق جريجوريوس (جرجير) على انفصال إفريقيا عن بيزنطة وأعلن نفسه إمبراطوراً عليها قبل وصول الفتح الإسلامي."
                }
            ]
        },
        
        'module5_alghist_complete': {
            name: "الفتح الإسلامي",
            icon: '<i class="fas fa-moon"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "في عهد أي خليفة تم الفتح الإسلامي الأول لشمال إفريقيا عام 27هـ (647م)؟",
                    options: ["عمر بن الخطاب", "عثمان بن عفان", "علي بن أبي طالب"],
                    answer: "عثمان بن عفان",
                    explanation: "تولى عثمان بن عفان الخلافة وأمر والي مصر عبد الله بن سعد بن أبي سرح بالتهيؤ لفتح إفريقيا."
                },
                {
                    type: 'mcq',
                    question: "من هو القائد الذي أسس مدينة القيروان لتكون قاعدة للجيوش الإسلامية في إفريقية؟",
                    options: ["عبد الله بن أبي سرح", "معاوية بن حديج", "عقبة بن نافع الفهري"],
                    answer: "عقبة بن نافع الفهري",
                    explanation: "في ولايته الأولى عام 50هـ (670م)، قام عقبة بن نافع بتأسيس مدينة القيروان لتكون مركزاً استراتيجياً وعلمياً."
                },
                {
                    type: 'fill',
                    question: "القائد الذي خلف عقبة بن نافع في ولايته الأولى واتخذ من مدينة ______ مركزاً لعملياته العسكرية هو أبو المهاجر دينار.",
                    answer: "ميلة",
                    explanation: "اتخذ أبو المهاجر دينار من مدينة ميلة التاريخية مركزاً لعملياته العسكرية وواصل الفتح غرباً حتى وصل تلمسان."
                },
                {
                    type: 'mcq',
                    question: "من هو قائد قبيلة 'أوربة' البربرية الذي وقع أسيراً في يد أبي المهاجر دينار ثم أظهر إسلامه؟",
                    options: ["يوغرطة", "كسيلة", "جوبا الثاني"],
                    answer: "كسيلة",
                    explanation: "كان كسيلة أميراً قوياً لقبيلة أوربة، وبعد هزيمته أمام أبي المهاجر دينار، أظهر إسلامه وبقي معه."
                },
                {
                    type: 'fill',
                    question: "استشهد عقبة بن نافع ومن معه من أصحابه في منطقة ______ جنوب جبال الأوراس عام 63هـ (683م).",
                    answer: "تهودة",
                    explanation: "بعد خيانة كسيلة وتحالفه مع الروم، حوصر عقبة بن نافع ومعه حوالي 300 من أصحابه في منطقة تهودة واستشهدوا جميعاً."
                },
                {
                    type: 'mcq',
                    question: "من هي المرأة التي قادت مقاومة البربر ضد حسان بن النعمان وعرفت باسم 'الكاهنة'؟",
                    options: ["تين هينان", "دهيا", "عليسة"],
                    answer: "دهيا",
                    explanation: "دهيا، المعروفة بالكاهنة، كانت ملكة قبيلة جراوة الأمازيغية وقادت مقاومة شرسة ضد الجيوش الإسلامية."
                }
            ]
        },

        'module6_alghist_complete': {
            name: "الرستميون والأغالبة",
            icon: '<i class="fas fa-city"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "على أي مذهب إسلامي قامت الدولة الرستمية؟",
                    options: ["الشيعي الإسماعيلي", "الخوارج الإباضي", "السني المالكي"],
                    answer: "الخوارج الإباضي",
                    explanation: "كانت الدولة الرستمية أول دولة إسلامية كبرى في المغرب الأوسط، وقامت على المذهب الإباضي."
                },
                {
                    type: 'fill',
                    question: "مؤسس الدولة الرستمية هو عبدالرحمن بن رستم، وكانت عاصمتهم مدينة ______.",
                    answer: "تاهرت (تيهرت)",
                    explanation: "أسس عبد الرحمن بن رستم مدينة تاهرت (قرب تيارت الحالية) وجعلها عاصمة لدولته ومركزاً ثقافياً وتجارياً هاماً."
                },
                {
                    type: 'mcq',
                    question: "من الذي قضى على الدولة الرستمية عام 908 م؟",
                    options: ["العباسيون", "الأمويون في الأندلس", "صاحب الدعوة الفاطمية أبو عبد الله الشيعي"],
                    answer: "صاحب الدعوة الفاطمية أبو عبد الله الشيعي",
                    explanation: "قضى الداعية الشيعي أبو عبد الله الشيعي على الدولة الرستمية تمهيداً لقيام الدولة الفاطمية."
                },
                {
                    type: 'fill',
                    question: "إلى أين نزح بقايا الإباضيين بعد سقوط تاهرت وأسسوا مدنهم الجديدة مثل غرداية؟ إلى منطقة وادي ______.",
                    answer: "ميزاب",
                    explanation: "بعد سقوط دولتهم، هاجر الإباضيون جنوباً واستقروا في منطقة وادي ميزاب، حيث حافظوا على مذهبهم وثقافتهم."
                },
                {
                    type: 'mcq',
                    question: "مؤسس الدولة الأغلبية، إبراهيم بن الأغلب، كان والياً على إفريقية من قبل أي خلافة؟",
                    options: ["الأموية", "العباسية", "الفاطمية"],
                    answer: "العباسية",
                    explanation: "كان إبراهيم بن الأغلب والياً على إفريقية من قبل الخليفة العباسي هارون الرشيد، ثم استقل بالأمر سنة 800م."
                },
                {
                    type: 'mcq',
                    question: "ما هي الجزيرة الأوروبية الكبرى التي شرع الأغالبة في غزوها ابتداءً من سنة 827 م؟",
                    options: ["كريت", "قبرص", "صقلية"],
                    answer: "صقلية",
                    explanation: "بلغت الدولة الأغلبية قوة بحرية كبيرة مكنتها من غزو صقلية، مالطا، وجنوب إيطاليا."
                }
            ]
        },

        'module7_alghist_complete': {
            name: "الفاطميون والزيريون والحماديون",
            icon: '<i class="fas fa-building"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "على أي مذهب إسلامي قامت الدولة الفاطمية؟",
                    options: ["الإباضي", "الشيعي الإسماعيلي", "السني الحنفي"],
                    answer: "الشيعي الإسماعيلي",
                    explanation: "الدولة الفاطمية هي دولة شيعية قامت على المذهب الإسماعيلي، وكان حكامها يدعون أنهم من نسل فاطمة الزهراء."
                },
                {
                    type: 'mcq',
                    question: "من هو مؤسس الدولة الفاطمية الذي كان يُلقب بـ 'المهدي'؟",
                    options: ["المعز لدين الله", "الحاكم بأمر الله", "عبيد الله المهدي"],
                    answer: "عبيد الله المهدي",
                    explanation: "مؤسس السلالة هو عبيد الله المهدي، الذي اعتمد على الداعية أبو عبد الله الشيعي للوصول إلى الحكم."
                },
                {
                    type: 'fill',
                    question: "في عهد الخليفة المعز لدين الله، تم فتح مصر عام 969 م وبناء عاصمة جديدة هي مدينة ______.",
                    answer: "القاهرة",
                    explanation: "فتح القائد جوهر الصقلي مصر بأمر من الخليفة المعز، وأسس مدينة القاهرة لتكون العاصمة الجديدة للدولة الفاطمية."
                },
                {
                    type: 'mcq',
                    question: "من هو القائد الذي قضى على الدولة الفاطمية في مصر نهائياً عام 1171 م؟",
                    options: ["نور الدين زنكي", "صلاح الدين الأيوبي", "بيبرس"],
                    answer: "صلاح الدين الأيوبي",
                    explanation: "تمكن صلاح الدين الأيوبي، الذي كان وزيراً لآخر الخلفاء الفاطميين، من القضاء على دولتهم وإعادة مصر إلى المذهب السني."
                },
                {
                    type: 'fill',
                    question: "مؤسس الدولة الحمادية هو حماد بن بلكين، وقد بنى عاصمته الأولى عام 1007 م وهي ______.",
                    answer: "القلعة (قلعة بني حماد)",
                    explanation: "أسس حماد بن بلكين الدولة الحمادية كفرع مستقل عن الزيريين، وبنى عاصمته الحصينة 'القلعة' في جبال الحضنة."
                },
                {
                    type: 'mcq',
                    question: "ما هي القبائل العربية التي أرسلها الفاطميون من مصر لمعاقبة الزيريين، وتسبب زحفها في إضعاف الدولة الحمادية؟",
                    options: ["بنو قريش", "بنو تميم", "بنو هلال"],
                    answer: "بنو هلال",
                    explanation: "أدى زحف قبائل بنو هلال وبنو سليم إلى شمال إفريقيا إلى إحداث تغييرات ديموغرافية واقتصادية كبيرة وإضعاف الدول القائمة."
                }
            ]
        },

        'module8_alghist_complete': {
            name: "الموحدون والزيانيون",
            icon: '<i class="fas fa-chess-knight"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "من هو مؤسس الحركة الدينية الموحدية الذي دعا إلى 'توحيد الله' ومحاربة المرابطين؟",
                    options: ["عبد المؤمن بن علي", "يوسف بن تاشفين", "ابن تومرت"],
                    answer: "ابن تومرت",
                    explanation: "ابن تومرت هو المهدي المنتظر عند الموحدين، وهو المؤسس الروحي والفكري للحركة الموحدية."
                },
                {
                    type: 'fill',
                    question: "القائد الذي خلف ابن تومرت ونجح في تأسيس الإمبراطورية الموحدية والاستيلاء على مراكش هو ______.",
                    answer: "عبد المؤمن بن علي",
                    explanation: "عبد المؤمن بن علي الكومي، تلميذ ابن تومرت، هو المؤسس الفعلي للدولة الموحدية وأول خلفائها."
                },
                {
                    type: 'mcq',
                    question: "ما هي المعركة التي انتصر فيها الموحدون بقيادة يعقوب المنصور على ملوك النصارى في الأندلس عام 1195 م؟",
                    options: ["معركة الزلاقة", "معركة الأرك", "معركة حصن العقاب"],
                    answer: "معركة الأرك",
                    explanation: "يعتبر الانتصار في معركة الأرك ذروة القوة العسكرية للموحدين في الأندلس."
                },
                {
                    type: 'mcq',
                    question: "ما هي المعركة التي كانت بداية النهاية للدولة الموحدية بعد هزيمتهم القاسية على يد النصارى عام 1212 م؟",
                    options: ["معركة الأرك", "معركة وادي لكة", "معركة حصن العقاب"],
                    answer: "معركة حصن العقاب",
                    explanation: "كانت الهزيمة في معركة حصن العقاب (لاس نافاس دي تولوسا) نقطة تحول أدت إلى تفكك الدولة الموحدية وسقوط معظم الأندلس."
                },
                {
                    type: 'fill',
                    question: "مؤسس الدولة الزيانية هو يغمراسن بن زيان، وكانت عاصمتهم مدينة ______.",
                    answer: "تلمسان",
                    explanation: "بعد سقوط الموحدين، استقل يغمراسن بن زيان بغرب الجزائر وأسس الدولة الزيانية وعاصمتها تلمسان."
                },
                {
                    type: 'mcq',
                    question: "إلى أي قبيلة بربرية كبرى يرجع أصل بني عبد الواد (الزيانيين)؟",
                    options: ["صنهاجة", "مصمودة", "زناتة"],
                    answer: "زناتة",
                    explanation: "يرجع أصل بني عبد الواد أو بني زيان إلى قبيلة زناتة البربرية التي كانت تستقر في شمال الصحراء الكبرى."
                },
                {
                    type: 'fill',
                    question: "بسبب التهديد الإسباني، وضع بنو عبد الواد أنفسهم تحت حماية ______ الذين استولوا على مدينة الجزائر عام 1516 م.",
                    answer: "الأتراك (العثمانيين)",
                    explanation: "في بداية القرن السادس عشر، ومع تزايد الخطر الإسباني، استنجد الزيانيون بالإخوة بربروس، مما مهد الطريق لبداية العهد العثماني في الجزائر."
                 }
                ]
            }
        }
    },
     'research_schools_methods': {
    name: "مدارس ومناهج البحث العلمي",
    icon: '<i class="fas-fa-book-open"></i>',
    semester: 1,
    modules: {

        'module1_res_schools': {
            name: "مفهوم المدرسة الفكرية",
            icon: '<i class="fas fa-school"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هو التعريف الأدق للمدرسة الفكرية؟",
                    options: ["مكان للدراسة والتعليم", "مجموعة من الناس يجمعهم فكر مشترك أو خصائص مشتركة", "نظرية علمية مثبتة"],
                    answer: "مجموعة من الناس يجمعهم فكر مشترك أو خصائص مشتركة",
                    explanation: "المدرسة الفكرية هي مجموعة من الناس (علماء، منظرين) يجمعهم فكر مشترك في مجال معين (فلسفي، سياسي، اقتصادي، فني...)."
                },
                {
                    type: 'fill',
                    question: "كثيراً ما يتم تسمية المدارس الفكرية بأسماء ______، مثل المدرسة الأشعرية التي أوجدها أبو الحسن الأشعري.",
                    answer: "مؤسسيها",
                    explanation: "من الطرق الشائعة لتسمية المدارس الفكرية نسبتها إلى مؤسسها الأول أو أبرز منظريها."
                },
                {
                    type: 'mcq',
                    question: "من هو مؤسس المدرسة الواقعية في العلاقات الدولية؟",
                    options: ["كينيث والتز", "جوزيف ناي", "هانز مورغانتاو"],
                    answer: "هانز مورغانتاو",
                    explanation: "يعد هانز مورغانتاو (Hans Morgenthau) المؤسس الأبرز للمدرسة الواقعية الكلاسيكية في العلاقات الدولية."
                },
                {
                    type: 'mcq',
                    question: "أي من التالية ليس من المبادئ الأساسية للمدرسة الواقعية في العلاقات الدولية؟",
                    options: ["الدولة هي الفاعل الأساسي", "التركيز على القوة الذاتية للدول", "أهمية المنظمات الدولية في تحقيق السلام"],
                    answer: "أهمية المنظمات الدولية في تحقيق السلام",
                    explanation: "المدرسة الواقعية تقلل من أهمية المنظمات الدولية وتركز على أن الدولة ومصلحتها وقوتها هي المحرك الأساسي في عالم فوضوي."
                },
                {
                    type: 'fill',
                    question: "مؤسس المدرسة الاقتصادية الرأسمالية الكلاسيكية هو ______.",
                    answer: "آدم سميث",
                    explanation: "يعتبر آدم سميث، من خلال كتابه 'ثروة الأمم'، الأب المؤسس للمدرسة الاقتصادية الرأسمالية الكلاسيكية."
                },
                {
                    type: 'mcq',
                    question: "ما هو المبدأ الأساسي الذي تقوم عليه المدرسة الاقتصادية الرأسمالية؟",
                    options: ["تدخل الدولة لتحديد الأسعار", "الملكية الجماعية لوسائل الإنتاج", "حرية العرض والطلب (قانون السوق)"],
                    answer: "حرية العرض والطلب (قانون السوق)",
                    explanation: "من أهم مبادئ الرأسمالية هي حرية السوق، عدم تدخل الدولة في الاقتصاد، والملكية الفردية."
                }
            ]
        },

        'module2_res_schools': {
            name: "المدرسة الإسلامية",
            icon: '<i class="fas fa-moon"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "من هو العالم المسلم الذي أبطل 'علم المناظر' القديم وأنشأ علم الضوء الحديث؟",
                    options: ["ابن سينا", "ابن الهيثم", "البيروني"],
                    answer: "ابن الهيثم",
                    explanation: "يعتبر الحسن بن الهيثم مؤسس علم البصريات الحديث (علم الضوء)، وكتابه 'المناظر' كان له أثر كبير في أوروبا."
                },
                {
                    type: 'fill',
                    question: "يرى الفيلسوف ______ أن ابن رشد فيلسوف متين صحح الكثير من أخطاء الفكر الإنساني.",
                    answer: "بيكون",
                    explanation: "يشيد الفيلسوف الإنجليزي روجر بيكون بابن رشد ويعتبره فيلسوفاً عميقاً صحح الكثير من الأخطاء وأضاف ثروة قيمة للفكر."
                },
                {
                    type: 'mcq',
                    question: "ما هما التياران الرئيسيان في المدرسة الإسلامية لعلم الاجتماع؟",
                    options: ["تيار تراثي وتيار عقائدي", "تيار قومي وتيار عربي", "تيار وضعي وتيار ماركسي"],
                    answer: "تيار تراثي وتيار عقائدي",
                    explanation: "ينقسم فكر أسلمة العلوم الاجتماعية إلى تيار يربطها بدراسة التراث الإسلامي، وتيار آخر يربطها بالعقائد الإسلامية مباشرة."
                },
                {
                    type: 'mcq',
                    question: "من هو السوسيولوجي العراقي الذي دافع عن فكرة 'علم اجتماع عربي'؟",
                    options: ["أحمد الخشاب", "عبد الباسط عبد المعطي", "معن خليل عمر"],
                    answer: "معن خليل عمر",
                    explanation: "يعتبر السوسيولوجي العراقي معن خليل عمر من أبرز المدافعين عن ضرورة وجود علم اجتماع عربي مستقل، كما يظهر في كتابه 'نحو علم اجتماع عربي'."
                },
                {
                    type: 'fill',
                    question: "لخص علماء الإسلام المعرفة في ثلاثة أشكال: المعرفة الشرعية، المعرفة العقلية، والمعرفة ______.",
                    answer: "التجريبية",
                    explanation: "الأشكال الثلاثة للمعرفة هي: الشرعية (النقل)، العقلية (المنطق والفلسفة)، والتجريبية (المشاهدة والتجربة)."
                },
                {
                    type: 'mcq',
                    question: "ما هي أبرز مميزات المنهجية الإسلامية في البحث العلمي؟",
                    options: ["تطبيق المنهج التجريبي على كل شيء", "التلاؤم بين المنهج والموضوع", "التركيز على المعرفة الشرعية فقط"],
                    answer: "التلاؤم بين المنهج والموضوع",
                    explanation: "من أبرز مميزات المنهجية الإسلامية هو أن لكل نوع من المعرفة منهج يناسبه (التجريبي للطبيعة، التاريخي للأخبار...إلخ)."
                }
            ]
        },

        'module3_res_schools': {
            name: "المدرسة الماركسية",
            icon: '<i class="fab fa-dyalog"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "من أي فيلسوف استعار كارل ماركس الأسلوب الجدلي (الدياليكتيكي) في التحليل؟",
                    options: ["فيخته", "هيجل", "آدم سميث"],
                    answer: "هيجل",
                    explanation: "استعار ماركس الدياليكتيك من هيجل، لكنه استبدل 'الفكر' كأساس للتطور بـ 'الوضع الاقتصادي'، وهو ما يعرف بـ 'المادية الجدلية'."
                },
                {
                    type: 'fill',
                    question: "في النظرية الماركسية، يحدد البناء ______ للمجتمع (الاقتصاد) طبيعة البناء الفوقي (الأفكار، الدين، السياسة).",
                    answer: "المادي",
                    explanation: "يعتقد ماركس أن البناء التحتي المادي (علاقات الإنتاج) هو الذي يحدد شكل البناء الفوقي الفكري والأيديولوجي للمجتمع."
                },
                {
                    type: 'mcq',
                    question: "ما هو المصطلح الذي استخدمه ماركس لوصف شعور العامل بالبعد عن السلعة التي ينتجها وعن صاحب العمل؟",
                    options: ["الصراع الطبقي", "فائض القيمة", "الاغتراب"],
                    answer: "الاغتراب",
                    explanation: "الاغتراب (Alienation) هو ظاهرة اجتماعية يشعر فيها الإنسان بالانفصال عن نتاج عمله، عن نفسه، وعن الآخرين."
                },
                {
                    type: 'mcq',
                    question: "حسب ماركس، ما هما الطبقتان الأساسيتان المتصارعتان في المجتمع الرأسمالي؟",
                    options: ["الإقطاعيون والفلاحون", "النبلاء والعامة", "البرجوازية والبروليتاريا"],
                    answer: "البرجوازية والبروليتاريا",
                    explanation: "البرجوازية هي الطبقة المالكة لوسائل الإنتاج، والبروليتاريا هي الطبقة العاملة التي تبيع قوة عملها."
                },
                {
                    type: 'fill',
                    question: "يعتبر ______ القوة الدافعة ومصدر التطور في المجتمع الطبقي حسب التحليل الماركسي.",
                    answer: "الصراع الطبقي",
                    explanation: "يرى ماركس أن تاريخ كل المجتمعات حتى الآن هو تاريخ الصراع بين الطبقات."
                },
                {
                    type: 'mcq',
                    question: "ما هو الهدف النهائي للثورة البروليتارية حسب ماركس؟",
                    options: ["إقامة ديمقراطية برجوازية", "إلغاء كل طبقات المجتمع وتحقيق الشيوعية", "إصلاح النظام الرأسمالي"],
                    answer: "إلغاء كل طبقات المجتمع وتحقيق الشيوعية",
                    explanation: "يعتقد ماركس أن الثورة ستقود إلى ديكتاتورية البروليتاريا كمرحلة انتقالية، ثم إلى مجتمع شيوعي لا طبقي."
                },
                {
                    type: 'fill',
                    question: "يؤكد ماركس أن الوجود ______ المتمثل في النشاط الإنتاجي المادي للأفراد هو الذي يحدد وعيهم الاجتماعي.",
                    answer: "الاجتماعي",
                    explanation: "المقولة الشهيرة لماركس هي 'ليس وعي الناس هو الذي يحدد وجودهم، بل وجودهم الاجتماعي هو الذي يحدد وعيهم'."
                }
            ]
        },

        'module4_res_schools': {
            name: "البحث العلمي والمناهج",
            icon: '<i class="fas fa-microscope"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هو التعريف الأدق للبحث العلمي؟",
                    options: ["جمع المعلومات من الكتب", "التقصي المنظم باتباع أساليب ومناهج علمية للوصول للحقيقة", "كتابة تقرير عن ظاهرة ما"],
                    answer: "التقصي المنظم باتباع أساليب ومناهج علمية للوصول للحقيقة",
                    explanation: "البحث العلمي هو وسيلة للاستقصاء المنظم والدقيق بهدف اكتشاف معلومات أو علاقات جديدة أو تطوير وتصحيح المعلومات الموجودة."
                },
                {
                    type: 'mcq',
                    question: "أي من التالية لا يعتبر من متطلبات إجراء البحوث العلمية المذكورة في النص؟",
                    options: ["توفر الغطاء المادي", "حماية حقوق المؤلف", "الحصول على نتائج متوافقة مع رأي الباحث"],
                    answer: "الحصول على نتائج متوافقة مع رأي الباحث",
                    explanation: "من شروط البحث العلمي الأمانة والموضوعية، وليس السعي للحصول على نتائج تتوافق مع آراء الباحث المسبقة."
                },
                {
                    type: 'mcq',
                    question: "ما هي أول خطوة من خطوات البحث العلمي؟",
                    options: ["جمع المعلومات", "اختيار موضوع البحث", "كتابة تقرير البحث"],
                    answer: "اختيار موضوع البحث",
                    explanation: "تبدأ عملية البحث العلمي دائماً باختيار وتحديد مشكلة البحث أو الظاهرة المراد دراستها."
                },
                {
                    type: 'fill',
                    question: "المرحلة التي يتم فيها جمع البيانات من الميدان في البحث العلمي تسمى المرحلة ______.",
                    answer: "الميدانية",
                    explanation: "تنقسم خطوات البحث العلمي إلى ثلاث مراحل: التحضيرية (التخطيط)، الميدانية (جمع البيانات)، والنهائية (التحليل وكتابة التقرير)."
                },
                {
                    type: 'mcq',
                    question: "ما هو المنهج الذي يعتمد على إجراء التجارب لاكتشاف الأسباب والعوامل التي تؤثر في الظواهر؟",
                    options: ["المنهج التاريخي", "المنهج الوصفي", "المنهج التجريبي"],
                    answer: "المنهج التجريبي",
                    explanation: "المنهج التجريبي هو المنهج الذي يقوم فيه الباحث بإحداث تغيير متعمد في متغير (المتغير المستقل) لقياس أثره على متغير آخر (المتغير التابع)."
                },
                {
                    type: 'fill',
                    question: "في التجربة العلمية، المجموعة التي لا تتعرض لأثر المتغير المستقل وتستخدم للمقارنة تسمى المجموعة ______.",
                    answer: "الضابطة",
                    explanation: "تستخدم المجموعة الضابطة كخط أساس للمقارنة مع المجموعة التجريبية (التي تتعرض للمتغير المستقل) لمعرفة مدى تأثير هذا المتغير."
                },
                {
                    type: 'mcq',
                    question: "في طرق إجراء التجربة، الطريقة التي تعتمد على أخذ مجموعتين (ضابطة وتجريبية) متساويتين ومتكافئتين تسمى طرق المجموعات ______.",
                    options: ["التبادلية", "المتكافئة", "الواحدة"],
                    answer: "المتكافئة",
                    explanation: "تعتبر طرق المجموعات المتكافئة من التصاميم التجريبية القوية، حيث يتم التأكد من تكافؤ المجموعتين قبل التجربة لضمان دقة النتائج."
                }
            ]
        }
    }
},
    'library_science_intro': {
    name: "مدخل إلى علم المكتبات",
    icon: '<i class="fas fa-book-reader"></i>',
    semester: 1, 
    modules: {

        'module1_libsci': {
            name: "بدايات المؤسسات الوثائقية",
            icon: '<i class="fas fa-landmark"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "أي من التالية لا يعتبر من الأنواع الأساسية الثلاثة للمؤسسات الوثائقية؟",
                    options: ["المكتبة", "الأرشيف", "المتحف"],
                    answer: "المتحف",
                    explanation: "تقسم المؤسسات الوثائقية بشكل أساسي إلى: المكتبة، الأرشيف، ومراكز المعلومات."
                },
                {
                    type: 'fill',
                    question: "في حضارة بلاد الرافدين، كانت الكتابة تتم بالقلم المسماري على ______ الطينية.",
                    answer: "الألواح",
                    explanation: "استخدم السومريون والبابليون والآشوريون الألواح الطينية كوسيط أساسي للكتابة المسمارية."
                },
                {
                    type: 'mcq',
                    question: "في أي مكتبة قديمة في بلاد ما بين النهرين دارت معظم موضوعات ألواحها حول الحروب؟",
                    options: ["مكتبة نيبور", "مكتبة آشور بانيبال", "مكتبة لكش"],
                    answer: "مكتبة لكش",
                    explanation: "مكتبة لكش (حوالي 3200 ق.م) كانت عبارة عن معبد ووجدت فيها ألواح عديدة جل موضوعاتها عن الحروب."
                },
                {
                    type: 'mcq',
                    question: "من هو الملك الآشوري الذي أسس مكتبة عظيمة في مدينة نينوى ورتب مؤلفاتها حسب موضوعاتها؟",
                    options: ["حمورابي", "آشور بانيبال", "سرجون الأكدي"],
                    answer: "آشور بانيبال",
                    explanation: "تعتبر مكتبة آشور بانيبال (حوالي 668 ق.م) من أشهر مكتبات العالم القديم لتنظيمها وفهرستها المتقدمة."
                },
                {
                    type: 'fill',
                    question: "استخدم اليونانيون كلمة ______ للإشارة إلى مستودع الكتب أو مكان حفظها.",
                    answer: "bibliotheca",
                    explanation: "كلمة bibliotheca هي أصل كلمة 'مكتبة' في العديد من اللغات الأوروبية وتعني مستودع الكتب."
                },
                {
                    type: 'mcq',
                    question: "من هو أول شخص قام بتأسيس مكتبة رومانية في روما؟",
                    options: ["يوليوس قيصر", "أوغسطس قيصر", "أوزينيه بوليون"],
                    answer: "أوزينيه بوليون",
                    explanation: "حاول يوليوس قيصر إنشاء مكتبة لكنه اغتيل، ويعتبر أوزينيه بوليون أول من نجح في تأسيس مكتبة رومانية عامة في روما."
                },
                {
                    type: 'fill',
                    question: "في عهد الخليفة الأموي ______، تمت أول عملية نقل (ترجمة) للكتب من اليونانية والقبطية إلى العربية.",
                    answer: "خالد بن يزيد بن معاوية",
                    explanation: "أمر خالد بن يزيد بن معاوية فلاسفة يونانيين يتقنون العربية بنقل الكتب إلى العربية، وكانت هذه أول حركة ترجمة في الإسلام."
                },
                {
                    type: 'mcq',
                    question: "ما هي المهنة التي ظهرت في العصر العباسي وشملت نسخ الكتب وتجليدها وبيعها؟",
                    options: ["الخطابة", "الوراقة", "التدوين"],
                    answer: "الوراقة",
                    explanation: "ازدهرت صنعة الوراقة في العصر العباسي، وكان الوراقون يقومون بنسخ وبيع وتجليد الكتب وتوفير أدوات الكتابة."
                }
            ]
        },

        'module2_libsci': {
            name: "المكتبات الإسلامية والحديثة",
            icon: '<i class="fas fa-mosque"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "أي نوع من العلوم لم يكن يدرس عادة في مكتبات المساجد في العصر الإسلامي؟",
                    options: ["الفلسفة", "الطب", "الفلك"],
                    answer: "الطب",
                    explanation: "كانت تدرس في المساجد جميع أنواع العلوم باستثناء الطب، الذي كان يدرس في المشافي (البيمارستانات)."
                },
                {
                    type: 'mcq',
                    question: "أي من الجوامع التالية لم يُذكر ضمن الجوامع التي حوت مكتبات شهيرة في العصر الإسلامي؟",
                    options: ["جامع الأزهر (مصر)", "جامع الزيتونة (تونس)", "المسجد النبوي (المدينة)"],
                    answer: "المسجد النبوي (المدينة)",
                    explanation: "النص ذكر جوامع مكة والمدينة بشكل عام، لكنه خص بالذكر الكوفة، دمشق، بغداد، الأزهر، الزيتونة، وحواضر الأندلس."
                },
                {
                    type: 'fill',
                    question: "مكتبة ______ التي أسسها علي بن يحيى المنجم، هي مثال على المكتبات الخاصة التي كانت تفتح أبوابها للعلماء والباحثين.",
                    answer: "الحكمة",
                    explanation: "كانت مكتبة الحكمة التي أسسها علي بن يحيى المنجم مكتبة خاصة، لكنها كانت أشبه بمؤسسة عامة يرتادها العلماء من كل بلد."
                },
                {
                    type: 'mcq',
                    question: "ما اسم أشهر مكتبة أكاديمية في العصر العباسي، والتي كانت تضم أماكن للدرس والترجمة والرصد الفلكي؟",
                    options: ["دار العلم في بغداد", "مكتبة بني عمار", "بيت الحكمة"],
                    answer: "بيت الحكمة",
                    explanation: "كان بيت الحكمة في بغداد الذي بلغ أوجه في عهد المأمون، أكاديمية بالمعنى الدقيق للكلمة ومركزاً للترجمة والبحث العلمي."
                },
                {
                    type: 'mcq',
                    question: "من هو الخليفة الذي شيد المدرسة المستنصرية في بغداد وألحق بها مكتبة شهيرة؟",
                    options: ["هارون الرشيد", "المأمون", "المستنصر بالله"],
                    answer: "المستنصر بالله",
                    explanation: "تعتبر مكتبة المدرسة المستنصرية التي شيدها الخليفة العباسي المستنصر بالله من أشهر مكتبات المدارس."
                },
                {
                    type: 'fill',
                    question: "مشفى ______ في القاهرة قيل أن عدد كتب مكتبته بلغ مائة ألف مجلد.",
                    answer: "قلاوون",
                    explanation: "كانت المشافي (المستشفيات) في العصر الإسلامي مراكز لتعليم الطب، ومن أشهرها مشفى قلاوون في القاهرة الذي ضم مكتبة ضخمة."
                },
                {
                    type: 'mcq',
                    question: "ما اسم المكتبة الأمريكية الشهيرة التي تعرضت للحرق على إثر غزو الجيش البريطاني لواشنطن؟",
                    options: ["مكتبة جامعة هارفارد", "مكتبة الكونغرس", "مكتبة نيويورك العامة"],
                    answer: "مكتبة الكونغرس",
                    explanation: "تأسست مكتبة الكونغرس عام 1800م، وتعرضت للحرق أثناء حرب عام 1812 على يد الجيش البريطاني."
                },
                {
                    type: 'fill',
                    question: "في العصر الراهن، تغيرت تسمية دار الكتب الوطنية في الرياض إلى مكتبة الملك ______ الوطنية.",
                    answer: "فهد",
                    explanation: "تعتبر مكتبة الملك فهد الوطنية في الرياض من أبرز المكتبات الوطنية في العالم العربي حالياً."
                }
            ]
        },

        'module3_libsci': {
            name: "أنواع المؤسسات ووظائفها",
            icon: '<i class="fas fa-sitemap"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هي المهمة الأساسية للمكتبة الوطنية داخل الدولة؟",
                    options: ["تقديم خدمات الإعارة لعامة الناس", "دعم المناهج الدراسية للجامعات", "حصر الإنتاج الفكري الوطني"],
                    answer: "حصر الإنتاج الفكري الوطني",
                    explanation: "تتمثل المهمة الأساسية للمكتبة الوطنية في جمع وحفظ كل ما ينشر داخل الدولة، وما ينشر عنها في الخارج، وما ينشره أبناؤها في الخارج."
                },
                {
                    type: 'fill',
                    question: "القانون الذي يلزم المؤلف أو الناشر بإيداع نسخة أو أكثر من مؤلفاته في المكتبة الوطنية مجاناً يسمى الإيداع ______.",
                    answer: "القانوني",
                    explanation: "الإيداع القانوني هو حق تتمتع به المكتبة الوطنية، ويضمن جمع كل الإنتاج الفكري الوطني."
                },
                {
                    type: 'mcq',
                    question: "أي نوع من المكتبات توصف بأنها 'جامعة الشعب' وتقدم خدماتها للجمهور العام بمختلف فئاته؟",
                    options: ["المكتبة الجامعية", "المكتبة العامة", "المكتبة المتخصصة"],
                    answer: "المكتبة العامة",
                    explanation: "توصف المكتبة العامة بأنها 'جامعة الشعب' لأنها توفر فرص التعليم المستمر والتثقيف لجميع أفراد المجتمع."
                },
                {
                    type: 'mcq',
                    question: "المكتبات التي تكون في حافلات أو شاحنات وتهدف لخدمة المناطق النائية تسمى المكتبات:",
                    options: ["المدرسية", "الخاصة", "المتنقلة"],
                    answer: "المتنقلة",
                    explanation: "تهدف المكتبات المتنقلة إلى توصيل خدمات القراءة والمعرفة إلى المناطق التي لا توجد بها مكتبات ثابتة."
                },
                {
                    type: 'fill',
                    question: "الأرشيف الذي يضم وثائق وزارات العدل والمحاكم والهيئات التشريعية والقضائية هو الأرشيف ______.",
                    answer: "القضائي",
                    explanation: "يتخصص الأرشيف القضائي في جمع وحفظ الوثائق المتعلقة بالنظام القانوني والقضائي للدولة."
                },
                {
                    type: 'mcq',
                    question: "ما هي الوظيفة الأساسية لمراكز المعلومات؟",
                    options: ["تقديم خدمات الإعارة فقط", "جمع وحفظ وتنظيم واسترجاع ونشر المعلومات المتخصصة", "التركيز على أدب الطفل"],
                    answer: "جمع وحفظ وتنظيم واسترجاع ونشر المعلومات المتخصصة",
                    explanation: "تسعى مراكز المعلومات لتقديم معلومات دقيقة ومتخصصة للمستفيدين في الوقت المناسب من خلال عمليات التحليل والتكشيف والاستخلاص."
                }
            ]
        },

        'module4_libsci': {
            name: "الأشكال (تقليدية وإلكترونية)",
            icon: '<i class="fas fa-desktop"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "على ماذا تعتمد المكتبة التقليدية بشكل أساسي؟",
                    options: ["المصادر الرقمية", "شبكة الإنترنت", "المصادر المطبوعة والورقية"],
                    answer: "المصادر المطبوعة والورقية",
                    explanation: "تعتمد المكتبة التقليدية على الطباعة والنشر التقليدي، وتحتوي على مصادر ورقية مثل الكتب والمجلات والصحف."
                },
                {
                    type: 'fill',
                    question: "إذا أراد الباحث معلومة في المكتبة التقليدية، فإنه يحتاج لاستخدام فهرس المكتبة ______ أو الآلي.",
                    answer: "البطاقي",
                    explanation: "الفهرس البطاقي هو الأداة التقليدية للبحث عن الكتب في المكتبة، حيث تكون بيانات كل كتاب مسجلة على بطاقة ورقية."
                },
                {
                    type: 'mcq',
                    question: "ما هو المفهوم الأساسي للمكتبة الإلكترونية؟",
                    options: ["مكتبة بها أجهزة كمبيوتر فقط", "إتاحة محتويات وخدمات المكتبات عن بعد", "مجموعة من الأقراص المدمجة"],
                    answer: "إتاحة محتويات وخدمات المكتبات عن بعد",
                    explanation: "تعكس المكتبة الإلكترونية مفهوم الإتاحة عن بعد للمصادر، سواء كانت مطبوعة تم تحويلها لشكل إلكتروني أو إلكترونية الأصل."
                },
                {
                    type: 'fill',
                    question: "من مميزات المكتبة الإلكترونية أنها تخطت الحواجز ______ والحدود بين الدول والأقاليم.",
                    answer: "المكانية",
                    explanation: "تتيح المكتبة الإلكترونية الوصول إلى المعلومات من أي مكان في العالم، متخطية بذلك الحواجز الجغرافية والمكانية."
                },
                {
                    type: 'mcq',
                    question: "أي من التالية يعتبر من مميزات المكتبة الإلكترونية؟",
                    options: ["تعتمد على الفهرس البطاقي", "تتيح استخدام برمجيات الترجمة الآلية والإحصاء", "تفتح أبوابها في أوقات محددة"],
                    answer: "تتيح استخدام برمجيات الترجمة الآلية والإحصاء",
                    explanation: "يمكن للباحث في بيئة المكتبة الإلكترونية الاستفادة من برمجيات متنوعة لمعالجة النصوص والترجمة والتحليل الإحصائي."
                }
            ]
        },
        
        'module5_libsci': {
            name: "الأشكال (رقمية وافتراضية)",
            icon: '<i class="fas fa-cloud"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "ما هو الفرق الجوهري بين المكتبة الرقمية والإلكترونية؟",
                    options: ["الرقمية أسرع", "الرقمية تحتوي على مواد مخزنة بصيغة رقمية (digital) بشكل أساسي", "الإلكترونية مجانية"],
                    answer: "الرقمية تحتوي على مواد مخزنة بصيغة رقمية (digital) بشكل أساسي",
                    explanation: "المكتبة الرقمية هي مجموعة من المواد (نصوص، صور، فيديو) مخزنة بصيغة رقمية (bits and bytes) ويمكن الوصول إليها عبر الشبكات."
                },
                {
                    type: 'mcq',
                    question: "ما هي الميزة التي تميز المكتبة الرقمية عن التقليدية فيما يخص 'الوصول'؟",
                    options: ["الوصول للمعلومات قد لا يتوافر في المكتبة نفسها", "يجب الحضور شخصياً للوصول للمعلومات", "الوصول متاح فقط للطلبة"],
                    answer: "الوصول للمعلومات قد لا يتوافر في المكتبة نفسها",
                    explanation: "المكتبة الرقمية تتيح الوصول للمعلومات حتى لو لم تكن تملكها، وذلك عبر اتفاقيات التعاون مع مكتبات أخرى أو شبكات المعلومات."
                },
                {
                    type: 'fill',
                    question: "المكتبة التي توصف بأنها 'مؤسسة بلا جدران' ومجموعاتها متاحة فقط بصورة إلكترونية رقمية هي المكتبة ______.",
                    answer: "الافتراضية",
                    explanation: "المكتبة الافتراضية (Virtual Library) لا تملك وجوداً مادياً، بل هي عبارة عن مجموعة منظمة من الروابط والمصادر الرقمية على شبكة الإنترنت."
                },
                {
                    type: 'mcq',
                    question: "ما هي أهم ميزة للمكتبة الافتراضية؟",
                    options: ["توفير عدد كبير من الموظفين", "الاعتماد على خاصية التشابك للوصول الفوري للمعلومات", "توفير الكتب الورقية النادرة"],
                    answer: "الاعتماد على خاصية التشابك للوصول الفوري للمعلومات",
                    explanation: "تعتمد المكتبة الافتراضية على الروابط والتشابك (Hyperlinking) لتوفير وصول سريع وفوري للمنشورات الرقمية من أي مكان وفي أي زمان."
                },
                {
                    type: 'fill',
                    question: "من أهمية المكتبة الافتراضية أنها ساعدت على تزويد كل إنسان بمكتبة ______ وخاصة به.",
                    answer: "شخصية",
                    explanation: "بفضل المكتبة الافتراضية، يمكن لأي شخص تجميع وتنظيم المصادر التي تهمه في مجال تخصصه، مكوناً بذلك مكتبته الشخصية الرقمية."
                }
            ]
        },

        'module6_libsci': {
            name: "تاريخ الكتابة وأوعية المعلومات",
            icon: '<i class="fas fa-pen-fancy"></i>',
            questions: [
                {
                    type: 'mcq',
                    question: "في أي عام ظهرت الكتابة المسمارية على الألواح الطينية؟",
                    options: ["3000 ق.م", "3600 ق.م", "1728 ق.م"],
                    answer: "3600 ق.م",
                    explanation: "ظهرت الكتابة المسمارية في سومر (بلاد الرافدين) حوالي عام 3600 ق.م، وكانت تنقش على الطين وهو طري."
                },
                {
                    type: 'mcq',
                    question: "ماذا تعني كلمة 'هيروغليفية'؟",
                    options: ["كتابة مقدسة", "نقش مقدس", "لغة الكهنة"],
                    answer: "نقش مقدس",
                    explanation: "كلمة هيروغليفية هي كلمة يونانية تعني 'النقش المقدس'، وكانت تستخدم في النصوص الدينية على جدران المعابد والمقابر."
                },
                {
                    type: 'fill',
                    question: "المادة التي نافست ورق البردي وأصبحت المادة الرئيسية للكتابة في آسيا الصغرى لقدرتها على التحمل هي ______.",
                    answer: "الجلود",
                    explanation: "الجلود (الرق) كانت أكثر تحملاً من البردي، ويمكن الكتابة عليها ومحوها وإعادة استخدامها، مما جعلها مادة مفضلة للكتابة."
                },
                {
                    type: 'mcq',
                    question: "من هو العالم الألماني الذي يُنسب إليه اختراع آلة الطباعة بالحروف المتحركة في منتصف القرن الخامس عشر؟",
                    options: ["كلود شانون", "تشارلز باباج", "يوهان غوتنبرغ"],
                    answer: "يوهان غوتنبرغ",
                    explanation: "يعتبر يوهان غوتنبرغ مخترع الطباعة الحديثة في أوروبا حوالي عام 1450م، مما أحدث ثورة في نشر المعرفة."
                },
                {
                    type: 'fill',
                    question: "أول بلد عربي دخلت إليه الطباعة كان ______ عام 1610 م.",
                    answer: "لبنان",
                    explanation: "تعتبر لبنان أول بلد عربي يعرف الطباعة بالحروف العربية، وذلك في دير قزحيا عام 1610 م."
                },
                {
                    type: 'mcq',
                    question: "من هو العالم الذي يعتبر أول من فكر وصمم حاسوباً مبرمجاً بالكامل في بداية عام 1820؟",
                    options: ["كلود شانون", "روبرت خان", "تشارلز باباج"],
                    answer: "تشارلز باباج",
                    explanation: "يعتبر تشارلز باباج 'أبو الحاسوب'، حيث صمم 'المحرك التحليلي' الذي كان أول تصميم لحاسوب ميكانيكي قابل للبرمجة."
                },
                {
                    type: 'fill',
                    question: "ظهرت شبكة الأنترنيت في 29 أكتوبر 1969 على يد ______ وآخرين.",
                    answer: "روبرت خان",
                    explanation: "يعتبر كل من فينت سيرف وروبرت خان من الآباء المؤسسين للإنترنت لتطويرهما بروتوكول TCP/IP."
                }
            ]
        }
    }
}
};

// Updated ICONS object to use Font Awesome classes
const ICONS = {
    lock: '<i class="fas fa-lock"></i>',
    attempt: '<i class="fas fa-heart"></i>',
    user: '<i class="fas fa-user-circle"></i>',
    level: '<i class="fas fa-graduation-cap"></i>', // Changed to a more relevant icon
    points: '<i class="fas fa-star"></i>', // Changed to a more relevant icon
    dashboard: '<i class="fas fa-tachometer-alt"></i>',
    comment: '<i class="fas fa-comments"></i>',
    leaderboard: '<i class="fas fa-trophy"></i>' // New icon for leaderboard
};

const mainContainer = document.getElementById('main-container');
const screens = {
    welcome: document.getElementById('welcome-screen'),
    institute: document.getElementById('institute-screen'),
    year: document.getElementById('year-screen'),
    semester: document.getElementById('semester-screen'),
    course: document.getElementById('course-screen'),
    academicPath: document.getElementById('academic-path-screen'),
    quiz: document.getElementById('quiz-screen'),
    userProfile: document.getElementById('user-profile-screen'),
    developerDashboard: document.getElementById('developer-dashboard-screen'),
    leaderboard: document.getElementById('leaderboard-screen'), // New screen reference
    adminDashboard: document.getElementById('admin-dashboard-screen'),
    choice: document.getElementById('choice-screen'),
    lectures: document.getElementById('lectures-screen'),
    lectureContent: document.getElementById('lecture-content-screen')

};
const quizHud = document.getElementById('quiz-hud');
const attemptsContainer = document.getElementById('attempts-container');
const feedbackContainer = document.getElementById('feedback-container');
const feedbackTitle = document.getElementById('feedback-title');
const feedbackText = document.getElementById('feedback-text');
const progressBar = document.getElementById('progress-bar-inner');
const academicPointsDisplay = document.querySelector('#academic-points span');
const certificateModal = document.getElementById('certificate-modal');
const appHeader = document.getElementById('app-header');
const questionText = document.getElementById('question-text');
const optionsGrid = document.getElementById('options-grid');
const explanationBtn = document.getElementById('explanation-btn');
const authModal = document.getElementById('auth-modal');
const authModalTitle = document.getElementById('auth-modal-title');
const authForm = document.getElementById('auth-form');
const authEmailInput = document.getElementById('auth-email');
const authPasswordInput = document.getElementById('auth-password');
const authSubmitBtn = document.getElementById('auth-submit-btn');
const switchToRegisterLink = document.getElementById('switch-to-register');
const commentsModal = document.getElementById('comments-modal');
const commentsList = document.getElementById('comments-list');
const newCommentText = document.getElementById('new-comment-text');
const submitCommentBtn = document.getElementById('submit-comment-btn');
const toastNotification = document.getElementById('toast-notification');

// Mock user data and state
let gameState = {
    currentCourse: null,
    currentModule: null,
    currentSemester: null,
    currentQuestionIndex: 0,
    score: 0,
    attempts: 0,
    totalAcademicPoints: 0,
    userLevel: 1, // Initial user level
    // All modules for 'humanities_fields' are unlocked initially for testing
    unlockedModules: [],
    MAX_ATTEMPTS: 3,
    currentUser: null, // Stores logged-in user info
    isDeveloper: false, // Flag for developer access
    // Mock user database (for frontend simulation only)
    mockUsers: [
        { email: 'dev@example.com', password: 'devpass', name: 'المطور', id: 'dev123', role: 'developer', academicPoints: 9999, level: 10, unlockedModules: [] },
        { email: 'user@example.com', password: 'userpass', name: 'طالب جامعي', id: 'user123', role: 'student', academicPoints: 150, level: 3, unlockedModules: ['module1_civ', 'module2_civ', 'module1_res'] },
        { email: 'student2@example.com', password: 'pass', name: 'طالب مجتهد', id: 'user456', role: 'student', academicPoints: 200, level: 4, unlockedModules: ['module1_civ', 'module2_civ', 'module3_civ', 'module1_res', 'module2_res'] },
        { email: 'student3@example.com', password: 'pass', name: 'طالب جديد', id: 'user789', role: 'student', academicPoints: 50, level: 1, unlockedModules: ['module1_civ'] }
    ],
    // Mock analytics data (for developer dashboard simulation only)
    mockAnalytics: {
        dailyUsers: 150,
        weeklyUsers: 800,
        yearlyUsers: 5000,
        visitRate: '75%',
        userErrors: [
            { userId: 'user123', type: 'Quiz Error', details: 'أخطأ في سؤال مضيق هرمز 3 مرات', timestamp: '2023-10-27 14:05' },
            { userId: 'newuser456', type: 'Login Failed', details: 'حاول تسجيل الدخول بكلمة مرور خاطئة', timestamp: '2023-10-27 14:10' },
            { userId: 'user123', type: 'Comment Spam', details: 'أرسل تعليقًا متكررًا', timestamp: '2023-10-27 14:20' }
        ]
    }
};

const sounds = {
    correct: document.getElementById('correct-sound'),
    wrong: document.getElementById('wrong-sound'),
    levelUp: document.getElementById('level-up-sound')
};
function playSound(sound) {
    sounds[sound].currentTime = 0;
    sounds[sound].play().catch(error => console.log("Playback prevented by browser:", error));
}

// Utility function to show toast notifications
function showToast(message, duration = 3000, type = 'info') { // Added type for different styles
    toastNotification.textContent = message;
    toastNotification.className = 'show'; // Reset classes
    toastNotification.classList.add(type); // Add type class for styling (e.g., 'info', 'success', 'error')
    setTimeout(() => {
        toastNotification.classList.remove('show', type);
    }, duration);
}

// --- Authentication Functions (Frontend Mock - Backend needed for real functionality) ---
function showAuthModal(mode = 'login') {
    authModal.classList.add('show');
    
    const usernameGroup = document.getElementById('username-group');
    const usernameInput = document.getElementById('auth-username');
    const switchToRegisterContainer = document.getElementById('switch-to-register-container');

    if (mode === 'login') {
        authModalTitle.textContent = 'تسجيل الدخول';
        authSubmitBtn.textContent = 'تسجيل الدخول';
        
        usernameGroup.classList.add('hidden');
        usernameInput.required = false; 

        switchToRegisterContainer.innerHTML = 'ليس لديك حساب؟ <a href="#" id="switch-to-register">سجل الآن</a>';
        document.getElementById('switch-to-register').onclick = (e) => { e.preventDefault(); showAuthModal('register'); };

    } else { // register
        authModalTitle.textContent = 'إنشاء حساب جديد';
        authSubmitBtn.textContent = 'إنشاء حساب';
        
        usernameGroup.classList.remove('hidden');
        usernameInput.required = true;

        switchToRegisterContainer.innerHTML = 'لديك حساب بالفعل؟ <a href="#" id="switch-to-login">سجل دخول</a>';
        document.getElementById('switch-to-login').onclick = (e) => { e.preventDefault(); showAuthModal('login'); };
    }

    authForm.onsubmit = (e) => {
        e.preventDefault();
        handleAuthSubmit(mode);
    };
}

function renderCourseOrLectureChoiceScreen() {
    const choiceScreen = document.getElementById('choice-screen');
    choiceScreen.innerHTML = `
        <h2>اختر مسارك للسداسي ${gameState.currentSemester === 1 ? 'الأول' : 'الثاني'}</h2>
        <div class="card-list" style="grid-template-columns: 1fr 1fr;">
            <div class="card" onclick="showScreen('course')">
                <i class="fas fa-question-circle" style="font-size: 2rem; margin-bottom: 10px;"></i>
                <span>الاختبارات التفاعلية</span>
            </div>
            <div class="card" onclick="showLecturesScreen()">
                <i class="fas fa-book-open" style="font-size: 2rem; margin-bottom: 10px;"></i>
                <span>ملخصات المحاضرات</span>
            </div>
        </div>
        <button class="btn" style="background: linear-gradient(45deg, #6c757d, #5a6268); margin-top: 40px;" onclick="showScreen('semester')">العودة لاختيار السداسي</button>
    `;
    showScreen('choice');
}
// دالة لعرض قائمة المقاييس المتاحة للقراءة
function showLecturesScreen() {
    const lecturesScreen = document.getElementById('lectures-screen');
    let coursesHTML = Object.keys(quizData)
        .filter(courseKey => quizData[courseKey].semester === gameState.currentSemester && quizData[courseKey].summary)
        .map(courseKey => {
            const course = quizData[courseKey];
            return `
                <div class="card" onclick="showLectureContent('${courseKey}')">
                    <span>${course.name}</span>
                    ${course.icon}
                </div>
            `;
        }).join('');

    if (coursesHTML === '') {
        coursesHTML = `<p class="screen-description">لا توجد ملخصات متاحة لهذا السداسي حالياً.</p>`;
    }

    lecturesScreen.innerHTML = `
        <h2>ملخصات مقاييس السداسي ${gameState.currentSemester === 1 ? 'الأول' : 'الثاني'}</h2>
        <div class="card-list">${coursesHTML}</div>
        <button class="btn" onclick="renderCourseOrLectureChoiceScreen()">العودة</button>
    `;
    showScreen('lectures');
}

// دالة لعرض محتوى الملخص الفعلي للمقياس المختار
function showLectureContent(courseKey) {
    const lectureContentScreen = document.getElementById('lecture-content-screen');
    const course = quizData[courseKey];
    lectureContentScreen.innerHTML = `
        <div class="lecture-content-container">
            <h2>${course.name}</h2>
            <div class="lecture-summary">
                ${course.summary}
            </div>
            <button class="btn" onclick="showLecturesScreen()">العودة لقائمة المقاييس</button>
        </div>
    `;
    showScreen('lectureContent');
}
function closeAuthModal() {
    authModal.classList.remove('show');
    authEmailInput.value = '';
    authPasswordInput.value = '';
    document.getElementById('auth-username').value = ''; // Clear username field too
}

async function handleAuthSubmit(mode) {
    const email = document.getElementById('auth-email').value;
    const password = document.getElementById('auth-password').value;
    let username = '';
    if (mode === 'register') {
        username = document.getElementById('auth-username').value;
    }

    showToast(`جاري ${mode === 'login' ? 'تسجيل الدخول' : 'إنشاء الحساب'}...`, 3000, 'info');

    const endpoint = mode === 'login' ? 'login' : 'register';
    const body = mode === 'login' ? { email, password } : { username, email, password };

    try {
        const response = await fetch(`https://academic-challenge-api.onrender.com/api/auth/${endpoint}`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(body)
        });
        const data = await response.json();
        if (!response.ok) throw new Error(data.message || 'حدث خطأ ما');

        localStorage.setItem('token', data.token);
        gameState.currentUser = data.user;
        
        if (mode === 'login') {
            gameState.totalAcademicPoints = data.user.academic_points;
            gameState.userLevel = data.user.level;
            gameState.unlockedModules = data.user.unlocked_modules || [];
        } else {
            gameState.totalAcademicPoints = 0;
            gameState.userLevel = 1;
            gameState.unlockedModules = [];
        }
        
        gameState.isDeveloper = (data.user.role === 'developer');

        showToast(mode === 'login' ? `أهلاً بك مرة أخرى ${data.user.username}!` : 'تم إنشاء حسابك بنجاح!', 3000, 'success');
        closeAuthModal();
        updateHeaderForUser();
        showScreen('institute');

    } catch (error) {
        showToast(`فشل: ${error.message}`, 4000, 'error');
    }
}

function updateHeaderForUser() {
    const userProfileItem = document.getElementById('user-profile');
    if (gameState.currentUser) {
        userProfileItem.innerHTML = `${ICONS.user}<span>${gameState.currentUser.username}</span>`; // تصحيح هنا
        userProfileItem.onclick = showUserProfile;
    } else {
        userProfileItem.innerHTML = `${ICONS.user}<span>تسجيل الدخول</span>`;
        userProfileItem.onclick = () => showAuthModal('login');
    }
    document.querySelector('#user-level').innerHTML = `${ICONS.level}<span>المستوى ${gameState.userLevel}</span>`;
    document.getElementById('academic-points').innerHTML = `${ICONS.points}<span>${gameState.totalAcademicPoints}</span>`;
}

async function showAdminDashboard() {
    const adminScreen = document.getElementById('admin-dashboard-screen');
    showScreen('adminDashboard');
    adminScreen.innerHTML = `<h2><i class="fas fa-spinner fa-spin"></i> جاري تحميل بيانات المشرف...</h2>`;

    const token = localStorage.getItem('token');
    if (!token) {
        adminScreen.innerHTML = '<h2>خطأ: يجب تسجيل الدخول</h2>';
        return;
    }

    try {
        // جلب البيانات من الخادم
        const [usersResponse, statsResponse] = await Promise.all([
            fetch('https://academic-challenge-api.onrender.com/api/users', { headers: { 'x-auth-token': token } }),
            fetch('https://academic-challenge-api.onrender.com/api/users/stats/registrations', { headers: { 'x-auth-token': token } })
        ]);

        const users = await usersResponse.json();
        const stats = await statsResponse.json();

        if (!usersResponse.ok) throw new Error(users.message || 'فشل تحميل المستخدمين.');
        if (!statsResponse.ok) throw new Error(stats.message || 'فشل تحميل الإحصائيات.');

        // --- حساب الإحصائيات ---
        const today = new Date().toISOString().slice(0, 10);
        const newUsersToday = users.filter(user => (user.created_at || '').slice(0, 10) === today).length;

        // --- بناء الجدول ---
        const tableRowsHTML = users.map(user => `
            <tr>
                <td>${user.username}</td>
                <td>${user.email}</td>
                <td>${user.level}</td>
                <td>${user.academic_points}</td>
                <td>${new Date(user.created_at).toLocaleDateString('ar-EG')}</td>
            </tr>
        `).join('');

        // --- بناء الهيكل الكامل للصفحة ---
        const dashboardHTML = `
            <h2>لوحة تحكم المشرف</h2>
            <div class="card-list" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); margin-bottom: 40px;">
                <div class="card"><span>إجمالي المستخدمين</span> <span style="font-size: 1.5rem; color: var(--color-accent-gold);">${users.length}</span></div>
                <div class="card"><span>المستخدمون الجدد اليوم</span> <span style="font-size: 1.5rem; color: var(--color-accent-gold);">${newUsersToday}</span></div>
            </div>

            <h3>تطور تسجيل المستخدمين (شهرياً)</h3>
            <div class="chart-container" style="background: var(--color-surface-dark); border-radius: 15px; padding: 20px; margin-bottom: 40px;">
                <canvas id="usersChart"></canvas>
            </div>

            <h3>قائمة إدارة المستخدمين</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>اسم المستخدم</th>
                            <th>البريد الإلكتروني</th>
                            <th>المستوى</th>
                            <th>النقاط</th>
                            <th>تاريخ التسجيل</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${tableRowsHTML}
                    </tbody>
                </table>
            </div>
            <button class="btn" style="background: linear-gradient(45deg, #6c757d, #5a6268); margin-top: 25px;" onclick="showUserProfile()">العودة للملف الشخصي</button>
        `;
        
        // عرض الهيكل على الشاشة
        adminScreen.innerHTML = dashboardHTML;

        // --- رسم المنحنى ---
        const ctx = document.getElementById('usersChart').getContext('2d');
        const labels = stats.map(s => s.month);
        const data = stats.map(s => s.count);

        new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'عدد المستخدمين الجدد',
                    data: data,
                    backgroundColor: 'rgba(76, 175, 80, 0.2)',
                    borderColor: 'rgba(76, 175, 80, 1)',
                    borderWidth: 3,
                    tension: 0.4,
                    fill: true,
                }]
            },
            options: {
                responsive: true,
                scales: { y: { beginAtZero: true, ticks: { color: 'white', stepSize: 1 } }, x: { ticks: { color: 'white' } } },
                plugins: { legend: { labels: { color: 'white' } } }
            }
        });

    } catch (error) {
        adminScreen.innerHTML = `<div style="text-align: center;"><h2>خطأ</h2><p style="color: var(--color-error);">${error.message}</p></div>`;
    }
}

async function checkLoggedIn() {
    const token = localStorage.getItem('token');
    if (!token) { showScreen('welcome'); return; }
    try {
        const response = await fetch('https://academic-challenge-api.onrender.com/api/auth/me', { headers: { 'x-auth-token': token } });
        const data = await response.json();
        if (!response.ok) { localStorage.removeItem('token'); showScreen('welcome'); return; }
        
        gameState.currentUser = data;
        gameState.totalAcademicPoints = data.academic_points;
        gameState.userLevel = data.level;
        gameState.unlockedModules = data.unlocked_modules || [];
        updateHeaderForUser();

        const lastScreen = localStorage.getItem('lastScreen') || 'institute';
        showScreen(lastScreen);
    } catch (error) {
        localStorage.removeItem('token');
        showScreen('welcome');
    }
}

function showUserProfile() {
    if (!gameState.currentUser) {
        showAuthModal('login');
        return;
    }

    // --- START: NEW CODE ---
    // تحقق إذا كان المستخدم الحالي مشرفاً
    const isAdmin = gameState.currentUser.role === 'admin';
    
    // قم بإنشاء كود HTML الخاص بزر المشرف فقط إذا كان الشرط صحيحاً
    const adminButtonHTML = isAdmin 
        ? `<div class="card" onclick="showAdminDashboard()"><span>لوحة تحكم المشرف</span> ${ICONS.dashboard}</div>` 
        : ''; // إذا لم يكن مشرفاً، لا تضف أي شيء
    // --- END: NEW CODE ---

    screens.userProfile.innerHTML = `
        <h2>الملف الشخصي</h2>
        <div class="card-list" style="grid-template-columns: 1fr;">
            <div class="card"><span>البريد الإلكتروني:</span> <span>${gameState.currentUser.email}</span></div>
            <div class="card"><span>الاسم:</span> <span>${gameState.currentUser.username}</span></div>
            <div class="card"><span>المستوى الأكاديمي:</span> <span>${gameState.userLevel}</span></div>
            <div class="card"><span>النقاط الأكاديمية:</span> <span>${gameState.totalAcademicPoints}</span></div>
            
            ${adminButtonHTML} <!-- هنا سيتم وضع زر المشرف (أو سيترك فارغاً) -->

            <div class="card" onclick="showCommentsModal()"><span>التعليقات والملاحظات</span> ${ICONS.comment}</div>
            <div class="card" onclick="renderLeaderboardScreen()"><span>لوحة المتصدرين</span> ${ICONS.leaderboard}</div>
            <button class="btn" onclick="logoutUser()">تسجيل الخروج</button>
            <button class="btn" style="background: linear-gradient(45deg, #6c757d, #5a6268); margin-top: 15px;" onclick="showScreen('institute')">العودة للرئيسية</button>
        </div>
    `;
    showScreen('userProfile');
}
function logoutUser() {
    // Save current user state to mockUsers before logging out (for persistence in mock)
    if (gameState.currentUser) {
        const userIndex = gameState.mockUsers.findIndex(u => u.id === gameState.currentUser.id);
        if (userIndex !== -1) {
            gameState.mockUsers[userIndex].academicPoints = gameState.totalAcademicPoints;
            gameState.mockUsers[userIndex].level = gameState.userLevel;
            gameState.mockUsers[userIndex].unlockedModules = [...gameState.unlockedModules];
        }
    }

    gameState.currentUser = null;
    gameState.isDeveloper = false;
    gameState.totalAcademicPoints = 0;
    gameState.userLevel = 1;
    gameState.unlockedModules = []; // Reset unlocked modules for a new session
    localStorage.removeItem('token'); // Clear token on logout
    updateHeaderForUser();
    showToast('تم تسجيل الخروج بنجاح.', 3000, 'info');
    showScreen('welcome');
}

// --- Developer Dashboard (Frontend Mock) ---
function showDeveloperDashboard() {
    if (!gameState.isDeveloper) {
        showToast('ليس لديك صلاحية الوصول لهذه الصفحة.', 3000, 'error');
        showScreen('welcome'); // Redirect if not developer
        return;
    }
    appHeader.style.display = 'flex';
    screens.developerDashboard.innerHTML = `
        <h2>لوحة تحكم المطور</h2>
        <div class="card-list" style="grid-template-columns: 1fr;">
            <div class="card"><span>عدد المستخدمين الكلي:</span> <span>${gameState.mockUsers.length}</span></div>
            <div class="card"><span>عدد المستخدمين اليومي:</span> <span>${gameState.mockAnalytics.dailyUsers}</span></div>
            <div class="card"><span>عدد المستخدمين الأسبوعي:</span> <span>${gameState.mockAnalytics.weeklyUsers}</span></div>
            <div class="card"><span>عدد المستخدمين السنوي:</span> <span>${gameState.mockAnalytics.yearlyUsers}</span></div>
            <div class="card"><span>نسبة زيارات الموقع:</span> <span>${gameState.mockAnalytics.visitRate}</span></div>
            <div class="card" onclick="renderManageUsersScreen()"><span>إدارة المستخدمين</span> ${ICONS.user}</div>
            <div class="card" onclick="renderUserErrorsScreen()"><span>سجل أخطاء المستخدمين</span> ${ICONS.comment}</div>
            <button class="btn" style="background: linear-gradient(45deg, #6c757d, #5a6268); margin-top: 25px;" onclick="showUserProfile()">العودة للملف الشخصي</button>
        </div>
    `;
    showScreen('developerDashboard');
}

function renderManageUsersScreen() {
    if (!gameState.isDeveloper) { showToast('ليس لديك صلاحية.', 3000, 'error'); return; }
    screens.developerDashboard.innerHTML = `
        <h2>إدارة المستخدمين</h2>
        <div class="user-management-list">
            ${gameState.mockUsers.map(user => `
                <div class="card user-item">
                    <span>${user.name} (${user.email}) - المستوى: ${user.level} - النقاط: ${user.academicPoints}</span>
                    <button class="btn-small btn-delete" onclick="deleteUser('${user.id}')">حذف</button>
                </div>
            `).join('')}
        </div>
        <button class="btn" style="background: linear-gradient(45deg, #6c757d, #5a6268); margin-top: 25px;" onclick="showDeveloperDashboard()">العودة للوحة التحكم</button>
    `;
    showScreen('developerDashboard'); // Re-use dashboard screen for sub-views
}

function deleteUser(userId) {
    if (!gameState.isDeveloper) { showToast('ليس لديك صلاحية.', 3000, 'error'); return; }
    if (confirm('هل أنت متأكد من حذف هذا المستخدم؟')) {
        gameState.mockUsers = gameState.mockUsers.filter(user => user.id !== userId);
        showToast('تم حذف المستخدم بنجاح (وهمي).', 3000, 'success');
        renderManageUsersScreen(); // Re-render the list
        saveGameState(); // Save state after deletion
    }
}

function renderUserErrorsScreen() {
    if (!gameState.isDeveloper) { showToast('ليس لديك صلاحية.', 3000, 'error'); return; }
    screens.developerDashboard.innerHTML = `
        <h2>سجل أخطاء المستخدمين</h2>
        <div class="error-log-list">
            ${gameState.mockAnalytics.userErrors.map(error => `
                <div class="card error-item">
                    <p><strong>المستخدم:</strong> ${error.userId}</p>
                    <p><strong>النوع:</strong> ${error.type}</p>
                    <p><strong>التفاصيل:</strong> ${error.details}</p>
                    <span style="font-size: 0.8em; opacity: 0.6;">${error.timestamp}</span>
                </div>
            `).join('')}
        </div>
        <button class="btn" style="background: linear-gradient(45deg, #6c757d, #5a6268); margin-top: 25px;" onclick="showDeveloperDashboard()">العودة للوحة التحكم</button>
    `;
    showScreen('developerDashboard');
}

// --- New Leaderboard Screen ---
async function renderLeaderboardScreen() {
    showScreen('leaderboard');
    const leaderboardScreen = document.getElementById('leaderboard-screen');
    leaderboardScreen.innerHTML = `<h2><i class="fas fa-spinner fa-spin"></i> جاري تحميل لوحة المتصدرين...</h2>`;
    try {
        const response = await fetch('https://academic-challenge-api.onrender.com/api/users/leaderboard');
        const topUsers = await response.json();
        if (!response.ok) throw new Error('فشل تحميل البيانات');

        leaderboardScreen.innerHTML = `
            <h2>${ICONS.leaderboard} لوحة المتصدرين</h2>
            <div class="leaderboard-list">
                ${topUsers.map((user, index) => `
                    <div class="card leaderboard-item">
                        <span class="rank">${index + 1}</span>
                        <span class="username">${user.username}</span>
                        <div class="user-stats">
                            <span>${ICONS.level} المستوى: ${user.level}</span>
                            <span>${ICONS.points} النقاط: ${user.academic_points}</span>
                        </div>
                    </div>
                `).join('')}
            </div>
            <button class="btn" onclick="showUserProfile()">العودة للملف الشخصي</button>
        `;
    } catch (error) {
        leaderboardScreen.innerHTML = `<div style="text-align: center;"><h2>خطأ</h2><p>${error.message}</p></div>`;
    }
}


// --- Comments System (Frontend Mock) ---
function showCommentsModal() {
    if (!gameState.currentUser) {
        showAuthModal('login');
        return;
    }
    commentsModal.classList.add('show');
    renderComments(); // Display existing comments (mocked)
    submitCommentBtn.onclick = submitComment;
}

function closeCommentsModal() {
    commentsModal.classList.remove('show');
    newCommentText.value = '';
}

// Mock comments data (in a real app, this would come from a database)
let mockComments = [
    { author_username: 'طالب جامعي', content: 'تطبيق رائع ومفيد جداً للمراجعة!', created_at: '2023-10-26T10:00:00Z' },
    { author_username: 'المطور', content: 'شكراً لملاحظاتكم، نعمل على تحسين التجربة باستمرار.', created_at: '2023-10-26T10:30:00Z' }
];

async function renderComments() {
    commentsList.innerHTML = '<p style="text-align: center; opacity: 0.7;">جاري تحميل التعليقات...</p>';
    
    try {
        // Mocking backend call for comments
        // In a real app, this would be:
        // const response = await fetch('https://academic-challenge-api.onrender.com/api/comments');
        // if (!response.ok) { throw new Error('فشل تحميل التعليقات'); }
        // const comments = await response.json();
        const comments = [...mockComments].reverse(); // Display newest first for mock

        commentsList.innerHTML = ''; // Clear the list before adding new comments

        if (comments.length === 0) {
            commentsList.innerHTML = '<p style="text-align: center; opacity: 0.7;">لا توجد تعليقات بعد. كن أول من يضيف تعليقاً!</p>';
            return;
        }

        comments.forEach(comment => {
            const commentDiv = document.createElement('div');
            commentDiv.className = 'comment-card';
            commentDiv.innerHTML = `
                <p><strong>${comment.author_username || 'مستخدم'}:</strong> ${comment.content}</p>
                <span>${new Date(comment.created_at).toLocaleString('ar-EG')}</span>
            `;
            commentsList.appendChild(commentDiv);
        });
        
        commentsList.scrollTop = commentsList.scrollHeight; // Scroll to bottom

    } catch (error) {
        commentsList.innerHTML = `<p style="text-align: center; color: var(--color-error);">خطأ: ${error.message}</p>`;
        console.error('Error fetching comments:', error);
    }
}

async function updateUserProgressOnServer() {
    // تأكد من وجود مستخدم مسجل دخول
    if (!gameState.currentUser) return;

    const token = localStorage.getItem('token');
    if (!token) {
        console.error("Token not found. Cannot update progress.");
        return;
    }

    try {
        // --- START: REAL BACKEND CODE ---
        const response = await fetch('https://academic-challenge-api.onrender.com/api/users/progress', {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
                'x-auth-token': token
            },
            body: JSON.stringify({
                academic_points: gameState.totalAcademicPoints,
                level: gameState.userLevel,
                unlocked_modules: gameState.unlockedModules
            })
        });

        const data = await response.json();

        if (!response.ok) {
            throw new Error(data.message || "Failed to update progress on server.");
        }
        
        console.log("User progress successfully saved to the server.");
        showToast("تم حفظ تقدمك بنجاح!", 2000, 'success');
        // --- END: REAL BACKEND CODE ---

    } catch (error) {
        console.error("Error saving user progress:", error);
        showToast(`خطأ: ${error.message}`, 4000, 'error');
    }
}

async function submitComment() {
    const commentText = newCommentText.value.trim();
    if (!commentText) {
        showToast('الرجاء كتابة تعليق قبل الإرسال.', 2000, 'error');
        return;
    }

    if (!gameState.currentUser) {
        showToast('الرجاء تسجيل الدخول لإضافة تعليق.', 3000, 'error');
        closeCommentsModal();
        showAuthModal('login');
        return;
    }

    try {
        // Mocking backend call for comment submission
        const newComment = {
            author_username: gameState.currentUser.name,
            content: commentText,
            created_at: new Date().toISOString()
        };
        mockComments.push(newComment);
        
        // In a real app:
        /*
        const token = localStorage.getItem('token');
        const response = await fetch('https://academic-challenge-api.onrender.com/api/comments', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'x-auth-token': token
            },
            body: JSON.stringify({ content: commentText })
        });
        const data = await response.json();
        if (!response.ok) {
            throw new Error(data.message || 'فشل إرسال التعليق');
        }
        */

        newCommentText.value = ''; // Clear input field
        showToast('تم إرسال تعليقك بنجاح!', 3000, 'success');
        
        await renderComments(); // Reload comments to show the new one

    } catch (error) {
        showToast(`خطأ: ${error.message}`, 4000, 'error');
        console.error('Error submitting comment:', error);
    }
    saveGameState(); // Save state after comment submission
}


// --- Core App Logic (Remains largely the same, with minor adjustments) ---
function initializeApp() {
    checkLoggedIn(); // بدلاً من إظهار شاشة الترحيب، تحقق أولاً من حالة تسجيل الدخول
}

function saveGameState() {
    localStorage.setItem('academicChallengeGameState', JSON.stringify({
        currentUser: gameState.currentUser,
        isDeveloper: gameState.isDeveloper,
        totalAcademicPoints: gameState.totalAcademicPoints,
        userLevel: gameState.userLevel,
        unlockedModules: gameState.unlockedModules,
        mockUsers: gameState.mockUsers, // Save mock users for persistence
        mockComments: mockComments // Save mock comments for persistence
    }));
}

function showScreen(screenKey) {
    Object.values(screens).forEach(s => s.classList.add('hidden'));
    if (screens[screenKey]) screens[screenKey].classList.remove('hidden');
    
    const screensToExclude = ['quiz', 'welcome'];
    if (!screensToExclude.includes(screenKey)) {
        localStorage.setItem('lastScreen', screenKey);
    }
    
    const isFullScreen = (screenKey === 'welcome' || screenKey === 'quiz');
    appHeader.style.display = isFullScreen ? 'none' : 'flex';
    quizHud.classList.toggle('active', screenKey === 'quiz');

    const renderFunction = {
        'welcome': renderWelcomeScreen, 'institute': renderInstituteScreen, 'year': renderYearScreen, 'semester': renderSemesterScreen, 'course': renderCourseScreen, 'academicPath': renderAcademicPathScreen, 'quiz': displayQuestion
    }[screenKey];

    if (renderFunction) renderFunction();
}

function renderWelcomeScreen() {
    appHeader.style.display = 'none';
    screens.welcome.innerHTML = `
        <div class="welcome-content">
            <div class="logo">${ICONS.level}</div>
            <h1>منصة التحدي الأكاديمي</h1>
            <p class="screen-description">بوابتك التفاعلية للتفوق في مسيرتك الجامعية. تعلم، اختبر معلوماتك، وتصدر قائمة المتفوقين.</p>
            <div class="features-grid">
                <div class="feature-item"><i class="fas fa-book-open"></i> محتوى متخصص</div>
                <div class="feature-item"><i class="fas fa-question-circle"></i> اختبارات تفاعلية</div>
                <div class="feature-item"><i class="fas fa-trophy"></i> تنافس وتصدر</div>
            </div>
            <button class="btn" onclick="showAuthModal('login')">ابدأ رحلتك الآن</button>
        </div>
    `;
}

function renderInstituteScreen() {
    if (!gameState.currentUser) {
        showAuthModal('login'); // Force login if not authenticated
        return;
    }
    appHeader.style.display = 'flex';
    screens.institute.innerHTML = `
        <h2>اختر تخصص</h2>
        <div class="card-list">
            <div class="card" onclick="showScreen('year')"><span>تخصص العلوم الإنسانية</span></div>
            <div class="card locked"><span>تخصص العلوم الاجتماعية</span>${ICONS.lock}</div>
            <div class="card locked"><span>تخصص الحقوق والعلوم السياسية</span>${ICONS.lock}</div>
            <div class="card locked"><span>تخصص العلوم والتكنولوجيا</span>${ICONS.lock}</div>
            <div class="card locked"><span>تخصص العلوم الاقتصادية</span>${ICONS.lock}</div>
        </div>`;
}

function renderYearScreen() {
    if (!gameState.currentUser) { showAuthModal('login'); return; }
    screens.year.innerHTML = `
        <h2>اختر السنة الدراسية</h2>
        <div class="card-list">
            <div class="card" onclick="showScreen('semester')"><span>السنة الأولى (جذع مشترك)</span></div>
            <div class="card locked"><span>السنة الثانية (تخصص)</span>${ICONS.lock}</div>
            <div class="card locked"><span>السنة الثالثة (تخصص)</span>${ICONS.lock}</div>
        </div>`;
}

function renderSemesterScreen() {
    if (!gameState.currentUser) { showAuthModal('login'); return; }
    screens.semester.innerHTML = `
        <h2>اختر السداسي</h2>
        <div class="card-list">
            <div class="card" onclick="selectSemester(1)"><span>السداسي الأول</span></div>
            <div class="card" onclick="selectSemester(2)"><span>السداسي الثاني</span></div>
        </div>`;
}

function selectSemesterAndShowOptions(semesterNumber) {
    gameState.currentSemester = semesterNumber;
    renderCourseOrLectureChoiceScreen();
}

function selectSemester(semesterNumber) {
    gameState.currentSemester = semesterNumber;
    showScreen('course');
}

function renderCourseScreen() {
    if (!gameState.currentUser) { showAuthModal('login'); return; }

    let courseCardsHTML = Object.keys(quizData)
        .filter(courseKey => quizData[courseKey].semester === gameState.currentSemester)
        .map(courseKey => {
            const course = quizData[courseKey];
            const isLocked = !course.modules || Object.keys(course.modules).length === 0;
            return `
                <div class="card ${isLocked ? 'locked' : ''}" onclick="${isLocked ? '' : `selectCourse('${courseKey}')`}">
                    <span>${course.name}</span>
                    ${isLocked ? ICONS.lock : course.icon}
                </div>
            `;
        }).join('');

    if (courseCardsHTML === '') {
        courseCardsHTML = `<p class="screen-description">لا توجد مقاييس متاحة لهذا السداسي حالياً.</p>`;
    }

    screens.course.innerHTML = `
        <h2>مقاييس السداسي ${gameState.currentSemester === 1 ? 'الأول' : 'الثاني'}</h2>
        <div class="card-list">${courseCardsHTML}</div>
        <button class="btn" style="background: linear-gradient(45deg, #6c757d, #5a6268); margin-top: 40px;" onclick="showScreen('semester')">العودة لاختيار السداسي</button>
    `;
}

function selectCourse(courseKey) {
    if (!gameState.currentUser) { showAuthModal('login'); return; }
    console.log(`Selected course: ${courseKey}`);
    gameState.currentCourse = courseKey;
    showScreen('academicPath');
}

function renderAcademicPathScreen() {
    if (!gameState.currentUser) { showAuthModal('login'); return; }
    quizHud.classList.remove('active');
    const course = quizData[gameState.currentCourse];
    let moduleNodesHTML = Object.keys(course.modules).map(moduleKey => {
        const module = course.modules[moduleKey];
        const isLocked = false;        return `
            <div class="module-node ${isLocked ? 'locked' : ''}" onclick="${isLocked ? '' : `startQuiz('${moduleKey}')`}">
                <div class="module-icon">${module.icon}</div>
                <h3>${module.name}</h3>
            </div>`;
    }).join('');

    screens.academicPath.innerHTML = `
        <h2>محتوى مقياس: ${course.name}</h2>
        <div class="academic-path">${moduleNodesHTML}</div>
        <button class="btn" style="background: linear-gradient(45deg, #6c757d, #5a6268); margin-top: 40px;" onclick="showScreen('course')">العودة للمقاييس</button>
        `;
}

function startQuiz(moduleKey) {
    if (!gameState.currentUser) {
        showAuthModal('login');
        return;
    }
    console.log(`Starting quiz for module: ${moduleKey}`);
    gameState.currentModule = moduleKey;
    gameState.currentQuestionIndex = 0;
    gameState.score = 0;
    gameState.attempts = gameState.MAX_ATTEMPTS;
    quizHud.classList.add('active');
    appHeader.style.display = 'none'; // Hide header during quiz
    updateAttemptsDisplay();
    showScreen('quiz');
    displayQuestion();
}

function confirmExitQuiz() {
    if (confirm('هل أنت متأكد أنك تريد الخروج من الاختبار؟ سيتم فقدان تقدمك الحالي.')) {
        showScreen('academicPath');
    }
}

function displayQuestion() {
    const questionData = quizData[gameState.currentCourse].modules[gameState.currentModule].questions[gameState.currentQuestionIndex];
    let questionHTML = questionData.question.replace('______', '<span class="blank">______</span>');

    questionText.innerHTML = questionHTML;
    optionsGrid.innerHTML = '';

    if (questionData.type === 'fill') {
        optionsGrid.innerHTML = `
            <div class="fill-in-container">
                <input type="text" class="fill-in-input" id="fill-in-answer" placeholder="اكتب إجابتك هنا" onkeydown="if(event.key==='Enter') document.getElementById('check-answer-btn').click()">
                <button id="check-answer-btn" onclick="checkFillAnswer()">تحقق</button>
            </div>`;
        document.getElementById('fill-in-answer').focus();
    } else { // MCQ
        questionData.options.forEach(opt => {
            const button = document.createElement('button');
            button.className = 'card option-btn';
            button.textContent = opt;
            button.onclick = () => selectMCQAnswer(button, opt);
            optionsGrid.appendChild(button);
        });
    }

    progressBar.style.width = `${(gameState.currentQuestionIndex / quizData[gameState.currentCourse].modules[gameState.currentModule].questions.length) * 100}%`;
}

function updateAttemptsDisplay() {
    attemptsContainer.innerHTML = '';
    for (let i = 0; i < gameState.MAX_ATTEMPTS; i++) { // Always show MAX_ATTEMPTS hearts
        const heartIcon = document.createElement('i');
        heartIcon.className = 'fas fa-heart'; // Font Awesome heart
        if (i >= gameState.attempts) {
            heartIcon.classList.add('lost'); // Add a class for lost attempts
        }
        attemptsContainer.appendChild(heartIcon);
    }
}

function selectMCQAnswer(button, selectedOption) {
    document.querySelectorAll('.option-btn').forEach(btn => btn.disabled = true);
    const questionData = quizData[gameState.currentCourse].modules[gameState.currentModule].questions[gameState.currentQuestionIndex];
    const isCorrect = selectedOption.toLowerCase() === questionData.answer.toLowerCase();
    processAnswer(isCorrect, button);
}

function checkFillAnswer() {
    const input = document.getElementById('fill-in-answer');
    const checkBtn = document.getElementById('check-answer-btn');
    const userAnswer = input.value.trim();

    if (!userAnswer) {
        showToast('الرجاء كتابة إجابتك.', 2000, 'error');
        return;
    }

    input.disabled = true;
    checkBtn.disabled = true;

    const questionData = quizData[gameState.currentCourse].modules[gameState.currentModule].questions[gameState.currentQuestionIndex];
    const isCorrect = userAnswer.toLowerCase() === questionData.answer.toLowerCase();
    processAnswer(isCorrect, input);
}

function processAnswer(isCorrect, element) {
    const questionData = quizData[gameState.currentCourse].modules[gameState.currentModule].questions[gameState.currentQuestionIndex];
    feedbackContainer.classList.remove('correct', 'wrong');
    explanationBtn.classList.add('hidden');

    if (isCorrect) {
        if (element.tagName === 'BUTTON') {
            element.classList.add('correct');
        } else { // input field
            element.style.borderColor = 'var(--color-success)';
            element.style.boxShadow = '0 0 15px var(--color-success)';
        }
        feedbackTitle.textContent = "إجابة موفقة!";
        feedbackText.textContent = "معلومة دقيقة وممتازة.";
        feedbackContainer.classList.add('correct', 'show');
        gameState.score++;
        playSound('correct');
    } else {
        if (element.tagName === 'BUTTON') {
            element.classList.add('wrong');
            // Highlight correct answer for MCQ
            document.querySelectorAll('.option-btn').forEach(btn => {
                if (btn.textContent.toLowerCase() === questionData.answer.toLowerCase()) {
                    btn.classList.add('correct'); // Show correct answer
                }
            });
        } else { // input field
            element.style.borderColor = 'var(--color-error)';
            element.style.boxShadow = '0 0 15px var(--color-error)';
        }
        gameState.attempts--;
        updateAttemptsDisplay();
        feedbackTitle.textContent = "إجابة غير صحيحة";
        feedbackText.textContent = `التصحيح: ${questionData.answer}`;
        explanationBtn.classList.remove('hidden');
        explanationBtn.onclick = () => {
            feedbackText.innerHTML = `<span style="font-weight:bold; color:white;">التوضيح الكامل:</span><br>${questionData.explanation}`;
        };
        feedbackContainer.classList.add('wrong', 'show');
        playSound('wrong');
    }

    progressBar.style.width = `${((gameState.currentQuestionIndex + 1) / quizData[gameState.currentCourse].modules[gameState.currentModule].questions.length) * 100}%`;
    setTimeout(nextStep, 4000);
}

function nextStep() {
    feedbackContainer.classList.remove('show');
    explanationBtn.classList.add('hidden');

    if (gameState.attempts === 0) {
        showCompletionScreen(true); // Lost all attempts
        return;
    }

    gameState.currentQuestionIndex++;
    const currentModuleData = quizData[gameState.currentCourse].modules[gameState.currentModule];
    if (gameState.currentQuestionIndex < currentModuleData.questions.length) {
        displayQuestion();
    } else {
        showCompletionScreen(false); // Module completed successfully
    }
}

async function showCompletionScreen(hasLost) {
    quizHud.classList.remove('active');
    appHeader.style.display = 'flex';
    const course = quizData[gameState.currentCourse];
    const module = course.modules[gameState.currentModule];
    const finalScore = (gameState.score / module.questions.length) * 20;
    const pointsWon = hasLost ? 0 : Math.round(finalScore * 1.5);

    // 1. تحديث النقاط في الذاكرة
    gameState.totalAcademicPoints += pointsWon;

    // 2. التحقق من ترقية المستوى
    if (gameState.totalAcademicPoints >= gameState.userLevel * 50) {
        gameState.userLevel++;
        playSound('levelUp');
        showToast(`تهانينا! لقد وصلت إلى المستوى ${gameState.userLevel}!`, 5000, 'success');
    }

    // 3. فتح الوحدة التالية
    if (!hasLost) {
        const moduleKeys = Object.keys(course.modules);
        const currentModuleIndex = moduleKeys.indexOf(gameState.currentModule);
        if (currentModuleIndex + 1 < moduleKeys.length) {
            const nextModuleKey = moduleKeys[currentModuleIndex + 1];
            if (!gameState.unlockedModules.includes(nextModuleKey)) {
                gameState.unlockedModules.push(nextModuleKey);
                showToast(`تم فتح الوحدة الجديدة: ${course.modules[nextModuleKey].name}!`, 4000, 'info');
            }
        }
    }
    
    // --- START: NEW AND CORRECTED CODE ---
    
    // 4. استدعاء الدالة الرئيسية لتحديث الشريط العلوي بالكامل بالقيم الجديدة
    updateHeaderForUser();

    // 5. الآن، قم بحفظ التقدم المحدث على الخادم
    await updateUserProgressOnServer();
    
    // --- END: NEW AND CORRECTED CODE ---

    // 6. عرض شاشة شهادة الإنجاز
    document.getElementById('completed-module-name').textContent = module.name;
    document.getElementById('final-score-text').textContent = `علامتك النهائية: ${finalScore.toFixed(1)} / 20`;
    document.getElementById('points-won-text').innerHTML = `+${pointsWon} نقطة أكاديمية ${ICONS.points}`;

    certificateModal.classList.add('show');
}

function closeCertificate() {
    certificateModal.classList.remove('show');
    showScreen('academicPath');
}

// Initial call to set up the app
initializeApp();
